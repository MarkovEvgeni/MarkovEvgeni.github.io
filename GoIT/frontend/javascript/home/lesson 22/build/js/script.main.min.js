'use strict';

document.addEventListener('DOMContentLoaded', function () {

    'use strict';

    var body = document.body;

    var questions = {}; // Объявляем объект, который будет содержать вопросы и варианты ответов.
    questions = { // Заполняем объект вопросами и ответами
        0: {
            'title': 'What is HTML?',
            'answers': ['Hypertext Markup Language', 'Objective Programming Language', 'How To Make Landingpage'],
            'check': 0
        },
        1: {
            'title': 'What is CSS?',
            'answers': ['Censor Sold Solar System', 'Central Sugar Station', 'Cascading Style Sheets'],
            'check': 2
        },
        2: {
            'title': 'What is JavaScript?',
            'answers': ['Analog of Java with more functions', 'High-level interpreted programming language', 'Language of Javas in Star Wars'],
            'check': 1
        },
        3: {
            'title': 'Select the CMS',
            'answers': ['Wordpress', 'Pure', 'Joomla', 'Bootstrap'],
            'check': [0, 2]
        }
    };

    try {
        module.exports = questions;
    } catch (e) {}

    localStorage.setItem('questionsAnswers', JSON.stringify(questions)); // Записываем вопросы и ответы в localStorage в качестве строки.

    var questionsBlock = localStorage.getItem('questionsAnswers'); // Считываем вопросы и ответы из localStorage строкой, записываем данные в переменную.       

    questionsBlock = JSON.parse(questionsBlock); // Трансформируем строку с вопросами и объектами назад в объект.

    var wrapper = {}; // Создадим объект для удобного доступа к элемента объекта questionsBlock из script'a в HTML при использовании шаблона

    wrapper = {
        name: questionsBlock
    };

    var template = document.getElementById('template'); // Объявляем переменную, которой присваиваем элемент DOM в который будет встроен шаблон.
    var templateHTML = template.innerHTML; // Объявляем и присваиваем переменной HTML-код, содержащийся в элементе <script>, в который будет встроен шаблон.
    var content = _.template(templateHTML); // Объявляем переменную, которой присваиваем функцию "_template" шаблонизатора Lodash. В качестве параметра функции выступает HTML-код, содержащийся в элементе <script>, в который будет встроен шаблон. 

    var abc = document.createElement('div');
    abc.style.padding = 10;
    abc.innerHTML = content(wrapper);
    body.appendChild(abc); // Вставляем шаблон на страницу.   


    //Объявляем правильные ответы, на странице будут выделены зеленым цветом.

    for (var index in questionsBlock) {
        var i = +index;
        if (questionsBlock[i]['check'].length === undefined) {
            var _k = questionsBlock[i]['check'] + 1; // Объявляем переменную которой присваиваем порядковый номер с правильным ответом, который находится в 'check'
            var _rightAnswer = document.querySelector('.question_block_' + (i + 1) + '_' + _k + ''); // Объявляем переменную, которой присвиваем input соответствующий правильному ответу 
            _rightAnswer.classList.add("right_answer"); // Добавляем класс 'right_answer' input который соответствует правильному ответу
        } else {
            var z = 0;
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = questionsBlock[i]['check'][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var index2 = _step.value;

                    var _z = +index2;
                    var k = _z + 1; // Объявляем переменную которой присваиваем порядковый номер с правильным ответом, который находится в 'check'
                    var rightAnswer = document.querySelector('.question_block_' + (i + 1) + '_' + k + ''); // Объявляем переменную, которой присвиваем input соответствующий правильному ответу 
                    rightAnswer.classList.add("right_answer"); // Добавляем класс 'right_answer' input который соответствует правильному ответу
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }
        };
    };

    var calc = {
        calculateResults: function calculateResults(el) {
            // Объявляем функцию которая будет рассчитывать количество правильных ответов и выводить модальное окно с результатом.
            el.preventDefault(); // Предотвращаем выполнение функции по умолчанию.
            var rightAnswersQuantity = document.querySelectorAll('.right_answer'); // Объявляем переменную в которую записываем все ответы с классом 'right_answer'
            rightAnswersQuantity = rightAnswersQuantity.length; // Присваиваем длину массива, содержащего элементы 'right_answer' переменной.
            var checkedAnswers = document.querySelectorAll(':checked'); // Объявляем переменную, которая будет содержать все отмеченные ответы
            checkedAnswers = checkedAnswers.length; // Считаем количество отмеченных ответов
            var usersRightAnswers = document.querySelectorAll('.right_answer' + ':checked'); // Объявляем перменную, которая будет содержать массив с отмеченными input с классом 'right_answer'
            usersRightAnswers = usersRightAnswers.length; // Считаем количество верно отмеченных ответов
            var conclusiveResult = (usersRightAnswers - (checkedAnswers - usersRightAnswers)) / rightAnswersQuantity * 100; // Рассчитываем результат
            console.log('before', conclusiveResult);
            var round = {
                rounder: function rounder(val) {
                    return Math.round(val * 100) / 100;
                }
            };

            try {
                module.exports = round;
            } catch (e) {}
            conclusiveResult = round.rounder(conclusiveResult);
            console.log('after', conclusiveResult);
            if (conclusiveResult > 0) {
                conclusiveResult = conclusiveResult + "%";
            } else {
                conclusiveResult = 0 + "%";
            };
            window.scrollTo(0, 0);
            var background = document.createElement('div'); // Создаем background для модального окна, чтобы не допустить нажатия на элементы body.
            background.style.zIndex = "2";
            background.style.width = "100%";
            background.style.height = "100%";
            background.style.backgroundColor = "rgba(192,192,192,0.3)";
            body.style.overflow = "hidden";
            background.style.top = "0";
            background.style.textAlign = "center";
            background.style.left = "0";
            background.style.position = "absolute";
            body.appendChild(background); // Добавляем background
            var before = document.createElement('div'); // Создаем элемент для выравнивания модального окна по высоте и ширине в зависимости от размера body
            before.style.content = "";
            before.style.display = "inline-block";
            before.style.height = "100%";
            before.style.verticalAlign = "middle";
            background.appendChild(before); // Добавляем before
            var modal = document.createElement('div'); // Создаем модальное окно
            modal.style.zIndex = "3";
            modal.style.borderRadius = "15px";
            modal.style.border = "5px solid black";
            modal.style.height = "200px";
            modal.style.width = "400px";
            modal.style.verticalAlign = "middle";
            modal.style.background = "white";
            modal.style.display = "inline-block";
            background.appendChild(modal); // Добавляем модальное окно
            var head = document.createElement('h4');
            head.innerHTML = 'Ваш результат';
            modal.appendChild(head);
            var result1 = document.createElement('p');
            result1.innerHTML = 'Вы отметили ответов: ' + checkedAnswers;
            modal.appendChild(result1);
            var result2 = document.createElement('p');
            result2.innerHTML = 'В том числе отметили верно: ' + usersRightAnswers;
            modal.appendChild(result2);
            var result3 = document.createElement('p');
            result3.innerHTML = 'В тесте было правильных ответов: ' + rightAnswersQuantity;
            modal.appendChild(result3);
            var result4 = document.createElement('h4');
            result4.innerHTML = 'Ваш результат: ' + conclusiveResult;
            modal.appendChild(result4);
            var refresh = document.createElement('input'); // Создаем кнопку обновления страницы и сброса результата
            refresh.type = 'button';
            refresh.id = 'reload';
            refresh.value = 'Попробовать снова';
            modal.appendChild(refresh);
            var calc2 = {
                rel: function rel(el) {
                    // Функция обновления страницы
                    el.preventDefault(); // Предотвращаем выполнение функции по умолчанию.
                    location.reload();
                    return 'Everything is fine';
                }
            };
            var reload = document.getElementById('reload');
            reload.addEventListener('click', calc2.rel); // Добавляем функцию обновления кнопке refresh
        }
    };

    var checkResults = document.getElementById('button');
    checkResults.addEventListener('click', calc.calculateResults); // Добавляем функцию рассчета результата и вывода модального окна кнопке "Проверить мой результат"
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJib2R5IiwicXVlc3Rpb25zIiwibW9kdWxlIiwiZXhwb3J0cyIsImUiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInF1ZXN0aW9uc0Jsb2NrIiwiZ2V0SXRlbSIsInBhcnNlIiwid3JhcHBlciIsIm5hbWUiLCJ0ZW1wbGF0ZSIsImdldEVsZW1lbnRCeUlkIiwidGVtcGxhdGVIVE1MIiwiaW5uZXJIVE1MIiwiY29udGVudCIsIl8iLCJhYmMiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwYWRkaW5nIiwiYXBwZW5kQ2hpbGQiLCJpbmRleCIsImkiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJfayIsIl9yaWdodEFuc3dlciIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJhZGQiLCJ6IiwiaW5kZXgyIiwiayIsInJpZ2h0QW5zd2VyIiwiY2FsYyIsImNhbGN1bGF0ZVJlc3VsdHMiLCJlbCIsInByZXZlbnREZWZhdWx0IiwicmlnaHRBbnN3ZXJzUXVhbnRpdHkiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hlY2tlZEFuc3dlcnMiLCJ1c2Vyc1JpZ2h0QW5zd2VycyIsImNvbmNsdXNpdmVSZXN1bHQiLCJjb25zb2xlIiwibG9nIiwicm91bmQiLCJyb3VuZGVyIiwidmFsIiwiTWF0aCIsIndpbmRvdyIsInNjcm9sbFRvIiwiYmFja2dyb3VuZCIsInpJbmRleCIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwib3ZlcmZsb3ciLCJ0b3AiLCJ0ZXh0QWxpZ24iLCJsZWZ0IiwicG9zaXRpb24iLCJiZWZvcmUiLCJkaXNwbGF5IiwidmVydGljYWxBbGlnbiIsIm1vZGFsIiwiYm9yZGVyUmFkaXVzIiwiYm9yZGVyIiwiaGVhZCIsInJlc3VsdDEiLCJyZXN1bHQyIiwicmVzdWx0MyIsInJlc3VsdDQiLCJyZWZyZXNoIiwidHlw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R0FBdkMsRUFsRitCLENBa0ZjO0FBQzdDO0FBcEZVLEtBQVg7O0FBdUZBLFFBQUlHLGVBQWV0RixTQUFTaUIsY0FBVCxDQUF3QixRQUF4QixDQUFuQjtBQUNBcUUsaUJBQWFyRixnQkFBYixDQUE4QixPQUE5QixFQUF1Q3VDLEtBQUtDLGdCQUE1QyxFQXhMc0QsQ0F3TFM7QUFDbEUsQ0F6TEQiLCJmaWxlIjoic2NyaXB0Lm1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICBsZXQgYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgXG4gICAgbGV0IHF1ZXN0aW9ucyA9IHt9OyAvLyDQntCx0YrRj9Cy0LvRj9C10Lwg0L7QsdGK0LXQutGCLCDQutC+0YLQvtGA0YvQuSDQsdGD0LTQtdGCINGB0L7QtNC10YDQttCw0YLRjCDQstC+0L/RgNC+0YHRiyDQuCDQstCw0YDQuNCw0L3RgtGLINC+0YLQstC10YLQvtCyLlxuICAgICAgICBxdWVzdGlvbnMgPSB7IC8vINCX0LDQv9C+0LvQvdGP0LXQvCDQvtCx0YrQtdC60YIg0LLQvtC/0YDQvtGB0LDQvNC4INC4INC+0YLQstC10YLQsNC80LhcbiAgICAgICAgICAgIDA6IHtcbiAgICAgICAgICAgICAgICAndGl0bGUnOiAnV2hhdCBpcyBIVE1MPycsXG4gICAgICAgICAgICAgICAgJ2Fuc3dlcnMnOiBbXG4gICAgICAgICAgICAgICAgICAgICdIeXBlcnRleHQgTWFya3VwIExhbmd1YWdlJyxcbiAgICAgICAgICAgICAgICAgICAgJ09iamVjdGl2ZSBQcm9ncmFtbWluZyBMYW5ndWFnZScsXG4gICAgICAgICAgICAgICAgICAgICdIb3cgVG8gTWFrZSBMYW5kaW5ncGFnZSdcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdjaGVjayc6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxOiB7XG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogJ1doYXQgaXMgQ1NTPycsXG4gICAgICAgICAgICAgICAgJ2Fuc3dlcnMnOiBbXG4gICAgICAgICAgICAgICAgICAgICdDZW5zb3IgU29sZCBTb2xhciBTeXN0ZW0nLFxuICAgICAgICAgICAgICAgICAgICAnQ2VudHJhbCBTdWdhciBTdGF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgJ0Nhc2NhZGluZyBTdHlsZSBTaGVldHMnXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnY2hlY2snOiAyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMjoge1xuICAgICAgICAgICAgICAgICd0aXRsZSc6ICdXaGF0IGlzIEphdmFTY3JpcHQ/JyxcbiAgICAgICAgICAgICAgICAnYW5zd2Vycyc6IFtcbiAgICAgICAgICAgICAgICAgICAgJ0FuYWxvZyBvZiBKYXZhIHdpdGggbW9yZSBmdW5jdGlvbnMnLFxuICAgICAgICAgICAgICAgICAgICAnSGlnaC1sZXZlbCBpbnRlcnByZXRlZCBwcm9ncmFtbWluZyBsYW5ndWFnZScsXG4gICAgICAgICAgICAgICAgICAgICdMYW5ndWFnZSBvZiBKYXZhcyBpbiBTdGFyIFdhcnMnXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnY2hlY2snOiAxXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMzoge1xuICAgICAgICAgICAgICAgICd0aXRsZSc6ICdTZWxlY3QgdGhlIENNUycsXG4gICAgICAgICAgICAgICAgJ2Fuc3dlcnMnOiBbXG4gICAgICAgICAgICAgICAgICAgICdXb3JkcHJlc3MnLFxuICAgICAgICAgICAgICAgICAgICAnUHVyZScsXG4gICAgICAgICAgICAgICAgICAgICdKb29tbGEnLFxuICAgICAgICAgICAgICAgICAgICAnQm9vdHN0cmFwJ1xuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ2NoZWNrJzogW1xuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAyXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBxdWVzdGlvbnM7ICAgICBcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIFxuICAgIFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdxdWVzdGlvbnNBbnN3ZXJzJywgSlNPTi5zdHJpbmdpZnkocXVlc3Rpb25zKSk7IC8vINCX0LDQv9C40YHRi9Cy0LDQtdC8INCy0L7Qv9GA0L7RgdGLINC4INC+0YLQstC10YLRiyDQsiBsb2NhbFN0b3JhZ2Ug0LIg0LrQsNGH0LXRgdGC0LLQtSDRgdGC0YDQvtC60LguXG5cbiAgICBsZXQgcXVlc3Rpb25zQmxvY2sgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncXVlc3Rpb25zQW5zd2VycycpOyAvLyDQodGH0LjRgtGL0LLQsNC10Lwg0LLQvtC/0YDQvtGB0Ysg0Lgg0L7RgtCy0LXRgtGLINC40LcgbG9jYWxTdG9yYWdlINGB0YLRgNC+0LrQvtC5LCDQt9Cw0L/QuNGB0YvQstCw0LXQvCDQtNCw0L3QvdGL0LUg0LIg0L/QtdGA0LXQvNC10L3QvdGD0Y4uICAgICAgIFxuXG4gICAgcXVlc3Rpb25zQmxvY2sgPSBKU09OLnBhcnNlKHF1ZXN0aW9uc0Jsb2NrKTsgLy8g0KLRgNCw0L3RgdGE0L7RgNC80LjRgNGD0LXQvCDRgdGC0YDQvtC60YMg0YEg0LLQvtC/0YDQvtGB0LDQvNC4INC4INC+0LHRitC10LrRgtCw0LzQuCDQvdCw0LfQsNC0INCyINC+0LHRitC10LrRgi5cblxuICAgIGxldCB3cmFwcGVyID0ge307IC8vINCh0L7Qt9C00LDQtNC40Lwg0L7QsdGK0LXQutGCINC00LvRjyDRg9C00L7QsdC90L7Qs9C+INC00L7RgdGC0YPQv9CwINC6INGN0LvQtdC80LXQvdGC0LAg0L7QsdGK0LXQutGC0LAgcXVlc3Rpb25zQmxvY2sg0LjQtyBzY3JpcHQnYSDQsiBIVE1MINC/0YDQuCDQuNGB0L/QvtC70YzQt9C+0LLQsNC90LjQuCDRiNCw0LHQu9C+0L3QsFxuICAgIFxuICAgIHdyYXBwZXIgPSB7XG4gICAgICAgIG5hbWU6IHF1ZXN0aW9uc0Jsb2NrXG4gICAgfTtcbiAgICBcbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVtcGxhdGUnKTsgLy8g0J7QsdGK0Y/QstC70Y/QtdC8INC/0LXRgNC10LzQtdC90L3Rg9GOLCDQutC+0YLQvtGA0L7QuSDQv9GA0LjRgdCy0LDQuNCy0LDQtdC8INGN0LvQtdC80LXQvdGCIERPTSDQsiDQutC+0YLQvtGA0YvQuSDQsdGD0LTQtdGCINCy0YHRgtGA0L7QtdC9INGI0LDQsdC70L7QvS5cbiAgICBsZXQgdGVtcGxhdGVIVE1MID0gdGVtcGxhdGUuaW5uZXJIVE1MOyAvLyDQntCx0YrRj9Cy0LvRj9C10Lwg0Lgg0L/RgNC40YHQstCw0LjQstCw0LXQvCDQv9C10YDQtdC80LXQvdC90L7QuSBIVE1MLdC60L7QtCwg0YHQvtC00LXRgNC20LDRidC40LnRgdGPINCyINGN0LvQtdC80LXQvdGC0LUgPHNjcmlwdD4sINCyINC60L7RgtC+0YDRi9C5INCx0YPQtNC10YIg0LLRgdGC0YDQvtC10L0g0YjQsNCx0LvQvtC9LlxuICAgIGxldCBjb250ZW50ID0gXy50ZW1wbGF0ZSh0ZW1wbGF0ZUhUTUwpOyAvLyDQntCx0YrRj9Cy0LvRj9C10Lwg0L/QtdGA0LXQvNC10L3QvdGD0Y4sINC60L7RgtC+0YDQvtC5INC/0YDQuNGB0LLQsNC40LLQsNC10Lwg0YTRg9C90LrRhtC40Y4gXCJfdGVtcGxhdGVcIiDRiNCw0LHQu9C+0L3QuNC30LDRgtC+0YDQsCBMb2Rhc2guINCSINC60LDRh9C10YHRgtCy0LUg0L/QsNGA0LDQvNC10YLRgNCwINGE0YPQvdC60YbQuNC4INCy0YvRgdGC0YPQv9Cw0LXRgiBIVE1MLdC60L7QtCwg0YHQvtC00LXRgNC20LDRidC40LnRgdGPINCyINGN0LvQtdC80LXQvdGC0LUgPHNjcmlwdD4sINCyINC60L7RgtC+0YDRi9C5INCx0YPQtNC10YIg0LLRgdGC0YDQvtC10L0g0YjQsNCx0LvQvtC9LiBcbiAgICBcbiAgICBsZXQgYWJjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYWJjLnN0eWxlLnBhZGRpbmcgPSAxMDtcbiAgICBhYmMuaW5uZXJIVE1MID0gY29udGVudCh3cmFwcGVyKTtcbiAgICBib2R5LmFwcGVuZENoaWxkKGFiYyk7IC8vINCS0YHRgtCw0LLQu9GP0LXQvCDRiNCw0LHQu9C+0L0g0L3QsCDRgdGC0YDQsNC90LjRhtGDLiAgIFxuXG4gICAgXG4gICAgLy/QntCx0YrRj9Cy0LvRj9C10Lwg0L/RgNCw0LLQuNC70YzQvdGL0LUg0L7RgtCy0LXRgtGLLCDQvdCwINGB0YLRgNCw0L3QuNGG0LUg0LHRg9C00YPRgiDQstGL0LTQtdC70LXQvdGLINC30LXQu9C10L3Ri9C8INGG0LLQtdGC0L7QvC5cbiAgICBcbiAgICBmb3IgKGxldCBpbmRleCBpbiBxdWVzdGlvbnNCbG9jaykge1xuICAgICAgICBsZXQgaSA9ICtpbmRleDtcbiAgICAgICAgaWYgKHF1ZXN0aW9uc0Jsb2NrW2ldWydjaGVjayddLmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgX2sgPSBxdWVzdGlvbnNCbG9ja1tpXVsnY2hlY2snXSArIDE7IC8vINCe0LHRitGP0LLQu9GP0LXQvCDQv9C10YDQtdC80LXQvdC90YPRjiDQutC+0YLQvtGA0L7QuSDQv9GA0LjRgdCy0LDQuNCy0LDQtdC8INC/0L7RgNGP0LTQutC+0LLRi9C5INC90L7QvNC10YAg0YEg0L/RgNCw0LLQuNC70YzQvdGL0Lwg0L7RgtCy0LXRgtC+0LwsINC60L7RgtC+0YDRi9C5INC90LDRhdC+0LTQuNGC0YHRjyDQsiAnY2hlY2snXG4gICAgICAgICAgICBsZXQgX3JpZ2h0QW5zd2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1ZXN0aW9uX2Jsb2NrXycgKyAoaSArIDEpICsgJ18nICsgX2sgKyAnJyk7IC8vINCe0LHRitGP0LLQu9GP0LXQvCDQv9C10YDQtdC80LXQvdC90YPRjiwg0LrQvtGC0L7RgNC+0Lkg0L/RgNC40YHQstC40LLQsNC10LwgaW5wdXQg0YHQvtC+0YLQstC10YLRgdGC0LLRg9GO0YnQuNC5INC/0YDQsNCy0LjQu9GM0L3QvtC80YMg0L7RgtCy0LXRgtGDIFxuICAgICAgICAgICAgX3JpZ2h0QW5zd2VyLmNsYXNzTGlzdC5hZGQoXCJyaWdodF9hbnN3ZXJcIik7IC8vINCU0L7QsdCw0LLQu9GP0LXQvCDQutC70LDRgdGBICdyaWdodF9hbnN3ZXInIGlucHV0INC60L7RgtC+0YDRi9C5INGB0L7QvtGC0LLQtdGC0YHRgtCy0YPQtdGCINC/0YDQsNCy0LjQu9GM0L3QvtC80YMg0L7RgtCy0LXRgtGDXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgeiA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleDIgb2YgcXVlc3Rpb25zQmxvY2tbaV1bJ2NoZWNrJ10pIHtcbiAgICAgICAgICAgICAgICBsZXQgeiA9ICtpbmRleDI7XG4gICAgICAgICAgICAgICAgbGV0IGsgPSB6ICsgMTsgLy8g0J7QsdGK0Y/QstC70Y/QtdC8INC/0LXRgNC10LzQtdC90L3Rg9GOINC60L7RgtC+0YDQvtC5INC/0YDQuNGB0LLQsNC40LLQsNC10Lwg0L/QvtGA0Y/QtNC60L7QstGL0Lkg0L3QvtC80LXRgCDRgSDQv9GA0LDQstC40LvRjNC90YvQvCDQvtGC0LLQtdGC0L7QvCwg0LrQvtGC0L7RgNGL0Lkg0L3QsNGF0L7QtNC40YLRgdGPINCyICdjaGVjaydcbiAgICAgICAgICAgICAgICBsZXQgcmlnaHRBbnN3ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVlc3Rpb25fYmxvY2tfJyArIChpICsgMSkgKyAnXycgKyBrICsgJycpOyAvLyDQntCx0YrRj9Cy0LvRj9C10Lwg0L/QtdGA0LXQvNC10L3QvdGD0Y4sINC60L7RgtC+0YDQvtC5INC/0YDQuNGB0LLQuNCy0LDQtdC8IGlucHV0INGB0L7QvtGC0LLQtdGC0YHRgtCy0YPRjtGJ0LjQuSDQv9GA0LDQstC40LvRjNC90L7QvNGDINC+0YLQstC10YLRgyBcbiAgICAgICAgICAgICAgICByaWdodEFuc3dlci5jbGFzc0xpc3QuYWRkKFwicmlnaHRfYW5zd2VyXCIpOyAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LrQu9Cw0YHRgSAncmlnaHRfYW5zd2VyJyBpbnB1dCDQutC+0YLQvtGA0YvQuSDRgdC+0L7RgtCy0LXRgtGB0YLQstGD0LXRgiDQv9GA0LDQstC40LvRjNC90L7QvNGDINC+0YLQstC10YLRg1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG4gICAgXG4gICAgbGV0IGNhbGMgPSB7XG4gICAgY2FsY3VsYXRlUmVzdWx0czogZnVuY3Rpb24gKGVsKSB7IC8vINCe0LHRitGP0LLQu9GP0LXQvCDRhNGD0L3QutGG0LjRjiDQutC+0YLQvtGA0LDRjyDQsdGD0LTQtdGCINGA0LDRgdGB0YfQuNGC0YvQstCw0YLRjCDQutC+0LvQuNGH0LXRgdGC0LLQviDQv9GA0LDQstC40LvRjNC90YvRhSDQvtGC0LLQtdGC0L7QsiDQuCDQstGL0LLQvtC00LjRgtGMINC80L7QtNCw0LvRjNC90L7QtSDQvtC60L3QviDRgSDRgNC10LfRg9C70YzRgtCw0YLQvtC8LlxuICAgIGVsLnByZXZlbnREZWZhdWx0KCk7IC8vINCf0YDQtdC00L7RgtCy0YDQsNGJ0LDQtdC8INCy0YvQv9C+0LvQvdC10L3QuNC1INGE0YPQvdC60YbQuNC4INC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOLlxuICAgIGxldCByaWdodEFuc3dlcnNRdWFudGl0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yaWdodF9hbnN3ZXInKTsgLy8g0J7QsdGK0Y/QstC70Y/QtdC8INC/0LXRgNC10LzQtdC90L3Rg9GOINCyINC60L7RgtC+0YDRg9GOINC30LDQv9C40YHRi9Cy0LDQtdC8INCy0YHQtSDQvtGC0LLQtdGC0Ysg0YEg0LrQu9Cw0YHRgdC+0LwgJ3JpZ2h0X2Fuc3dlcidcbiAgICByaWdodEFuc3dlcnNRdWFudGl0eSA9IHJpZ2h0QW5zd2Vyc1F1YW50aXR5Lmxlbmd0aDsgLy8g0J/RgNC40YHQstCw0LjQstCw0LXQvCDQtNC70LjQvdGDINC80LDRgdGB0LjQstCwLCDRgdC+0LTQtdGA0LbQsNGJ0LXQs9C+INGN0LvQtdC80LXQvdGC0YsgJ3JpZ2h0X2Fuc3dlcicg0L/QtdGA0LXQvNC10L3QvdC+0LkuXG4gICAgbGV0IGNoZWNrZWRBbnN3ZXJzICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJzpjaGVja2VkJyk7IC8vINCe0LHRitGP0LLQu9GP0LXQvCDQv9C10YDQtdC80LXQvdC90YPRjiwg0LrQvtGC0L7RgNCw0Y8g0LHRg9C00LXRgiDRgdC+0LTQtdGA0LbQsNGC0Ywg0LLRgdC1INC+0YLQvNC10YfQtdC90L3Ri9C1INC+0YLQstC10YLRi1xuICAgIGNoZWNrZWRBbnN3ZXJzID0gY2hlY2tlZEFuc3dlcnMubGVuZ3RoOyAvLyDQodGH0LjRgtCw0LXQvCDQutC+0LvQuNGH0LXRgdGC0LLQviDQvtGC0LzQtdGH0LXQvdC90YvRhSDQvtGC0LLQtdGC0L7QslxuICAgIGxldCB1c2Vyc1JpZ2h0QW5zd2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yaWdodF9hbnN3ZXInICsgJzpjaGVja2VkJyk7IC8vINCe0LHRitGP0LLQu9GP0LXQvCDQv9C10YDQvNC10L3QvdGD0Y4sINC60L7RgtC+0YDQsNGPINCx0YPQtNC10YIg0YHQvtC00LXRgNC20LDRgtGMINC80LDRgdGB0LjQsiDRgSDQvtGC0LzQtdGH0LXQvdC90YvQvNC4IGlucHV0INGBINC60LvQsNGB0YHQvtC8ICdyaWdodF9hbnN3ZXInXG4gICAgdXNlcnNSaWdodEFuc3dlcnMgPSB1c2Vyc1JpZ2h0QW5zd2Vycy5sZW5ndGg7IC8vINCh0YfQuNGC0LDQtdC8INC60L7Qu9C40YfQtdGB0YLQstC+INCy0LXRgNC90L4g0L7RgtC80LXRh9C10L3QvdGL0YUg0L7RgtCy0LXRgtC+0LJcbiAgICBsZXQgY29uY2x1c2l2ZVJlc3VsdCA9ICh1c2Vyc1JpZ2h0QW5zd2VycyAtIChjaGVja2VkQW5zd2VycyAtIHVzZXJzUmlnaHRBbnN3ZXJzKSkgLyByaWdodEFuc3dlcnNRdWFudGl0eSAqIDEwMDsgLy8g0KDQsNGB0YHRh9C40YLRi9Cy0LDQtdC8INGA0LXQt9GD0LvRjNGC0LDRglxuICAgIGNvbnNvbGUubG9nKCdiZWZvcmUnLCBjb25jbHVzaXZlUmVzdWx0KTsgICAgXG4gICAgdmFyIHJvdW5kID0ge1xuICAgICAgICAgICAgcm91bmRlcjogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbCoxMDApLzEwMFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gcm91bmQ7ICAgICBcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIGNvbmNsdXNpdmVSZXN1bHQgPSByb3VuZC5yb3VuZGVyKGNvbmNsdXNpdmVSZXN1bHQpO1xuICAgIGNvbnNvbGUubG9nKCdhZnRlcicsIGNvbmNsdXNpdmVSZXN1bHQpOyBcbiAgICBpZiAoY29uY2x1c2l2ZVJlc3VsdCA+IDApIHtcbiAgICAgICAgY29uY2x1c2l2ZVJlc3VsdCA9IGNvbmNsdXNpdmVSZXN1bHQgKyBcIiVcIiAgICBcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25jbHVzaXZlUmVzdWx0ID0gMCArIFwiJVwiIFxuICAgIH07XG4gICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgbGV0IGJhY2tncm91bmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgLy8g0KHQvtC30LTQsNC10LwgYmFja2dyb3VuZCDQtNC70Y8g0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LAsINGH0YLQvtCx0Ysg0L3QtSDQtNC+0L/Rg9GB0YLQuNGC0Ywg0L3QsNC20LDRgtC40Y8g0L3QsCDRjdC70LXQvNC10L3RgtGLIGJvZHkuXG4gICAgIGJhY2tncm91bmQuc3R5bGUuekluZGV4ID0gXCIyXCI7XG4gICAgIGJhY2tncm91bmQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgYmFja2dyb3VuZC5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcbiAgICAgYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJnYmEoMTkyLDE5MiwxOTIsMC4zKVwiO1xuICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgICAgYmFja2dyb3VuZC5zdHlsZS50b3AgPSBcIjBcIjtcbiAgICAgYmFja2dyb3VuZC5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgICBiYWNrZ3JvdW5kLnN0eWxlLmxlZnQgPSBcIjBcIjtcbiAgICAgYmFja2dyb3VuZC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgYm9keS5hcHBlbmRDaGlsZChiYWNrZ3JvdW5kKTsgLy8g0JTQvtCx0LDQstC70Y/QtdC8IGJhY2tncm91bmRcbiAgICAgbGV0IGJlZm9yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyAvLyDQodC+0LfQtNCw0LXQvCDRjdC70LXQvNC10L3RgiDQtNC70Y8g0LLRi9GA0LDQstC90LjQstCw0L3QuNGPINC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwINC/0L4g0LLRi9GB0L7RgtC1INC4INGI0LjRgNC40L3QtSDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YDQsNC30LzQtdGA0LAgYm9keVxuICAgICBiZWZvcmUuc3R5bGUuY29udGVudCA9IFwiXCI7XG4gICAgIGJlZm9yZS5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcbiAgICAgYmVmb3JlLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xuICAgICBiZWZvcmUuc3R5bGUudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XG4gICAgIGJhY2tncm91bmQuYXBwZW5kQ2hpbGQoYmVmb3JlKTsgLy8g0JTQvtCx0LDQstC70Y/QtdC8IGJlZm9yZVxuICAgICBsZXQgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgLy8g0KHQvtC30LTQsNC10Lwg0LzQvtC00LDQu9GM0L3QvtC1INC+0LrQvdC+XG4gICAgIG1vZGFsLnN0eWxlLnpJbmRleCA9IFwiM1wiO1xuICAgICBtb2RhbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjE1cHhcIjtcbiAgICAgbW9kYWwuc3R5bGUuYm9yZGVyID0gXCI1cHggc29saWQgYmxhY2tcIjtcbiAgICAgbW9kYWwuc3R5bGUuaGVpZ2h0ID0gXCIyMDBweFwiO1xuICAgICBtb2RhbC5zdHlsZS53aWR0aCA9IFwiNDAwcHhcIjtcbiAgICAgbW9kYWwuc3R5bGUudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XG4gICAgIG1vZGFsLnN0eWxlLmJhY2tncm91bmQgPSBcIndoaXRlXCI7XG4gICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuICAgICBiYWNrZ3JvdW5kLmFwcGVuZENoaWxkKG1vZGFsKTsgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC80L7QtNCw0LvRjNC90L7QtSDQvtC60L3QvlxuICAgICBsZXQgaGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2g0Jyk7XG4gICAgIGhlYWQuaW5uZXJIVE1MID0gJ9CS0LDRiCDRgNC10LfRg9C70YzRgtCw0YInO1xuICAgICBtb2RhbC5hcHBlbmRDaGlsZChoZWFkKTtcbiAgICAgbGV0IHJlc3VsdDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgIHJlc3VsdDEuaW5uZXJIVE1MID0gJ9CS0Ysg0L7RgtC80LXRgtC40LvQuCDQvtGC0LLQtdGC0L7QsjogJyArIGNoZWNrZWRBbnN3ZXJzO1xuICAgICBtb2RhbC5hcHBlbmRDaGlsZChyZXN1bHQxKTtcbiAgICAgbGV0IHJlc3VsdDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgIHJlc3VsdDIuaW5uZXJIVE1MID0gJ9CSINGC0L7QvCDRh9C40YHQu9C1INC+0YLQvNC10YLQuNC70Lgg0LLQtdGA0L3QvjogJyArIHVzZXJzUmlnaHRBbnN3ZXJzO1xuICAgICBtb2RhbC5hcHBlbmRDaGlsZChyZXN1bHQyKTtcbiAgICAgbGV0IHJlc3VsdDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgIHJlc3VsdDMuaW5uZXJIVE1MID0gJ9CSINGC0LXRgdGC0LUg0LHRi9C70L4g0L/RgNCw0LLQuNC70YzQvdGL0YUg0L7RgtCy0LXRgtC+0LI6ICcgKyByaWdodEFuc3dlcnNRdWFudGl0eTtcbiAgICAgbW9kYWwuYXBwZW5kQ2hpbGQocmVzdWx0Myk7XG4gICAgIGxldCByZXN1bHQ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDQnKTtcbiAgICAgcmVzdWx0NC5pbm5lckhUTUwgPSAn0JLQsNGIINGA0LXQt9GD0LvRjNGC0LDRgjogJyArIGNvbmNsdXNpdmVSZXN1bHQ7XG4gICAgIG1vZGFsLmFwcGVuZENoaWxkKHJlc3VsdDQpO1xuICAgICBsZXQgcmVmcmVzaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7IC8vINCh0L7Qt9C00LDQtdC8INC60L3QvtC/0LrRgyDQvtCx0L3QvtCy0LvQtdC90LjRjyDRgdGC0YDQsNC90LjRhtGLINC4INGB0LHRgNC+0YHQsCDRgNC10LfRg9C70YzRgtCw0YLQsFxuICAgICByZWZyZXNoLnR5cGUgPSAoJ2J1dHRvbicpO1xuICAgICByZWZyZXNoLmlkID0gKCdyZWxvYWQnKTtcbiAgICAgcmVmcmVzaC52YWx1ZSA9ICgn0J/QvtC/0YDQvtCx0L7QstCw0YLRjCDRgdC90L7QstCwJylcbiAgICAgbW9kYWwuYXBwZW5kQ2hpbGQocmVmcmVzaCk7XG4gICAgIGxldCBjYWxjMiA9IHtcbiAgICAgICAgIHJlbDogZnVuY3Rpb24gKGVsKSB7IC8vINCk0YPQvdC60YbQuNGPINC+0LHQvdC+0LLQu9C10L3QuNGPINGB0YLRgNCw0L3QuNGG0YtcbiAgICAgICAgICAgIGVsLnByZXZlbnREZWZhdWx0KCk7IC8vINCf0YDQtdC00L7RgtCy0YDQsNGJ0LDQtdC8INCy0YvQv9C+0LvQvdC10L3QuNC1INGE0YPQvdC60YbQuNC4INC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOLlxuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICByZXR1cm4gJ0V2ZXJ5dGhpbmcgaXMgZmluZSc7XG4gICAgICAgIH1cbiAgICAgfTtcbiAgICAgbGV0IHJlbG9hZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWxvYWQnKTtcbiAgICAgcmVsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2FsYzIucmVsKTsgLy8g0JTQvtCx0LDQstC70Y/QtdC8INGE0YPQvdC60YbQuNGOINC+0LHQvdC+0LLQu9C10L3QuNGPINC60L3QvtC/0LrQtSByZWZyZXNoXG4gICAgfVxufTtcbiAgICBcbiAgICBsZXQgY2hlY2tSZXN1bHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dHRvbicpO1xuICAgIGNoZWNrUmVzdWx0cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbGMuY2FsY3VsYXRlUmVzdWx0cyk7IC8vINCU0L7QsdCw0LLQu9GP0LXQvCDRhNGD0L3QutGG0LjRjiDRgNCw0YHRgdGH0LXRgtCwINGA0LXQt9GD0LvRjNGC0LDRgtCwINC4INCy0YvQstC+0LTQsCDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsCDQutC90L7Qv9C60LUgXCLQn9GA0L7QstC10YDQuNGC0Ywg0LzQvtC5INGA0LXQt9GD0LvRjNGC0LDRglwiXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
