"use strict";document.addEventListener("DOMContentLoaded",function(){function e(){var e=document.querySelectorAll(".carousels__item--slides"),t=0-e[0].offsetWidth/3,n=2*t;e[1].style.left=t+"px",e[2].style.left=n+"px"}function t(e){var t=e.parentNode,n=(t.offsetWidth,t.querySelector(".carousels__item--slides"));n.offsetWidth,parseInt(getComputedStyle(n).left);e.addEventListener("mouseover",o),e.addEventListener("mouseout",r),e.addEventListener("click",i)}function n(e){var t=e.parentNode,n=(t.offsetWidth,t.querySelector(".carousels__item--slides"));n.offsetWidth,parseInt(getComputedStyle(n).left);e.addEventListener("mouseover",o),e.addEventListener("mouseout",r),e.addEventListener("click",s)}function o(){this.style.opacity=1,this.style.cursor="pointer"}function r(){this.style.opacity=.5,this.style.cursor="default"}function i(){var e=this.parentNode,t=e.offsetWidth,n=e.querySelector(".carousels__item--slides"),o=n.offsetWidth,r=parseInt(getComputedStyle(n).left);o+r-t==0&&(r=t),r-=t,n.style.left=r+"px"}function s(){var e=this.parentNode,t=e.offsetWidth,n=e.querySelector(".carousels__item--slides"),o=n.offsetWidth,r=parseInt(getComputedStyle(n).left);0==r&&(r=-o),r+=t,n.style.left=r+"px"}window.onresize=e,e();for(var a=document.querySelectorAll(".next"),l=document.querySelectorAll(".prev"),c=0;c<a.length;++c)t(a[c]);for(var c=0;c<l.length;++c)n(l[c])}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,o;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),o=0;o<i;){var s;o in r&&(s=r[o],e.call(n,s,o,r)),o++}}),document.addEventListener("DOMContentLoaded",function(){function e(e,t,n){t=400,n=24;var o=n,r=t,i=r/o;e.preventDefault();var s=a.offsetHeight,d=c.offsetHeight;if(0==s){a.style.height=s+"px",a.classList.remove("non-visible");var u=setInterval(function(){if(i>0){var e=d/(r/o);s+=e,a.style.height=s+"px",i-=1}else clearInterval(u),l.innerHTML="Hide partners"},r/o)}else var u=setInterval(function(){if(i>0){var e=d/(r/o);s-=e,a.style.height=s+"px",i-=1}else clearInterval(u),a.classList.add("non-visible"),l.innerHTML="See other partners"},r/o)}function t(){var e=document.querySelectorAll(".masonry__item");if(e.length>6){var t=document.querySelector(".masonry__item");t.remove()}}function n(){var e=document.querySelector(".mosaic"),t=document.createElement("div");u=t,t.className="text__container masonry__item",e.appendChild(t);var n=document.createElement("div");n.className="inner__text",n.innerHTML=d,t.appendChild(n),r()}function o(){var e=document.querySelector(".mosaic");new Masonry(e,{itemSelector:".masonry__item",columnWidth:5,isAnimated:!0,animationOptions:{queue:!1,duration:500}})}function r(){var e="https://www.googleapis.com/customsearch/v1?q="+d+"&cx=016732624816471061428:3gt2rcxo7lk&imgSize=medium&fileType=jpg&num=1&searchType=image&imgDominantColor=pink&key=AIzaSyBncOk0OKD0p7SEqpnCnj68lZAl0zqxxvo",t=new XMLHttpRequest;t.open("GET",e,!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState)if(200!=t.status)console.log("Изображение по данному запросу не получено "+t.status+": "+t.statusText);else{var e=JSON.parse(t.responseText),n=e.items[0].link,r=e.items[0].image.width,i=e.items[0].image.height,s=r/i;if(s>2)var a=440;else var a=310*s;u.style.backgroundImage="url("+n+")",u.style.width=a+"px",u.style.backgroundSize="auto 310px",o()}}}function i(){function e(e,t){var n="jsonp_callback_"+Math.round(1e5*Math.random());window[n]=function(e){delete window[n],document.body.removeChild(o),t(e)};var o=document.createElement("script");o.src=e+(e.indexOf("?")>=0?"&":"?")+"callback="+n,document.body.appendChild(o)}e("http://randomword.setgetgo.com/get.php",function(e){d=e.Word,t(),n(),o()})}function s(e){e.preventDefault(),d=document.querySelector(".search__input").value,0==d?i():(t(),n(),o())}var a=document.querySelector(".hidden-list"),l=document.querySelector(".partners__link"),c=document.querySelector(".etalon");l.addEventListener("click",e);var d,u,f=0,m=setTimeout(function e(){i(),f++,f<5?m=setTimeout(e,2e3):clearTimeout},2e3),p=document.querySelector(".search__btn");p.addEventListener("click",s)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic2hpZnQiLCJzbGlkZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsInNsaWRlclNoaWZ0Iiwib2Zmc2V0V2lkdGgiLCJzbGlkZXJTaGlmdERvdWJsZSIsImNhbGN1bGF0ZU5leHQiLCJpdGVtIiwicGFyZW50IiwicGFyZW50Tm9kZSIsInRhcGUiLCJxdWVyeVNlbGVjdG9yIiwicGFyc2VJbnQiLCJnZXRDb21wdXRlZFN0eWxlIiwibGVmdCIsImhvdmVyIiwibm9Ib3ZlciIsInNsaWRlUmlnaHQiLCJ2aXNpYmxlUGFydCIsIndob2xlVGFwZSIsInNsaWRlTGVmdCIsInRoaXMiLCJzdHlsZSIsIm9wYWNpdHkiLCJBcnJheSIsInByb3RvdHlwZSIsImZvckVhY2giLCJ3aW5kb3ciLCJvbnJlc2l6ZSIsIm5leHRBcnIiLCJwcmV2QXJyIiwiaSIsImxlbmd0aCIsImNhbGN1bGF0ZVByZXYiLCJjYWxsYmFjayIsInRoaXNBcmciLCJUIiwiayIsIlR5cGVFcnJvciIsIk8iLCJPYmplY3QiLCJsZW4iLCJhcmd1bWVudHMiLCJrVmFsdWUiLCJjYWxsIiwiaGVpZ2h0IiwiaGlkZGVuRnJpZW5kcyIsIm9mZnNldEhlaWdodCIsInQiLCJldGFsb25IZWlnaHQiLCJmIiwic3RlcHMiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiZWwiLCJwcmV2ZW50RGVmYXVsdCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImNsZWFySW50ZXJ2YWwiLCJzaG93QnV0dG9uIiwic3RlcCIsInRpbWUiLCJmcHMiLCJpbm5lckhUTUwiLCJhZGQiLCJhZGRCbG9jayIsIm1vc2FpYyIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJjdXJyZW50RGl2IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJpbWFnZSIsIm1hc29ucnkiLCJlbGVtIiwiZGl2VGV4dCIsIm1zbnJ5IiwiTWFzb25yeSIsInRleHRWYWx1ZSIsIml0ZW1TZWxlY3RvciIsImNvbHVtbldpZHRoIiwiZHVyYXRpb24iLCJpc0FuaW1hdGVkIiwidXJsUXVlcnkiLCJxdWV1ZSIsInhtbFJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJkYXRhIiwiSlNPTiIsInNlbmQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJpdGVtcyIsImltYWdlV2lkdGgiLCJyYXRpbyIsIndpZHRoIiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmRTaXplIiwiaW1hZ2VMaW5rIiwiUmFuZG9tV29yZCIsImpzb25wIiwidXJsIiwiV29yZCIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsInJlbW92ZUJMb2NrIiwic2NyaXB0Iiwic3JjIiwiaW5kZXhPZiIsImNhbGxiYWNrTmFtZSIsImJvZHkiLCJhZGRFbGVtZW50IiwiZXZlbnQiLCJ2YWx1ZSIsImV0YWxvbiIsInNob3dIaWRlQmxvY2siLCJ0aW1lcklkIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInRpY2siLCJibG9ja3MiLCJidXR0b24iXSwibWFwcGluZ3MiOiJZQUFBQSxVQUFTQyxpQkFBaUIsbUJBQW9CLFdBRTFDLFFBQUFDLEtBR0ksR0FBSUMsR0FBVUgsU0FBU0ksaUJBQWlCLDRCQUQ1Q0MsRUFBa0IsRUFBQUYsRUFBQSxHQUFBRyxZQUFBLEVBQ1ZILEVBQW1CQyxFQUFBQSxDQUN2QkQsR0FBSUUsR0FBQUEsTUFBQUEsS0FBa0JGLEVBQVdHLEtBQ2pDSCxFQUFJSSxHQUFBQSxNQUFBQSxLQUFvQkYsRUFBeEIsS0F3QkosUUFBU0csR0FBZUMsR0FDcEIsR0FBSUMsR0FBU0QsRUFBS0UsV0FFZEMsR0FEY0YsRUFBT0osWUFDZEksRUFBT0csY0FBYyw0QkFDaEJELEdBQUtOLFlBQ1ZRLFNBQVNDLGlCQUFpQkgsR0FBTUksS0FJdkNQLEdBQUtSLGlCQUFpQixZQUFhZ0IsR0FDbkNSLEVBQUtSLGlC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SUFDQUEsRUFBU2lGLEVBQ0xXLEVBQUlJLFdBQVNqSSxFQUFTSSxLQUVsQjBILGNBRUgsS0FvSUFJLEVBQUFsSSxTQUFBYSxjQUFBLGVBRUpxSCxHQUFBakksaUJBQUEsUUFBQXVIIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIFxuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICBmdW5jdGlvbiBzaGlmdCAoKSB7XG4gICAgICAgIHZhciBzbGlkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcm91c2Vsc19faXRlbS0tc2xpZGVzJyk7XG4gICAgICAgIHZhciBzbGlkZXJTaGlmdCA9IDAgLSBzbGlkZXJzWzBdLm9mZnNldFdpZHRoLzM7XG4gICAgICAgIHZhciBzbGlkZXJTaGlmdERvdWJsZSA9IHNsaWRlclNoaWZ0ICogMjtcbiAgICAgICAgc2xpZGVyc1sxXS5zdHlsZS5sZWZ0ID0gc2xpZGVyU2hpZnQrJ3B4JztcbiAgICAgICAgc2xpZGVyc1syXS5zdHlsZS5sZWZ0ID0gc2xpZGVyU2hpZnREb3VibGUrJ3B4JzsgIFxuICAgIH07XG4gICAgXG4gICAgXG4gICAgd2luZG93Lm9ucmVzaXplID0gc2hpZnQ7XG4gICAgc2hpZnQoKTtcbiAgICBcbiAgICBcbiAgICB2YXIgbmV4dEFyciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uZXh0Jyk7XG4gICAgdmFyIHByZXZBcnIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJldicpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV4dEFyci5sZW5ndGg7ICsraSkge1xuICAgICAgICBjYWxjdWxhdGVOZXh0KG5leHRBcnJbaV0pO1xuICAgIH07ICAgXG4gICAgXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmV2QXJyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNhbGN1bGF0ZVByZXYocHJldkFycltpXSk7XG4gICAgfTsgICBcbiAgICBcbi8vICAgIG5leHRBcnIuZm9yRWFjaChjYWxjdWxhdGVOZXh0KTsgZm9yRWFjaCDQvdC1INGA0LDQsdC+0LDQtdGCINGBINC+0LHRitC10LrRgtCw0LzQuCBOb2RlTGlzdCDQsiBJRThcbi8vICAgIHByZXZBcnIuZm9yRWFjaChjYWxjdWxhdGVQcmV2KTsgZm9yRWFjaCDQvdC1INGA0LDQsdC+0LDQtdGCINGBINC+0LHRitC10LrRgtCw0LzQuCBOb2RlTGlzdCDQsiBJRThcbiAgICAgICAgXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlTmV4dCAoaXRlbSkge1xuICAgICAgICB2YXIgcGFyZW50ID0gaXRlbS5wYXJlbnROb2RlO1xuICAgICAgICB2YXIgdmlzaWJsZVBhcnQgPSBwYXJlbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIHZhciB0YXBlID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbHNfX2l0ZW0tLXNsaWRlcycpO1xuICAgICAgICB2YXIgd2hvbGVUYXBlID0gdGFwZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIGxlZnQgPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHRhcGUpLmxlZnQpO1xuLy8gICAgICAgIGlmICh3aG9sZVRhcGUrbGVmdC12aXNpYmxlUGFydCA9PTApIHtcbiAgICAgICAgICAgIFxuLy8gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgbm9Ib3Zlcik7XG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzbGlkZVJpZ2h0KTtcbi8vICAgICAgICB9XG4gICAgICAgIFxuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlUHJldiAoaXRlbSkge1xuICAgICAgICB2YXIgcGFyZW50ID0gaXRlbS5wYXJlbnROb2RlO1xuICAgICAgICB2YXIgdmlzaWJsZVBhcnQgPSBwYXJlbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIHZhciB0YXBlID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbHNfX2l0ZW0tLXNsaWRlcycpO1xuICAgICAgICB2YXIgd2hvbGVUYXBlID0gdGFwZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIGxlZnQgPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHRhcGUpLmxlZnQpO1xuLy8gICAgICAgIGlmIChsZWZ0ID09IDApIHtcbiAgICAgICAgICAgIFxuLy8gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgbm9Ib3Zlcik7XG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzbGlkZUxlZnQpO1xuLy8gICAgICAgIH1cbiAgICAgICAgXG4gICAgfTtcbiAgICBcbiAgICBcbiAgICBmdW5jdGlvbiBob3ZlciAoKSB7XG4gICAgICAgIHRoaXMuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAgIHRoaXMuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gbm9Ib3ZlciAoKSB7XG4gICAgICAgIHRoaXMuc3R5bGUub3BhY2l0eSA9IDAuNTtcbiAgICAgICAgdGhpcy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBzbGlkZVJpZ2h0ICgpIHtcbi8vICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xuLy8gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNsaWRlUmlnaHQpO1xuLy8gICAgICAgIHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xuLy8gICAgICAgIHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBub0hvdmVyKTtcbi8vICAgICAgICB0aGlzLm5leHRFbGVtZW50U2libGluZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVMZWZ0KTtcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgICAgICAgdmFyIHZpc2libGVQYXJ0ID0gcGFyZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgdGFwZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWxzX19pdGVtLS1zbGlkZXMnKTtcbiAgICAgICAgdmFyIHdob2xlVGFwZSA9IHRhcGUub2Zmc2V0V2lkdGg7XG4gICAgICAgIHZhciBsZWZ0ID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZSh0YXBlKS5sZWZ0KTtcbiAgICAgICAgaWYgKHdob2xlVGFwZStsZWZ0LXZpc2libGVQYXJ0ID09IDApIHtcbiAgICAgICAgICAgIGxlZnQgPSB2aXNpYmxlUGFydDtcbi8vICAgICAgICAgICAgdGhpcy5zdHlsZS5vcGFjaXR5ID0gMC41O1xuLy8gICAgICAgICAgICB0aGlzLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcbiAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGhvdmVyKTtcbi8vICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgbm9Ib3Zlcik7XG4vLyAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNsaWRlUmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGxlZnQgPSBsZWZ0IC0gdmlzaWJsZVBhcnQ7XG4gICAgICAgIHRhcGUuc3R5bGUubGVmdCA9IGxlZnQrJ3B4JztcbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIHNsaWRlTGVmdCAoKSB7XG4vLyAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGhvdmVyKTtcbi8vICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzbGlkZUxlZnQpO1xuLy8gICAgICAgIHRoaXMucHJldmlvdXNFbGVtZW50U2libGluZy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGhvdmVyKTtcbi8vICAgICAgICB0aGlzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIG5vSG92ZXIpO1xuLy8gICAgICAgIHRoaXMucHJldmlvdXNFbGVtZW50U2libGluZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVSaWdodCk7XG4gICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7XG4gICAgICAgIHZhciB2aXNpYmxlUGFydCA9IHBhcmVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIHRhcGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLmNhcm91c2Vsc19faXRlbS0tc2xpZGVzJyk7XG4gICAgICAgIHZhciB3aG9sZVRhcGUgPSB0YXBlLm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgbGVmdCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUodGFwZSkubGVmdCk7XG4gICAgICAgIGlmIChsZWZ0ID09IDApIHtcbiAgICAgICAgICAgIGxlZnQgPSAtIHdob2xlVGFwZTtcbi8vICAgICAgICAgICAgdGhpcy5zdHlsZS5vcGFjaXR5ID0gMC41O1xuLy8gICAgICAgICAgICB0aGlzLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcbiAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGhvdmVyKTtcbi8vICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgbm9Ib3Zlcik7XG4vLyAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNsaWRlTGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgbGVmdCA9IGxlZnQgKyB2aXNpYmxlUGFydDtcbiAgICAgICAgdGFwZS5zdHlsZS5sZWZ0ID0gbGVmdCsncHgnO1xuICAgIH1cbiAgICBcbiAgICBcblxufSk7XG5pZiAoIUFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSB7XG5cbiAgQXJyYXkucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNBcmcpIHtcblxuICAgIHZhciBULCBrO1xuXG4gICAgaWYgKHRoaXMgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignIHRoaXMgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO1xuICAgIH1cblxuICAgIC8vIDEuINCf0L7Qu9C+0LbQuNC8IE8g0YDQsNCy0L3Ri9C8INGA0LXQt9GD0LvRjNGC0LDRgtGDINCy0YvQt9C+0LLQsCBUb09iamVjdCBwYXNzaW5nIHRoZSB8dGhpc3wgdmFsdWUgYXMgdGhlIGFyZ3VtZW50LlxuICAgIHZhciBPID0gT2JqZWN0KHRoaXMpO1xuXG4gICAgLy8gMi4g0J/QvtC70L7QttC40LwgbGVuVmFsdWUg0YDQsNCy0L3Ri9C8INGA0LXQt9GD0LvRjNGC0LDRgtGDINCy0YvQt9C+0LLQsCDQstC90YPRgtGA0LXQvdC90LXQs9C+INC80LXRgtC+0LTQsCBHZXQg0L7QsdGK0LXQutGC0LAgTyDRgSDQsNGA0LPRg9C80LXQvdGC0L7QvCBcImxlbmd0aFwiLlxuICAgIC8vIDMuINCf0L7Qu9C+0LbQuNC8IGxlbiDRgNCw0LLQvdGL0LwgVG9VaW50MzIobGVuVmFsdWUpLlxuICAgIHZhciBsZW4gPSBPLmxlbmd0aCA+Pj4gMDtcblxuICAgIC8vIDQuINCV0YHQu9C4IElzQ2FsbGFibGUoY2FsbGJhY2spINGA0LDQstC10L0gZmFsc2UsINCy0YvQutC40L3QtdC8INC40YHQutC70Y7Rh9C10L3QuNC1IFR5cGVFcnJvci5cbiAgICAvLyDQodC80L7RgtGA0LjRgtC1OiBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3g5LjExXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGNhbGxiYWNrICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgIH1cblxuICAgIC8vIDUuINCV0YHQu9C4IHRoaXNBcmcg0L/RgNC40YHRg9GC0YHRgtCy0YPQtdGCLCDQv9C+0LvQvtC20LjQvCBUINGA0LDQstC90YvQvCB0aGlzQXJnOyDQuNC90LDRh9C1INC/0L7Qu9C+0LbQuNC8IFQg0YDQsNCy0L3Ri9C8IHVuZGVmaW5lZC5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIFQgPSB0aGlzQXJnO1xuICAgIH1cblxuICAgIC8vIDYuINCf0L7Qu9C+0LbQuNC8IGsg0YDQsNCy0L3Ri9C8IDBcbiAgICBrID0gMDtcblxuICAgIC8vIDcuINCf0L7QutCwIGsgPCBsZW4sINCx0YPQtNC10Lwg0L/QvtCy0YLQvtGA0Y/RgtGMXG4gICAgd2hpbGUgKGsgPCBsZW4pIHtcblxuICAgICAgdmFyIGtWYWx1ZTtcblxuICAgICAgLy8gYS4g0J/QvtC70L7QttC40LwgUGsg0YDQsNCy0L3Ri9C8IFRvU3RyaW5nKGspLlxuICAgICAgLy8gICDQrdGC0L4g0L3QtdGP0LLQvdC+0LUg0L/RgNC10L7QsdGA0LDQt9C+0LLQsNC90LjQtSDQtNC70Y8g0LvQtdCy0L7RgdGC0L7RgNC+0L3QvdC10LPQviDQvtC/0LXRgNCw0L3QtNCwINCyINC+0L/QtdGA0LDRgtC+0YDQtSBpblxuICAgICAgLy8gYi4g0J/QvtC70L7QttC40Lwga1ByZXNlbnQg0YDQsNCy0L3Ri9C8INGA0LXQt9GD0LvRjNGC0LDRgtGDINCy0YvQt9C+0LLQsCDQstC90YPRgtGA0LXQvdC90LXQs9C+INC80LXRgtC+0LTQsCBIYXNQcm9wZXJ0eSDQvtCx0YrQtdC60YLQsCBPINGBINCw0YDQs9GD0LzQtdC90YLQvtC8IFBrLlxuICAgICAgLy8gICDQrdGC0L7RgiDRiNCw0LMg0LzQvtC20LXRgiDQsdGL0YLRjCDQvtCx0YrQtdC00LjQvdGR0L0g0YEg0YjQsNCz0L7QvCBjXG4gICAgICAvLyBjLiDQldGB0LvQuCBrUHJlc2VudCDRgNCw0LLQtdC9IHRydWUsINGC0L5cbiAgICAgIGlmIChrIGluIE8pIHtcblxuICAgICAgICAvLyBpLiDQn9C+0LvQvtC20LjQvCBrVmFsdWUg0YDQsNCy0L3Ri9C8INGA0LXQt9GD0LvRjNGC0LDRgtGDINCy0YvQt9C+0LLQsCDQstC90YPRgtGA0LXQvdC90LXQs9C+INC80LXRgtC+0LTQsCBHZXQg0L7QsdGK0LXQutGC0LAgTyDRgSDQsNGA0LPRg9C80LXQvdGC0L7QvCBQay5cbiAgICAgICAga1ZhbHVlID0gT1trXTtcblxuICAgICAgICAvLyBpaS4g0JLRi9C30L7QstC10Lwg0LLQvdGD0YLRgNC10L3QvdC40Lkg0LzQtdGC0L7QtCBDYWxsINGE0YPQvdC60YbQuNC4IGNhbGxiYWNrINGBINC+0LHRitC10LrRgtC+0LwgVCDQsiDQutCw0YfQtdGB0YLQstC1INC30L3QsNGH0LXQvdC40Y8gdGhpcyDQuFxuICAgICAgICAvLyDRgdC/0LjRgdC60L7QvCDQsNGA0LPRg9C80LXQvdGC0L7Qsiwg0YHQvtC00LXRgNC20LDRidC40Lwga1ZhbHVlLCBrINC4IE8uXG4gICAgICAgIGNhbGxiYWNrLmNhbGwoVCwga1ZhbHVlLCBrLCBPKTtcbiAgICAgIH1cbiAgICAgIC8vIGQuINCj0LLQtdC70LjRh9C40LwgayDQvdCwIDEuXG4gICAgICBrKys7XG4gICAgfVxuICAgIC8vIDguINCS0LXRgNC90ZHQvCB1bmRlZmluZWQuXG4gIH07XG59XG5cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICB2YXIgaGlkZGVuRnJpZW5kcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oaWRkZW4tbGlzdCcpO1xuICAgIHZhciBzaG93QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhcnRuZXJzX19saW5rJyk7XG4gICAgdmFyIGV0YWxvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ldGFsb24nKTtcbiAgICBcbiAgICBzaG93QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93SGlkZUJsb2NrKTtcbiAgICBcbiAgICBmdW5jdGlvbiBzaG93SGlkZUJsb2NrIChlbCwgdCwgZikge1xuICAgICAgICB0ID0gNDAwO1xuICAgICAgICBmID0gMjQ7XG4gICAgICAgIHZhciBmcHMgPSBmO1xuICAgICAgICB2YXIgdGltZSA9IHQ7XG4gICAgICAgIHZhciBzdGVwcyA9IHRpbWUgLyBmcHM7XG4gICAgICAgIGVsLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBoaWRkZW5GcmllbmRzLm9mZnNldEhlaWdodDtcbiAgICAgICAgdmFyIGV0YWxvbkhlaWdodCA9IGV0YWxvbi5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIGlmIChoZWlnaHQgPT0gMCkge1xuICAgICAgICAgICAgaGlkZGVuRnJpZW5kcy5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICBoaWRkZW5GcmllbmRzLmNsYXNzTGlzdC5yZW1vdmUoJ25vbi12aXNpYmxlJyk7XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0ZXBzPjApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ZXAgPSBldGFsb25IZWlnaHQgLyAodGltZS9mcHMpO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgKz0gc3RlcDtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuRnJpZW5kcy5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIHN0ZXBzIC09IDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHNob3dCdXR0b24uaW5uZXJIVE1MID0gJ0hpZGUgcGFydG5lcnMnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHRpbWUvZnBzKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChzdGVwcz4wKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGVwID0gZXRhbG9uSGVpZ2h0IC8gKHRpbWUvZnBzKTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0IC09IHN0ZXA7XG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbkZyaWVuZHMuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICBzdGVwcyAtPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICBoaWRkZW5GcmllbmRzLmNsYXNzTGlzdC5hZGQoJ25vbi12aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIHNob3dCdXR0b24uaW5uZXJIVE1MID0gJ1NlZSBvdGhlciBwYXJ0bmVycyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGltZS9mcHMpXG4gICAgICAgIH0gIFxuICAgIH1cbiAgICBcblxuLy8g0KDQtdCw0LvQuNC30LDRhtC40Y8g0YEg0L/QvtC80L7RidGM0Y4galF1ZXJ5ICAgIFxuLy8gICAgdmFyIGhpZGRlbkZyaWVuZHMgPSAkKCcuaGlkZGVuLWxpc3QnKVswXTtcbi8vICAgIHZhciBzaG93QnV0dG9uID0gJCgnLnBhcnRuZXJzX19saW5rJylbMF07XG4vLyAgICAkKHNob3dCdXR0b24pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbi8vICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4vLyAgICAgICAgaWYgKCQoaGlkZGVuRnJpZW5kcykuaGFzQ2xhc3MoXCJvcGVuXCIpKSB7XG4vLyAgICAgICAgICAgICQoaGlkZGVuRnJpZW5kcykucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpO1xuLy8gICAgICAgICAgICAkKGhpZGRlbkZyaWVuZHMpLnNsaWRlVXAoMzAwKTtcbi8vICAgICAgICAgICAgJCh0aGlzKS5odG1sKCdTZWUgb3RoZXIgcGFydG5lcnMnKTtcbi8vICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAkKGhpZGRlbkZyaWVuZHMpLmFkZENsYXNzKFwib3BlblwiKTtcbi8vICAgICAgICAgICAgJChoaWRkZW5GcmllbmRzKS5zbGlkZURvd24oMzAwKTtcbi8vICAgICAgICAgICAgJCh0aGlzKS5odG1sKCdIaWRlIHBhcnRuZXJzJyk7XG4vLyAgICAgICAgfVxuLy8gICAgfSk7XG4gICAgXG4gICAgdmFyIHRleHRWYWx1ZTsgLy/QntCx0YrRj9Cy0LvQtdC8INCz0LvQvtCx0LDQu9GM0L3QvtC1INC30L3QsNGH0LXQvdC40LUg0LIg0YDQsNC80LrQsNGFIGRvY3VtZW50LlJlYWR5XG4gICAgdmFyIGN1cnJlbnREaXY7XG4gICAgXG4gICAgdmFyIGkgPSAwO1xuICAgIFxuICAgIHZhciB0aW1lcklkID0gc2V0VGltZW91dChmdW5jdGlvbiB0aWNrKCkge1xuICAgICAgUmFuZG9tV29yZCgpO1xuICAgICAgaSsrO1xuICAgICAgaWYgKGkgPCA1KSB7XG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpY2ssIDIwMDApOyAgICBcbiAgICAgIH0gIGVsc2Uge1xuICAgICAgICAgIGNsZWFyVGltZW91dDtcbiAgICAgIH1cbiAgICB9LCAyMDAwKTtcblxuICAgIFxuICAgIC8vINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDRg9C00LDQu9GP0LXRgiDQv9GA0LXQtNGL0LTRg9GJ0LjQuSDQsdC70L7QuiDRgSDQt9Cw0L/RgNC+0YHQvtC8XG4gICAgZnVuY3Rpb24gcmVtb3ZlQkxvY2sgKCkge1xuICAgICAgICB2YXIgYmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1hc29ucnlfX2l0ZW0nKTtcbiAgICAgICAgaWYgKGJsb2Nrcy5sZW5ndGggPiA2KSB7XG4gICAgICAgICAgICB2YXIgZGVsRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXNvbnJ5X19pdGVtJyk7XG4gICAgICAgICAgICBkZWxFbGVtLnJlbW92ZSgpOyAgICAgXG4gICAgICAgIH0gZWxzZSB7fVxuICAgIH07XG4gICBcbiAgICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0LTQvtCx0LDQstC70Y/QtdGCINCx0LvQvtC6INGBINC90L7QstGL0Lwg0LfQsNC/0YDQvtGB0L7QvFxuICAgIGZ1bmN0aW9uIGFkZEJsb2NrICgpIHtcbiAgICAgICAgdmFyIG1vc2FpYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3NhaWMnKTtcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjdXJyZW50RGl2ID0gZGl2O1xuICAgICAgICBkaXYuY2xhc3NOYW1lID0gXCJ0ZXh0X19jb250YWluZXIgbWFzb25yeV9faXRlbVwiO1xuICAgICAgICBtb3NhaWMuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgdmFyIGRpdlRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2VGV4dC5jbGFzc05hbWUgPSBcImlubmVyX190ZXh0XCI7XG4gICAgICAgIGRpdlRleHQuaW5uZXJIVE1MID0gdGV4dFZhbHVlO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZGl2VGV4dCk7XG4gICAgICAgIGltYWdlKCk7XG4gICAgfTtcblxuICAgIC8vINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQuNC90LjRhtC40LDQu9C40LfQuNGA0YPQtdGCIE1hc29ucnlcbiAgICBmdW5jdGlvbiBtYXNvbnJ5ICgpIHtcbiAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9zYWljJyk7XG4gICAgICAgIHZhciBtc25yeSA9IG5ldyBNYXNvbnJ5KCBlbGVtLCB7XG4gICAgICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgICAgICBpdGVtU2VsZWN0b3I6ICcubWFzb25yeV9faXRlbScsXG4gICAgICAgICAgICBjb2x1bW5XaWR0aDogNSxcbiAgICAgICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgICAgICBhbmltYXRpb25PcHRpb25zOiB7IFxuICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLCBcbiAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7ICAgXG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBpbWFnZSAoKSB7XG4gICAgICAgIFxuICAgICAgICB2YXIgdXJsUXVlcnkgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2N1c3RvbXNlYXJjaC92MT9xPVwiICsgdGV4dFZhbHVlICsgXCImY3g9MDE2NzMyNjI0ODE2NDcxMDYxNDI4OjNndDJyY3hvN2xrJmltZ1NpemU9bWVkaXVtJmZpbGVUeXBlPWpwZyZudW09MSZzZWFyY2hUeXBlPWltYWdlJmltZ0RvbWluYW50Q29sb3I9cGluayZrZXk9QUl6YVN5Qm5jT2swT0tEMHA3U0VxcG5Dbmo2OGxaQWwwenF4eHZvXCI7XG4gICAgICAgIFxuICAgICAgICB2YXIgeG1sUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4bWxSZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybFF1ZXJ5LCB0cnVlKTtcbiAgICAgICAgeG1sUmVxdWVzdC5zZW5kKCk7XG4gICAgICAgIFxuICAgICAgICB4bWxSZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICh4bWxSZXF1ZXN0LnJlYWR5U3RhdGUgIT0gNCkgcmV0dXJuO1xuXG4gICAgICAgICAgaWYgKHhtbFJlcXVlc3Quc3RhdHVzICE9IDIwMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCLQmNC30L7QsdGA0LDQttC10L3QuNC1INC/0L4g0LTQsNC90L3QvtC80YMg0LfQsNC/0YDQvtGB0YMg0L3QtSDQv9C+0LvRg9GH0LXQvdC+IFwiICsgeG1sUmVxdWVzdC5zdGF0dXMgKyAnOiAnICsgeG1sUmVxdWVzdC5zdGF0dXNUZXh0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeG1sUmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICB2YXIgaW1hZ2VMaW5rID0gZGF0YS5pdGVtc1swXS5saW5rO1xuICAgICAgICAgICAgICB2YXIgaW1hZ2VXaWR0aCA9IGRhdGEuaXRlbXNbMF0uaW1hZ2Uud2lkdGg7XG4gICAgICAgICAgICAgIHZhciBpbWFnZWhlaWdodCA9IGRhdGEuaXRlbXNbMF0uaW1hZ2UuaGVpZ2h0O1xuICAgICAgICAgICAgICB2YXIgcmF0aW8gPSBpbWFnZVdpZHRoIC8gaW1hZ2VoZWlnaHQ7XG4gICAgICAgICAgICAgIGlmIChyYXRpbyA+IDIpIHtcbiAgICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IDQ0MDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSByYXRpbyAqIDMxMDsgIFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBjdXJyZW50RGl2LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGltYWdlTGluayArICcpJztcbiAgICAgICAgICAgICAgY3VycmVudERpdi5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgY3VycmVudERpdi5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICdhdXRvIDMxMHB4JztcbiAgICAgICAgICAgICAgbWFzb25yeSgpOyAgICBcbiAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgIH07XG4gICAgXG4gICAgXG4gICAgXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC/0YDQuNC80LXQvdGP0LXRgtGB0Y8g0LTQu9GPINC/0L7QuNGB0LrQsCDRgdC70YPRh9Cw0LnQvdGL0YUg0LrQsNGA0YLQuNC90L7QulxuICAgIFxuICAgIGZ1bmN0aW9uIFJhbmRvbVdvcmQoKSB7XG4gICAgICBcbiAgICAgICAgZnVuY3Rpb24ganNvbnAodXJsLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrTmFtZSA9ICdqc29ucF9jYWxsYmFja18nICsgTWF0aC5yb3VuZCgxMDAwMDAgKiBNYXRoLnJhbmRvbSgpKTtcbiAgICAgICAgICAgIHdpbmRvd1tjYWxsYmFja05hbWVdID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbY2FsbGJhY2tOYW1lXTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgICAgICBzY3JpcHQuc3JjID0gdXJsICsgKHVybC5pbmRleE9mKCc/JykgPj0gMCA/ICcmJyA6ICc/JykgKyAnY2FsbGJhY2s9JyArIGNhbGxiYWNrTmFtZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGpzb25wKCdodHRwOi8vcmFuZG9td29yZC5zZXRnZXRnby5jb20vZ2V0LnBocCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgdGV4dFZhbHVlID0gZGF0YS5Xb3JkO1xuICAgICAgICAgICAgcmVtb3ZlQkxvY2soKTtcbiAgICAgICAgICAgIGFkZEJsb2NrKCk7XG4gICAgICAgICAgICBtYXNvbnJ5KCk7XG4gICAgICAgIH0pOyAgIFxuICAgIH07XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4vLyAgICBmdW5jdGlvbiBSYW5kb21Xb3JkKCkge1xuLy8gICAgICAgIFxuLy8gICAgICAgIHZhciByZXF1ZXN0U3RyID0gXCJodHRwOi8vcmFuZG9td29yZC5zZXRnZXRnby5jb20vZ2V0LnBocFwiO1xuLy8gICAgICAgIFxuLy8gICAgICAgICQuYWpheCh7XG4vLyAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4vLyAgICAgICAgICAgIHVybDogcmVxdWVzdFN0cixcbi8vICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvbnBcIixcbi8vICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4vLyAgICAgICAgICAgICAgICB0ZXh0VmFsdWUgPSByZXNwb25zZS5Xb3JkO1xuLy8gICAgICAgICAgICAgICAgcmVtb3ZlQkxvY2soKTtcbi8vICAgICAgICAgICAgICAgIGFkZEJsb2NrKCk7XG4vLyAgICAgICAgICAgICAgICBtYXNvbnJ5KCk7XG4vLyAgICAgICAgICAgIH1cbi8vICAgICAgICB9KTtcbi8vICAgIH07XG4gICAgXG4gICAgXG4gICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2hfX2J0bicpO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZEVsZW1lbnQpXG4gICAgXG4gICAgZnVuY3Rpb24gYWRkRWxlbWVudCAoZXZlbnQpIHtcbiAgICAgICAgXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vINCf0YDQtdC00L7RgtCy0YDQsNGJ0LDQtdC8INCy0YvQv9C+0LvQvdC10L3QuNC1INGB0L7QsdGL0YLQuNGPIFwi0J/QviDRg9C80L7Qu9GH0LDQvdC40Y5cIlxuICAgICAgICBcbiAgICAgICAgLy/Qn9C+0LvRg9GH0LDQtdC8INGA0LjRgdGD0L3QvtC6INGB0L7Qs9C70LDRgdC90L4g0LfQsNC/0YDQvtGB0YNcbiAgICAgICAgXG4gICAgICAgIHRleHRWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2hfX2lucHV0JykudmFsdWU7XG4gICAgICAgIFxuICAgICAgICBpZiAodGV4dFZhbHVlID09IDApIHtcbiAgICAgICAgICAgIFJhbmRvbVdvcmQoKTsgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW1vdmVCTG9jaygpO1xuICAgICAgICAgICAgYWRkQmxvY2soKTsgICBcbiAgICAgICAgICAgIG1hc29ucnkoKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgfTtcbiAgICBcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
