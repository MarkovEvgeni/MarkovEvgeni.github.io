"use strict";document.addEventListener("DOMContentLoaded",function(){function e(){var e=document.querySelectorAll(".carousels__item--slides"),t=0-e[0].offsetWidth/3,n=2*t;e[1].style.left=t+"px",e[2].style.left=n+"px"}function t(e){var t=e.parentNode,n=(t.offsetWidth,t.querySelector(".carousels__item--slides"));n.offsetWidth,parseInt(getComputedStyle(n).left);e.addEventListener("mouseover",o),e.addEventListener("mouseout",r),e.addEventListener("click",i)}function n(e){var t=e.parentNode,n=(t.offsetWidth,t.querySelector(".carousels__item--slides"));n.offsetWidth,parseInt(getComputedStyle(n).left);e.addEventListener("mouseover",o),e.addEventListener("mouseout",r),e.addEventListener("click",s)}function o(){this.style.opacity=1,this.style.cursor="pointer"}function r(){this.style.opacity=.5,this.style.cursor="default"}function i(){var e=this.parentNode,t=e.offsetWidth,n=e.querySelector(".carousels__item--slides"),o=n.offsetWidth,r=parseInt(getComputedStyle(n).left);o+r-t==0&&(r=t),r-=t,n.style.left=r+"px"}function s(){var e=this.parentNode,t=e.offsetWidth,n=e.querySelector(".carousels__item--slides"),o=n.offsetWidth,r=parseInt(getComputedStyle(n).left);0==r&&(r=-o),r+=t,n.style.left=r+"px"}window.onresize=e,e();for(var a=document.querySelectorAll(".next"),l=document.querySelectorAll(".prev"),c=0;c<a.length;++c)t(a[c]);for(var c=0;c<l.length;++c)n(l[c])}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,o;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),o=0;o<i;){var s;o in r&&(s=r[o],e.call(n,s,o,r)),o++}}),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),document.addEventListener("DOMContentLoaded",function(){function e(e,t,n){t=400,n=24;var o=n,r=t,i=r/o;e.preventDefault();var s=a.offsetHeight,d=c.offsetHeight;if(0==s){a.style.height=s+"px",a.classList.remove("non-visible");var u=setInterval(function(){if(i>0){var e=d/(r/o);s+=e,a.style.height=s+"px",i-=1}else clearInterval(u),l.innerHTML="Hide partners"},r/o)}else var u=setInterval(function(){if(i>0){var e=d/(r/o);s-=e,a.style.height=s+"px",i-=1}else clearInterval(u),a.classList.add("non-visible"),l.innerHTML="See other partners"},r/o)}function t(){var e=document.querySelectorAll(".masonry__item");if(e.length>6){var t=document.querySelector(".masonry__item");t.remove()}}function n(){var e=document.querySelector(".mosaic"),t=document.createElement("div");u=t,t.className="text__container masonry__item",e.appendChild(t);var n=document.createElement("div");n.className="inner__text",n.innerHTML=d,t.appendChild(n),r()}function o(){var e=document.querySelector(".mosaic");new Masonry(e,{itemSelector:".masonry__item",columnWidth:5,isAnimated:!0,animationOptions:{queue:!1,duration:500}})}function r(){var e="https://www.googleapis.com/customsearch/v1?q="+d+"&cx=016732624816471061428:3gt2rcxo7lk&imgSize=medium&fileType=jpg&num=1&searchType=image&imgDominantColor=pink&key=AIzaSyBncOk0OKD0p7SEqpnCnj68lZAl0zqxxvo",t=new XMLHttpRequest;t.open("GET",e,!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState)if(200!=t.status)console.log("Изображение по данному запросу не получено "+t.status+": "+t.statusText);else{var e=JSON.parse(t.responseText),n=e.items[0].link,r=e.items[0].image.width,i=e.items[0].image.height,s=r/i;if(s>2)var a=440;else var a=310*s;u.style.backgroundImage="url("+n+")",u.style.width=a+"px",u.style.backgroundSize="auto 310px",o()}}}function i(){function e(e,t){var n="jsonp_callback_"+Math.round(1e5*Math.random());window[n]=function(e){delete window[n],document.body.removeChild(o),t(e)};var o=document.createElement("script");o.src=e+(e.indexOf("?")>=0?"&":"?")+"callback="+n,document.body.appendChild(o)}e("http://randomword.setgetgo.com/get.php",function(e){d=e.Word,t(),n(),o()})}function s(e){e.preventDefault(),d=document.querySelector(".search__input").value,0==d?i():(t(),n(),o())}var a=document.querySelector(".hidden-list"),l=document.querySelector(".partners__link"),c=document.querySelector(".etalon");l.addEventListener("click",e);var d,u,m=0,f=setTimeout(function e(){i(),m++,m<5?f=setTimeout(e,2e3):clearTimeout},2e3),p=document.querySelector(".search__btn");p.addEventListener("click",s)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic2hpZnQiLCJzbGlkZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsInNsaWRlclNoaWZ0Iiwib2Zmc2V0V2lkdGgiLCJzbGlkZXJTaGlmdERvdWJsZSIsImNhbGN1bGF0ZU5leHQiLCJpdGVtIiwicGFyZW50IiwicGFyZW50Tm9kZSIsInRhcGUiLCJxdWVyeVNlbGVjdG9yIiwicGFyc2VJbnQiLCJnZXRDb21wdXRlZFN0eWxlIiwibGVmdCIsImhvdmVyIiwibm9Ib3ZlciIsInNsaWRlUmlnaHQiLCJ2aXNpYmxlUGFydCIsIndob2xlVGFwZSIsInNsaWRlTGVmdCIsInRoaXMiLCJzdHlsZSIsIm9wYWNpdHkiLCJBcnJheSIsInByb3RvdHlwZSIsImZvckVhY2giLCJ3aW5kb3ciLCJvbnJlc2l6ZSIsIm5leHRBcnIiLCJwcmV2QXJyIiwiaSIsImxlbmd0aCIsImNhbGN1bGF0ZVByZXYiLCJjYWxsYmFjayIsInRoaXNBcmciLCJUIiwiayIsIlR5cGVFcnJvciIsIk8iLCJPYmplY3QiLCJsZW4iLCJhcmd1bWVudHMiLCJrVmFsdWUiLCJjYWxsIiwiRWxlbWVudCIsInJlbW92ZSIsInJlbW92ZUNoaWxkIiwiaGVpZ2h0IiwiaGlkZGVuRnJpZW5kcyIsIm9mZnNldEhlaWdodCIsInQiLCJldGFsb25IZWlnaHQiLCJmIiwic3RlcHMiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiZWwiLCJwcmV2ZW50RGVmYXVsdCIsImNsYXNzTGlzdCIsImNsZWFySW50ZXJ2YWwiLCJzaG93QnV0dG9uIiwic3RlcCIsInRpbWUiLCJmcHMiLCJpbm5lckhUTUwiLCJhZGQiLCJhZGRCbG9jayIsIm1vc2FpYyIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJjdXJyZW50RGl2IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJpbWFnZSIsIm1hc29ucnkiLCJlbGVtIiwiZGl2VGV4dCIsIm1zbnJ5IiwiTWFzb25yeSIsInRleHRWYWx1ZSIsIml0ZW1TZWxlY3RvciIsImNvbHVtbldpZHRoIiwiZHVyYXRpb24iLCJpc0FuaW1hdGVkIiwidXJsUXVlcnkiLCJxdWV1ZSIsInhtbFJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJkYXRhIiwiSlNPTiIsInNlbmQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJpdGVtcyIsImltYWdlV2lkdGgiLCJyYXRpbyIsIndpZHRoIiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmRTaXplIiwiaW1hZ2VMaW5rIiwiUmFuZG9tV29yZCIsImpzb25wIiwidXJsIiwiV29yZCIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsInJlbW92ZUJMb2NrIiwic2NyaXB0Iiwic3JjIiwiaW5kZXhPZiIsImNhbGxiYWNrTmFtZSIsImJvZHkiLCJhZGRFbGVtZW50IiwiZXZlbnQiLCJ2YWx1ZSIsImV0YWxvbiIsInNob3dIaWRlQmxvY2siLCJ0aW1lcklkIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInRpY2siLCJibG9ja3MiLCJidXR0b24iXSwibWFwcGluZ3MiOiJZQUFBQSxVQUFTQyxpQkFBaUIsbUJBQW9CLFdBRTFDLFFBQUFDLEtBR0ksR0FBSUMsR0FBVUgsU0FBU0ksaUJBQWlCLDRCQUQ1Q0MsRUFBa0IsRUFBQUYsRUFBQSxHQUFBRyxZQUFBLEVBQ1ZILEVBQW1CQyxFQUFBQSxDQUN2QkQsR0FBSUUsR0FBQUEsTUFBQUEsS0FBa0JGLEVBQVdHLEtBQ2pDSCxFQUFJSSxHQUFBQSxNQUFBQSxLQUFvQkYsRUFBeEIsS0F3QkosUUFBU0csR0FBZUMsR0FDcEIsR0FBSUMsR0FBU0QsRUFBS0UsV0FFZEMsR0FEY0YsRUFBT0osWUFDZEksRUFBT0csY0FBYyw0QkFDaEJELEdBQUtOLFlBQ1ZRLFNBQVNDLGlCQUFpQkgsR0FBTUksS0FJdkNQLEdBQUtSLGlCQUFpQixZQUFhZ0IsR0FDbkNSLEVBQUtSLGlCQUFpQixXQUFZaUIsR0FDbENULEVBQUtSLGlCQUFpQixRQUFTa0IsR0FNbkMsUUFBSVQsR0FBY0MsR0FDbEIsR0FBSVMsR0FBQUEsRUFBY1YsV0FFZFcsR0FEY1IsRUFBQUEsWUFDZFEsRUFBWVQsY0FBaEIsNEJBQ1dFLEdBQVNDLFlBQzVCRCxTQUFBQyxpQkFBQUgsR0FBQUksS0FJWVAsR0FBS1IsaUJBQWlCLFlBQVlpQixHQUNsQ1QsRUFBS1IsaUJBQWlCLFdBQVNxQixHQUMzQ2IsRUFBQVIsaUJBQUEsUUFBQXFCLEdBUUssUUFBQUwsS0FGR00sS0FBS0MsTUFBTUMsUUFBVSxFQUl6QkYsS0FBU0wsTUFBQUEsT0FBVyxVQUduQixRQUFBQSxLQUZHSyxLQUFLQyxNQUFNQyxRQUFVLEdBSXpCRixLQUFTSixNQUFBQSxPQUFjLFVBRzNCLFFBQUFBLEtBTVEsR0FBSUUsR0FBQUEsS0FBWVQsV0FDWkksRUFBT0YsRUFBU0MsWUFDaEJNLEVBQUFBLEVBQVVMLGNBQUtJLDRCQUNmSixFQUFPSSxFQUFBQSxZQUNuQkosRUFBQUYsU0FBQUMsaUJBQUFILEdBQUFJLEtBQ0FLLEdBQUFMLEVBQUFJLEdBQUEsSUFIUUosRUFJT0ksR0FLUEosR0FBY0ksRUFJbEJSLEVBQVNVLE1BQUFBLEtBQWFOLEVBQUEsS0FHMUIsUUFBQU0sS0FNUSxHQUFJRCxHQUFBQSxLQUFZVCxXQUNaSSxFQUFPRixFQUFTQyxZQUNoQkMsRUFBQUEsRUFBV0gsY0FBQSw0QkFDWEcsRUFBU0ssRUFBVGYsWUFDWlUsRUFBQUYsU0FBQUMsaUJBQUFILEdBQUFJLEtBQ0EsSUFBQUEsSUFIUUEsR0FJT0ssR0FqSGZMLEdBQUFJLEVBNkhLTSxFQUFNQyxNQUFBQSxLQUFVQyxFQUFTLEtBaEgxQkMsT0FBT0MsU0FBVzVCLEVBQWxCMkIsR0FPQSxLQUFLLEdBSERFLEdBQVUvQixTQUFTSSxpQkFBaUIsU0FDcEM0QixFQUFVaEMsU0FBU0ksaUJBQWlCLFNBRS9CNkIsRUFBSSxFQUFHQSxFQUFJRixFQUFRRyxTQUFVRCxFQUNsQ3pCLEVBQWN1QixFQUFRRSxHQUcxQixLQUFLLEdBQUlBLEdBQUksRUFBR0EsRUFBSUQsRUFBUUUsU0FBVUQsRUFDbENFLEVBQWNILEVBQVFDLE1BMEcxQlAsTUFBQUMsVUFBWUMsVUFFWEYsTUFBQUMsVUFBQUMsUUFBQSxTQUFBUSxFQUFBQyxHQUVELEdBQUFDLEdBQUFDLENBSkEsSUFBWSxNQUFSaEIsS0FPSixLQUFBLElBQUFpQixXQUFBLCtCQUlBLElBQUFDLEdBQUFDLE9BQUFuQixNQUlDb0IsRUFBQUYsRUFBQVAsU0FBQSxDQUlDSSxJQUFBLGtCQUFBQSxHQUNELEtBQUEsSUFBQUUsV0FBQUosRUFBQSxxQkFZQyxLQWRFUSxVQUFVVixPQUFTLElBT3ZCSSxFQUFBRCxHQUZBRSxFQUFJLEVBU0ZBLEVBQUFJLEdBQUEsQ0FFQSxHQUFBRSxFQU9FTixLQUFBRSxLQUdGSSxFQUFBSixFQUFBRixHQWhESkgsRUFBQVUsS0FBQVIsRUFBQU8sRUFBQU4sRUFBQUUsSUF1RElGLE9BTUwsVUFBQVEsU0FBQXBCLFlBTEdvQixRQUFRcEIsVUFBVXFCLE9BQVMsV0FRdEIvQyxLQUFBQSxZQU5Hc0IsS0FBS1osV0FBV3NDLFlBQVkxQixRQU14Q3ZCLFNBQVNDLGlCQUFpQixtQkFBb0IsV0FldEMsUUFBSWlELEdBQVNDLEVBQUFBLEVBQWNDLEdBQzNCQyxFQUFJQyxJQUNKQyxFQUFJTCxFQUNBQyxJQUFBQSxHQUFBQSxFQUNBQSxFQUFBQSxFQUNBSyxFQUFJQyxFQUFXQyxDQUNYQyxHQUFBQyxnQkFDSSxJQUFBVixHQUFBQyxFQUFXRyxhQUNYSixFQUFBQSxFQUFBRSxZQUNBRCxJQUFBQSxHQUFBQSxFQUFBQSxDQUNBSyxFQUFBQSxNQUFBTixPQUFBQSxFQUFBLEtBQ0hDLEVBQU1VLFVBQUFiLE9BQUEsY0FDSGMsSUFBQUEsR0FBQUEsWUFBY0wsV0FDZE0sR0FBQUEsRUFBQUEsRUFBQUEsQ0FDSCxHQUFBQyxHQUFBVixHQUFBVyxFQUFBQyxFQUNGRCxJQVZIRCxFQVdHYixFQUFBM0IsTUFBQTBCLE9BQUFBLEVBQUEsS0FDQ08sR0FBV0MsTUFFUEksZUFBV1IsR0FDWEosRUFBVWMsVUFBVixpQkFFQVIsRUFBQUEsT0FFQU0sSUFBQUEsR0FBQUEsWUFBY0wsV0FDZE4sR0FBQUEsRUFBQUEsRUFBQUEsQ0FDQVksR0FBQUEsR0FBV0ksR0FBWUYsRUFBQUMsRUFDMUJoQixJQUFBYyxFQUNGQyxFQVhIekMsTUFBQTBCLE9BQUFBLEVBQUEsS0FZSE0sR0FBQSxNQUxXTSxlQUFjTCxHQVNsQ04sRUFBQVUsVUFBQU8sSUFBQSxlQUNBTCxFQUFBSSxVQUFBLHNCQUVBRixFQUFBQyxHQXVDSSxRQUFTRyxLQUNMLEdBQUlDLEdBQVN0RSxTQUFTYSxpQkFBYyxpQkFDcEMsSUFBSTBELEVBQU12RSxPQUFTd0UsRUFBQUEsQ0FDbkJDLEdBQUFBLEdBQUF6RSxTQUFBYSxjQUFBLGlCQUNJNkQsR0FBQUEsVUFLSkgsUUFBSUksS0FDSkMsR0FBQUEsR0FBQUEsU0FBQUEsY0FBQUEsV0FDSEwsRUFBQXZFLFNBQUF3RSxjQUFBLE1BUkdDLEdBQWFGLEVBVWpCQSxFQUFBRyxVQUFBLGdDQUNBSixFQUFTTyxZQUFXTixFQUNoQixJQUFJTyxHQUFPOUUsU0FBU2EsY0FBYyxNQUNsQ2tFLEdBQUlDLFVBQVlDLGNBQ1pGLEVBQUFaLFVBQUFlLEVBQ0FDLEVBQUFBLFlBQUFBLEdBQ0FDLElBSUdDLFFBQUFBLEtBRmUsR0FBQVAsR0FBQTlFLFNBQUFhLGNBQUEsVUFMdEIsSUFBQW9FLFNBQUFILEdBRUlLLGFBQWMsaUJBVXRCQyxZQUFrQixFQVJWRSxZQUFZLEVBVVpDLGtCQVJHQyxPQUFPLEVBVVZDLFNBQWEsT0FLZixRQUFBYixLQUVBLEdBQUFXLEdBQUlFLGdEQUEwQlAsRUFBQSw2SkFFN0JPLEVBQU0sR0FBQUMsZUFDSEQsR0FBQUUsS0FBSUMsTUFBT0MsR0FBV0osR0FDdEJBLEVBQUFLLE9BRUFMLEVBQUFNLG1CQUF1QkMsV0FDdkIsR0FBWUMsR0FBWlIsRUFBSVMsV0FFQSxHQUFBLEtBQUFULEVBQUlVLE9BQ1BDLFFBRkRDLElBRU8sOENBQUFaLEVBQUFhLE9BQUEsS0FBQWIsRUFBQWMsZ0JBQ0wsQ0FDRCxHQUFBWCxHQUFBQyxLQUFBVyxNQUFBZixFQUFBZ0IsY0FDRGhDLEVBQVdqRCxFQUFNa0YsTUFBQUEsR0FBQUEsS0FDakJqQyxFQUFXakQsRUFBTTJFLE1BQVFBLEdBQUFBLE1BQVFBLE1BQ2pDMUIsRUFBQW1CLEVBQWlCZSxNQUFBQSxHQUFBQSxNQUFpQnpELE9BQ2xDMkIsRUFBQUEsRUFBQUEsQ0FDSCxJQUFBcUIsRUFBQSxFQXBCSCxHQUFBQyxHQUFBLFFBY1EsSUFBSUEsR0FBZ0IsSUFBUkQsQ0FFZHpCLEdBQVdqRCxNQUFNa0YsZ0JBQWtCLE9BQVNFLEVBQVksSUFjekRDLEVBQVRyRixNQUFzQjJFLE1BQUFBLEVBQUEsS0FaWjFCLEVBQVdqRCxNQUFNbUYsZUFBaUIsYUFjeEM5QixNQVdDLFFBQUFnQyxLQUVEQyxRQUFNQSxHQUFBQyxFQUFBM0UsR0FDSDhDLEdBQUFBLEdBQWlCOEIsa0JBQWpCQyxLQUFBQyxNQUFBLElBQUFELEtBQUFFLFNBQ0NDLFFBQUFBLEdBQUFBLFNBQUFBLFNBQ0EvQyxRQUFBQSxHQUNBUSxTQUFBQSxLQUFBQSxZQUFBQSxHQUpKekMsRUFBQXdELEdBWVIsSUFBQXlCLEdBQUFySCxTQUFBd0UsY0FBQSxTQUNBNkMsR0FBQUMsSUFBQVAsR0FBQUEsRUFBQVEsUUFBQSxNQUFBLEVBQUEsSUFBQSxLQUFBLFlBQUFDLEVBQ0F4SCxTQUFBeUgsS0FBQTlDLFlBQUEwQyxHQUdBUCxFQUFBLHlDQUFBLFNBQUFsQixHQUNBVixFQUFBVSxFQUFBb0IsS0FDQUksSUFDQS9DLElBQ0FRLE1BWUksUUFBUzZDLEdBQVlDLEdBRWpCQSxFQUFNL0QsaUJBSU5zQixFQUFZbEYsU0FBU2EsY0FBYyxrQkFBa0IrRyxNQUVwQyxHQUFiMUMsRUFDQTJCLEtBRUFPLElBQ0EvQyxJQUNBUSxLQWhOSnhCLEdBQUFBLEdBQUFyRCxTQUFBYSxjQUFBLGdCQUNBMEMsRUFBQXZELFNBQUFhLGNBQUEsbUJBQ0FnSCxFQUFJM0QsU0FBSnJELGNBQUEsVUFFQWtELEdBQUlQLGlCQUFKLFFBQUFzRSxFQTJERixJQUFBNUMsR0FDRTZDLEVBRUVDLEVBQUFBLEVBRUhELEVBUkhFLFdBQUEsUUFBQUMsS0FDRXJCLElBVUY1RSxJQUNBQSxFQUFTbUYsRUFDTFcsRUFBSUksV0FBU25JLEVBQVNJLEtBRWxCNEgsY0FFSCxLQW9JQUksRUFBQXBJLFNBQUFhLGNBQUEsZUFFSnVILEdBQUFuSSxpQkFBQSxRQUFBeUgiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIFxuICAgIGZ1bmN0aW9uIHNoaWZ0ICgpIHtcbiAgICAgICAgdmFyIHNsaWRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2Fyb3VzZWxzX19pdGVtLS1zbGlkZXMnKTtcbiAgICAgICAgdmFyIHNsaWRlclNoaWZ0ID0gMCAtIHNsaWRlcnNbMF0ub2Zmc2V0V2lkdGgvMztcbiAgICAgICAgdmFyIHNsaWRlclNoaWZ0RG91YmxlID0gc2xpZGVyU2hpZnQgKiAyO1xuICAgICAgICBzbGlkZXJzWzFdLnN0eWxlLmxlZnQgPSBzbGlkZXJTaGlmdCsncHgnO1xuICAgICAgICBzbGlkZXJzWzJdLnN0eWxlLmxlZnQgPSBzbGlkZXJTaGlmdERvdWJsZSsncHgnOyAgXG4gICAgfTtcbiAgICBcbiAgICBcbiAgICB3aW5kb3cub25yZXNpemUgPSBzaGlmdDtcbiAgICBzaGlmdCgpO1xuICAgIFxuICAgIFxuICAgIHZhciBuZXh0QXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5leHQnKTtcbiAgICB2YXIgcHJldkFyciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmV2Jyk7XG4gICAgXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXh0QXJyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNhbGN1bGF0ZU5leHQobmV4dEFycltpXSk7XG4gICAgfTsgICBcbiAgICBcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByZXZBcnIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY2FsY3VsYXRlUHJldihwcmV2QXJyW2ldKTtcbiAgICB9OyAgIFxuICAgIFxuLy8gICAgbmV4dEFyci5mb3JFYWNoKGNhbGN1bGF0ZU5leHQpOyBmb3JFYWNoINC90LUg0YDQsNCx0L7QsNC10YIg0YEg0L7QsdGK0LXQutGC0LDQvNC4IE5vZGVMaXN0INCyIElFOFxuLy8gICAgcHJldkFyci5mb3JFYWNoKGNhbGN1bGF0ZVByZXYpOyBmb3JFYWNoINC90LUg0YDQsNCx0L7QsNC10YIg0YEg0L7QsdGK0LXQutGC0LDQvNC4IE5vZGVMaXN0INCyIElFOFxuICAgICAgICBcbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVOZXh0IChpdGVtKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBpdGVtLnBhcmVudE5vZGU7XG4gICAgICAgIHZhciB2aXNpYmxlUGFydCA9IHBhcmVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIHRhcGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLmNhcm91c2Vsc19faXRlbS0tc2xpZGVzJyk7XG4gICAgICAgIHZhciB3aG9sZVRhcGUgPSB0YXBlLm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgbGVmdCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUodGFwZSkubGVmdCk7XG4vLyAgICAgICAgaWYgKHdob2xlVGFwZStsZWZ0LXZpc2libGVQYXJ0ID09MCkge1xuICAgICAgICAgICAgXG4vLyAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBob3Zlcik7XG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBub0hvdmVyKTtcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNsaWRlUmlnaHQpO1xuLy8gICAgICAgIH1cbiAgICAgICAgXG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVQcmV2IChpdGVtKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBpdGVtLnBhcmVudE5vZGU7XG4gICAgICAgIHZhciB2aXNpYmxlUGFydCA9IHBhcmVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIHRhcGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLmNhcm91c2Vsc19faXRlbS0tc2xpZGVzJyk7XG4gICAgICAgIHZhciB3aG9sZVRhcGUgPSB0YXBlLm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgbGVmdCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUodGFwZSkubGVmdCk7XG4vLyAgICAgICAgaWYgKGxlZnQgPT0gMCkge1xuICAgICAgICAgICAgXG4vLyAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBob3Zlcik7XG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBub0hvdmVyKTtcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNsaWRlTGVmdCk7XG4vLyAgICAgICAgfVxuICAgICAgICBcbiAgICB9O1xuICAgIFxuICAgIFxuICAgIGZ1bmN0aW9uIGhvdmVyICgpIHtcbiAgICAgICAgdGhpcy5zdHlsZS5vcGFjaXR5ID0gMTtcbiAgICAgICAgdGhpcy5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgfTtcbiAgICBcbiAgICBmdW5jdGlvbiBub0hvdmVyICgpIHtcbiAgICAgICAgdGhpcy5zdHlsZS5vcGFjaXR5ID0gMC41O1xuICAgICAgICB0aGlzLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIHNsaWRlUmlnaHQgKCkge1xuLy8gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBob3Zlcik7XG4vLyAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVSaWdodCk7XG4vLyAgICAgICAgdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBob3Zlcik7XG4vLyAgICAgICAgdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIG5vSG92ZXIpO1xuLy8gICAgICAgIHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzbGlkZUxlZnQpO1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICAgICAgICB2YXIgdmlzaWJsZVBhcnQgPSBwYXJlbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIHZhciB0YXBlID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbHNfX2l0ZW0tLXNsaWRlcycpO1xuICAgICAgICB2YXIgd2hvbGVUYXBlID0gdGFwZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIGxlZnQgPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHRhcGUpLmxlZnQpO1xuICAgICAgICBpZiAod2hvbGVUYXBlK2xlZnQtdmlzaWJsZVBhcnQgPT0gMCkge1xuICAgICAgICAgICAgbGVmdCA9IHZpc2libGVQYXJ0O1xuLy8gICAgICAgICAgICB0aGlzLnN0eWxlLm9wYWNpdHkgPSAwLjU7XG4vLyAgICAgICAgICAgIHRoaXMuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xuLy8gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBub0hvdmVyKTtcbi8vICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVSaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgbGVmdCA9IGxlZnQgLSB2aXNpYmxlUGFydDtcbiAgICAgICAgdGFwZS5zdHlsZS5sZWZ0ID0gbGVmdCsncHgnO1xuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gc2xpZGVMZWZ0ICgpIHtcbi8vICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xuLy8gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNsaWRlTGVmdCk7XG4vLyAgICAgICAgdGhpcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xuLy8gICAgICAgIHRoaXMucHJldmlvdXNFbGVtZW50U2libGluZy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgbm9Ib3Zlcik7XG4vLyAgICAgICAgdGhpcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzbGlkZVJpZ2h0KTtcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgICAgICAgdmFyIHZpc2libGVQYXJ0ID0gcGFyZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgdGFwZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWxzX19pdGVtLS1zbGlkZXMnKTtcbiAgICAgICAgdmFyIHdob2xlVGFwZSA9IHRhcGUub2Zmc2V0V2lkdGg7XG4gICAgICAgIHZhciBsZWZ0ID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZSh0YXBlKS5sZWZ0KTtcbiAgICAgICAgaWYgKGxlZnQgPT0gMCkge1xuICAgICAgICAgICAgbGVmdCA9IC0gd2hvbGVUYXBlO1xuLy8gICAgICAgICAgICB0aGlzLnN0eWxlLm9wYWNpdHkgPSAwLjU7XG4vLyAgICAgICAgICAgIHRoaXMuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xuLy8gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBub0hvdmVyKTtcbi8vICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVMZWZ0KTtcbiAgICAgICAgfVxuICAgICAgICBsZWZ0ID0gbGVmdCArIHZpc2libGVQYXJ0O1xuICAgICAgICB0YXBlLnN0eWxlLmxlZnQgPSBsZWZ0KydweCc7XG4gICAgfVxuICAgIFxuICAgIFxuXG59KTtcbmlmICghQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHtcblxuICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc0FyZykge1xuXG4gICAgdmFyIFQsIGs7XG5cbiAgICBpZiAodGhpcyA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcgdGhpcyBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7XG4gICAgfVxuXG4gICAgLy8gMS4g0J/QvtC70L7QttC40LwgTyDRgNCw0LLQvdGL0Lwg0YDQtdC30YPQu9GM0YLQsNGC0YMg0LLRi9C30L7QstCwIFRvT2JqZWN0IHBhc3NpbmcgdGhlIHx0aGlzfCB2YWx1ZSBhcyB0aGUgYXJndW1lbnQuXG4gICAgdmFyIE8gPSBPYmplY3QodGhpcyk7XG5cbiAgICAvLyAyLiDQn9C+0LvQvtC20LjQvCBsZW5WYWx1ZSDRgNCw0LLQvdGL0Lwg0YDQtdC30YPQu9GM0YLQsNGC0YMg0LLRi9C30L7QstCwINCy0L3Rg9GC0YDQtdC90L3QtdCz0L4g0LzQtdGC0L7QtNCwIEdldCDQvtCx0YrQtdC60YLQsCBPINGBINCw0YDQs9GD0LzQtdC90YLQvtC8IFwibGVuZ3RoXCIuXG4gICAgLy8gMy4g0J/QvtC70L7QttC40LwgbGVuINGA0LDQstC90YvQvCBUb1VpbnQzMihsZW5WYWx1ZSkuXG4gICAgdmFyIGxlbiA9IE8ubGVuZ3RoID4+PiAwO1xuXG4gICAgLy8gNC4g0JXRgdC70LggSXNDYWxsYWJsZShjYWxsYmFjaykg0YDQsNCy0LXQvSBmYWxzZSwg0LLRi9C60LjQvdC10Lwg0LjRgdC60LvRjtGH0LXQvdC40LUgVHlwZUVycm9yLlxuICAgIC8vINCh0LzQvtGC0YDQuNGC0LU6IGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDkuMTFcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoY2FsbGJhY2sgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gICAgfVxuXG4gICAgLy8gNS4g0JXRgdC70LggdGhpc0FyZyDQv9GA0LjRgdGD0YLRgdGC0LLRg9C10YIsINC/0L7Qu9C+0LbQuNC8IFQg0YDQsNCy0L3Ri9C8IHRoaXNBcmc7INC40L3QsNGH0LUg0L/QvtC70L7QttC40LwgVCDRgNCw0LLQvdGL0LwgdW5kZWZpbmVkLlxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgVCA9IHRoaXNBcmc7XG4gICAgfVxuXG4gICAgLy8gNi4g0J/QvtC70L7QttC40LwgayDRgNCw0LLQvdGL0LwgMFxuICAgIGsgPSAwO1xuXG4gICAgLy8gNy4g0J/QvtC60LAgayA8IGxlbiwg0LHRg9C00LXQvCDQv9C+0LLRgtC+0YDRj9GC0YxcbiAgICB3aGlsZSAoayA8IGxlbikge1xuXG4gICAgICB2YXIga1ZhbHVlO1xuXG4gICAgICAvLyBhLiDQn9C+0LvQvtC20LjQvCBQayDRgNCw0LLQvdGL0LwgVG9TdHJpbmcoaykuXG4gICAgICAvLyAgINCt0YLQviDQvdC10Y/QstC90L7QtSDQv9GA0LXQvtCx0YDQsNC30L7QstCw0L3QuNC1INC00LvRjyDQu9C10LLQvtGB0YLQvtGA0L7QvdC90LXQs9C+INC+0L/QtdGA0LDQvdC00LAg0LIg0L7Qv9C10YDQsNGC0L7RgNC1IGluXG4gICAgICAvLyBiLiDQn9C+0LvQvtC20LjQvCBrUHJlc2VudCDRgNCw0LLQvdGL0Lwg0YDQtdC30YPQu9GM0YLQsNGC0YMg0LLRi9C30L7QstCwINCy0L3Rg9GC0YDQtdC90L3QtdCz0L4g0LzQtdGC0L7QtNCwIEhhc1Byb3BlcnR5INC+0LHRitC10LrRgtCwIE8g0YEg0LDRgNCz0YPQvNC10L3RgtC+0LwgUGsuXG4gICAgICAvLyAgINCt0YLQvtGCINGI0LDQsyDQvNC+0LbQtdGCINCx0YvRgtGMINC+0LHRitC10LTQuNC90ZHQvSDRgSDRiNCw0LPQvtC8IGNcbiAgICAgIC8vIGMuINCV0YHQu9C4IGtQcmVzZW50INGA0LDQstC10L0gdHJ1ZSwg0YLQvlxuICAgICAgaWYgKGsgaW4gTykge1xuXG4gICAgICAgIC8vIGkuINCf0L7Qu9C+0LbQuNC8IGtWYWx1ZSDRgNCw0LLQvdGL0Lwg0YDQtdC30YPQu9GM0YLQsNGC0YMg0LLRi9C30L7QstCwINCy0L3Rg9GC0YDQtdC90L3QtdCz0L4g0LzQtdGC0L7QtNCwIEdldCDQvtCx0YrQtdC60YLQsCBPINGBINCw0YDQs9GD0LzQtdC90YLQvtC8IFBrLlxuICAgICAgICBrVmFsdWUgPSBPW2tdO1xuXG4gICAgICAgIC8vIGlpLiDQktGL0LfQvtCy0LXQvCDQstC90YPRgtGA0LXQvdC90LjQuSDQvNC10YLQvtC0IENhbGwg0YTRg9C90LrRhtC40LggY2FsbGJhY2sg0YEg0L7QsdGK0LXQutGC0L7QvCBUINCyINC60LDRh9C10YHRgtCy0LUg0LfQvdCw0YfQtdC90LjRjyB0aGlzINC4XG4gICAgICAgIC8vINGB0L/QuNGB0LrQvtC8INCw0YDQs9GD0LzQtdC90YLQvtCyLCDRgdC+0LTQtdGA0LbQsNGJ0LjQvCBrVmFsdWUsIGsg0LggTy5cbiAgICAgICAgY2FsbGJhY2suY2FsbChULCBrVmFsdWUsIGssIE8pO1xuICAgICAgfVxuICAgICAgLy8gZC4g0KPQstC10LvQuNGH0LjQvCBrINC90LAgMS5cbiAgICAgIGsrKztcbiAgICB9XG4gICAgLy8gOC4g0JLQtdGA0L3RkdC8IHVuZGVmaW5lZC5cbiAgfTtcbn07XG5cbmlmICghKCdyZW1vdmUnIGluIEVsZW1lbnQucHJvdG90eXBlKSkge1xuICAgIEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIFxuICAgIHZhciBoaWRkZW5GcmllbmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhpZGRlbi1saXN0Jyk7XG4gICAgdmFyIHNob3dCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFydG5lcnNfX2xpbmsnKTtcbiAgICB2YXIgZXRhbG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmV0YWxvbicpO1xuICAgIFxuICAgIHNob3dCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dIaWRlQmxvY2spO1xuICAgIFxuICAgIGZ1bmN0aW9uIHNob3dIaWRlQmxvY2sgKGVsLCB0LCBmKSB7XG4gICAgICAgIHQgPSA0MDA7XG4gICAgICAgIGYgPSAyNDtcbiAgICAgICAgdmFyIGZwcyA9IGY7XG4gICAgICAgIHZhciB0aW1lID0gdDtcbiAgICAgICAgdmFyIHN0ZXBzID0gdGltZSAvIGZwcztcbiAgICAgICAgZWwucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGhlaWdodCA9IGhpZGRlbkZyaWVuZHMub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB2YXIgZXRhbG9uSGVpZ2h0ID0gZXRhbG9uLm9mZnNldEhlaWdodDtcbiAgICAgICAgaWYgKGhlaWdodCA9PSAwKSB7XG4gICAgICAgICAgICBoaWRkZW5GcmllbmRzLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgIGhpZGRlbkZyaWVuZHMuY2xhc3NMaXN0LnJlbW92ZSgnbm9uLXZpc2libGUnKTtcbiAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RlcHM+MCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RlcCA9IGV0YWxvbkhlaWdodCAvICh0aW1lL2Zwcyk7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCArPSBzdGVwO1xuICAgICAgICAgICAgICAgICAgICBoaWRkZW5GcmllbmRzLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgc3RlcHMgLT0gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0J1dHRvbi5pbm5lckhUTUwgPSAnSGlkZSBwYXJ0bmVycyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGltZS9mcHMpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0ZXBzPjApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ZXAgPSBldGFsb25IZWlnaHQgLyAodGltZS9mcHMpO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgLT0gc3RlcDtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuRnJpZW5kcy5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIHN0ZXBzIC09IDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbkZyaWVuZHMuY2xhc3NMaXN0LmFkZCgnbm9uLXZpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0J1dHRvbi5pbm5lckhUTUwgPSAnU2VlIG90aGVyIHBhcnRuZXJzJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0aW1lL2ZwcylcbiAgICAgICAgfSAgXG4gICAgfVxuICAgIFxuXG4vLyDQoNC10LDQu9C40LfQsNGG0LjRjyDRgSDQv9C+0LzQvtGJ0YzRjiBqUXVlcnkgICAgXG4vLyAgICB2YXIgaGlkZGVuRnJpZW5kcyA9ICQoJy5oaWRkZW4tbGlzdCcpWzBdO1xuLy8gICAgdmFyIHNob3dCdXR0b24gPSAkKCcucGFydG5lcnNfX2xpbmsnKVswXTtcbi8vICAgICQoc2hvd0J1dHRvbikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuLy8gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICBpZiAoJChoaWRkZW5GcmllbmRzKS5oYXNDbGFzcyhcIm9wZW5cIikpIHtcbi8vICAgICAgICAgICAgJChoaWRkZW5GcmllbmRzKS5yZW1vdmVDbGFzcyhcIm9wZW5cIik7XG4vLyAgICAgICAgICAgICQoaGlkZGVuRnJpZW5kcykuc2xpZGVVcCgzMDApO1xuLy8gICAgICAgICAgICAkKHRoaXMpLmh0bWwoJ1NlZSBvdGhlciBwYXJ0bmVycycpO1xuLy8gICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICAgICQoaGlkZGVuRnJpZW5kcykuYWRkQ2xhc3MoXCJvcGVuXCIpO1xuLy8gICAgICAgICAgICAkKGhpZGRlbkZyaWVuZHMpLnNsaWRlRG93bigzMDApO1xuLy8gICAgICAgICAgICAkKHRoaXMpLmh0bWwoJ0hpZGUgcGFydG5lcnMnKTtcbi8vICAgICAgICB9XG4vLyAgICB9KTtcbiAgICBcbiAgICB2YXIgdGV4dFZhbHVlOyAvL9Ce0LHRitGP0LLQu9C10Lwg0LPQu9C+0LHQsNC70YzQvdC+0LUg0LfQvdCw0YfQtdC90LjQtSDQsiDRgNCw0LzQutCw0YUgZG9jdW1lbnQuUmVhZHlcbiAgICB2YXIgY3VycmVudERpdjtcbiAgICBcbiAgICB2YXIgaSA9IDA7XG4gICAgXG4gICAgdmFyIHRpbWVySWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgICBSYW5kb21Xb3JkKCk7XG4gICAgICBpKys7XG4gICAgICBpZiAoaSA8IDUpIHtcbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGljaywgMjAwMCk7ICAgIFxuICAgICAgfSAgZWxzZSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0O1xuICAgICAgfVxuICAgIH0sIDIwMDApO1xuXG4gICAgXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINGD0LTQsNC70Y/QtdGCINC/0YDQtdC00YvQtNGD0YnQuNC5INCx0LvQvtC6INGBINC30LDQv9GA0L7RgdC+0LxcbiAgICBmdW5jdGlvbiByZW1vdmVCTG9jayAoKSB7XG4gICAgICAgIHZhciBibG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFzb25yeV9faXRlbScpO1xuICAgICAgICBpZiAoYmxvY2tzLmxlbmd0aCA+IDYpIHtcbiAgICAgICAgICAgIHZhciBkZWxFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1hc29ucnlfX2l0ZW0nKTtcbiAgICAgICAgICAgIGRlbEVsZW0ucmVtb3ZlKCk7ICAgICBcbiAgICAgICAgfSBlbHNlIHt9XG4gICAgfTtcbiAgIFxuICAgIC8vINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQtNC+0LHQsNCy0LvRj9C10YIg0LHQu9C+0Log0YEg0L3QvtCy0YvQvCDQt9Cw0L/RgNC+0YHQvtC8XG4gICAgZnVuY3Rpb24gYWRkQmxvY2sgKCkge1xuICAgICAgICB2YXIgbW9zYWljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vc2FpYycpO1xuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGN1cnJlbnREaXYgPSBkaXY7XG4gICAgICAgIGRpdi5jbGFzc05hbWUgPSBcInRleHRfX2NvbnRhaW5lciBtYXNvbnJ5X19pdGVtXCI7XG4gICAgICAgIG1vc2FpYy5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICB2YXIgZGl2VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXZUZXh0LmNsYXNzTmFtZSA9IFwiaW5uZXJfX3RleHRcIjtcbiAgICAgICAgZGl2VGV4dC5pbm5lckhUTUwgPSB0ZXh0VmFsdWU7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChkaXZUZXh0KTtcbiAgICAgICAgaW1hZ2UoKTtcbiAgICB9O1xuXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC40L3QuNGG0LjQsNC70LjQt9C40YDRg9C10YIgTWFzb25yeVxuICAgIGZ1bmN0aW9uIG1hc29ucnkgKCkge1xuICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3NhaWMnKTtcbiAgICAgICAgdmFyIG1zbnJ5ID0gbmV3IE1hc29ucnkoIGVsZW0sIHtcbiAgICAgICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgICAgIGl0ZW1TZWxlY3RvcjogJy5tYXNvbnJ5X19pdGVtJyxcbiAgICAgICAgICAgIGNvbHVtbldpZHRoOiA1LFxuICAgICAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGFuaW1hdGlvbk9wdGlvbnM6IHsgXG4gICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsIFxuICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTsgICBcbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIGltYWdlICgpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciB1cmxRdWVyeSA9IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vY3VzdG9tc2VhcmNoL3YxP3E9XCIgKyB0ZXh0VmFsdWUgKyBcIiZjeD0wMTY3MzI2MjQ4MTY0NzEwNjE0Mjg6M2d0MnJjeG83bGsmaW1nU2l6ZT1tZWRpdW0mZmlsZVR5cGU9anBnJm51bT0xJnNlYXJjaFR5cGU9aW1hZ2UmaW1nRG9taW5hbnRDb2xvcj1waW5rJmtleT1BSXphU3lCbmNPazBPS0QwcDdTRXFwbkNuajY4bFpBbDB6cXh4dm9cIjtcbiAgICAgICAgXG4gICAgICAgIHZhciB4bWxSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhtbFJlcXVlc3Qub3BlbignR0VUJywgdXJsUXVlcnksIHRydWUpO1xuICAgICAgICB4bWxSZXF1ZXN0LnNlbmQoKTtcbiAgICAgICAgXG4gICAgICAgIHhtbFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHhtbFJlcXVlc3QucmVhZHlTdGF0ZSAhPSA0KSByZXR1cm47XG5cbiAgICAgICAgICBpZiAoeG1sUmVxdWVzdC5zdGF0dXMgIT0gMjAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcItCY0LfQvtCx0YDQsNC20LXQvdC40LUg0L/QviDQtNCw0L3QvdC+0LzRgyDQt9Cw0L/RgNC+0YHRgyDQvdC1INC/0L7Qu9GD0YfQtdC90L4gXCIgKyB4bWxSZXF1ZXN0LnN0YXR1cyArICc6ICcgKyB4bWxSZXF1ZXN0LnN0YXR1c1RleHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4bWxSZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgIHZhciBpbWFnZUxpbmsgPSBkYXRhLml0ZW1zWzBdLmxpbms7XG4gICAgICAgICAgICAgIHZhciBpbWFnZVdpZHRoID0gZGF0YS5pdGVtc1swXS5pbWFnZS53aWR0aDtcbiAgICAgICAgICAgICAgdmFyIGltYWdlaGVpZ2h0ID0gZGF0YS5pdGVtc1swXS5pbWFnZS5oZWlnaHQ7XG4gICAgICAgICAgICAgIHZhciByYXRpbyA9IGltYWdlV2lkdGggLyBpbWFnZWhlaWdodDtcbiAgICAgICAgICAgICAgaWYgKHJhdGlvID4gMikge1xuICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gNDQwO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IHJhdGlvICogMzEwOyAgXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIGN1cnJlbnREaXYuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgaW1hZ2VMaW5rICsgJyknO1xuICAgICAgICAgICAgICBjdXJyZW50RGl2LnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICBjdXJyZW50RGl2LnN0eWxlLmJhY2tncm91bmRTaXplID0gJ2F1dG8gMzEwcHgnO1xuICAgICAgICAgICAgICBtYXNvbnJ5KCk7ICAgIFxuICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgfTtcbiAgICBcbiAgICBcbiAgICBcbiAgICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0L/RgNC40LzQtdC90Y/QtdGC0YHRjyDQtNC70Y8g0L/QvtC40YHQutCwINGB0LvRg9GH0LDQudC90YvRhSDQutCw0YDRgtC40L3QvtC6XG4gICAgXG4gICAgZnVuY3Rpb24gUmFuZG9tV29yZCgpIHtcbiAgICAgIFxuICAgICAgICBmdW5jdGlvbiBqc29ucCh1cmwsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgY2FsbGJhY2tOYW1lID0gJ2pzb25wX2NhbGxiYWNrXycgKyBNYXRoLnJvdW5kKDEwMDAwMCAqIE1hdGgucmFuZG9tKCkpO1xuICAgICAgICAgICAgd2luZG93W2NhbGxiYWNrTmFtZV0gPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHdpbmRvd1tjYWxsYmFja05hbWVdO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgICAgIHNjcmlwdC5zcmMgPSB1cmwgKyAodXJsLmluZGV4T2YoJz8nKSA+PSAwID8gJyYnIDogJz8nKSArICdjYWxsYmFjaz0nICsgY2FsbGJhY2tOYW1lO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9XG5cbiAgICAgICAganNvbnAoJ2h0dHA6Ly9yYW5kb213b3JkLnNldGdldGdvLmNvbS9nZXQucGhwJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICB0ZXh0VmFsdWUgPSBkYXRhLldvcmQ7XG4gICAgICAgICAgICByZW1vdmVCTG9jaygpO1xuICAgICAgICAgICAgYWRkQmxvY2soKTtcbiAgICAgICAgICAgIG1hc29ucnkoKTtcbiAgICAgICAgfSk7ICAgXG4gICAgfTtcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbi8vICAgIGZ1bmN0aW9uIFJhbmRvbVdvcmQoKSB7XG4vLyAgICAgICAgXG4vLyAgICAgICAgdmFyIHJlcXVlc3RTdHIgPSBcImh0dHA6Ly9yYW5kb213b3JkLnNldGdldGdvLmNvbS9nZXQucGhwXCI7XG4vLyAgICAgICAgXG4vLyAgICAgICAgJC5hamF4KHtcbi8vICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcbi8vICAgICAgICAgICAgdXJsOiByZXF1ZXN0U3RyLFxuLy8gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiLFxuLy8gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbi8vICAgICAgICAgICAgICAgIHRleHRWYWx1ZSA9IHJlc3BvbnNlLldvcmQ7XG4vLyAgICAgICAgICAgICAgICByZW1vdmVCTG9jaygpO1xuLy8gICAgICAgICAgICAgICAgYWRkQmxvY2soKTtcbi8vICAgICAgICAgICAgICAgIG1hc29ucnkoKTtcbi8vICAgICAgICAgICAgfVxuLy8gICAgICAgIH0pO1xuLy8gICAgfTtcbiAgICBcbiAgICBcbiAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaF9fYnRuJyk7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkRWxlbWVudClcbiAgICBcbiAgICBmdW5jdGlvbiBhZGRFbGVtZW50IChldmVudCkge1xuICAgICAgICBcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8g0J/RgNC10LTQvtGC0LLRgNCw0YnQsNC10Lwg0LLRi9C/0L7Qu9C90LXQvdC40LUg0YHQvtCx0YvRgtC40Y8gXCLQn9C+INGD0LzQvtC70YfQsNC90LjRjlwiXG4gICAgICAgIFxuICAgICAgICAvL9Cf0L7Qu9GD0YfQsNC10Lwg0YDQuNGB0YPQvdC+0Log0YHQvtCz0LvQsNGB0L3QviDQt9Cw0L/RgNC+0YHRg1xuICAgICAgICBcbiAgICAgICAgdGV4dFZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaF9faW5wdXQnKS52YWx1ZTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0ZXh0VmFsdWUgPT0gMCkge1xuICAgICAgICAgICAgUmFuZG9tV29yZCgpOyBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbW92ZUJMb2NrKCk7XG4gICAgICAgICAgICBhZGRCbG9jaygpOyAgIFxuICAgICAgICAgICAgbWFzb25yeSgpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICB9O1xuICAgIFxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
