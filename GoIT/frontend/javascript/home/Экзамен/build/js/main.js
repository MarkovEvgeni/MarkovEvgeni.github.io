"use strict";document.addEventListener("DOMContentLoaded",function(){function e(){var e=document.querySelectorAll(".carousels__item--slides"),t=0-e[0].offsetWidth/3,n=2*t;e[1].style.left=t+"px",e[2].style.left=n+"px"}function t(e){var t=e.parentNode,n=(t.offsetWidth,t.querySelector(".carousels__item--slides"));n.offsetWidth,parseInt(getComputedStyle(n).left);e.addEventListener("mouseover",o),e.addEventListener("mouseout",s),e.addEventListener("click",i)}function n(e){var t=e.parentNode,n=(t.offsetWidth,t.querySelector(".carousels__item--slides"));n.offsetWidth,parseInt(getComputedStyle(n).left);e.addEventListener("mouseover",o),e.addEventListener("mouseout",s),e.addEventListener("click",r)}function o(){this.style.opacity=1,this.style.cursor="pointer"}function s(){this.style.opacity=.5,this.style.cursor="default"}function i(){var e=this.parentNode,t=e.offsetWidth,n=e.querySelector(".carousels__item--slides"),o=n.offsetWidth,s=parseInt(getComputedStyle(n).left);o+s-t==0&&(s=t),s-=t,n.style.left=s+"px"}function r(){var e=this.parentNode,t=e.offsetWidth,n=e.querySelector(".carousels__item--slides"),o=n.offsetWidth,s=parseInt(getComputedStyle(n).left);0==s&&(s=-o,console.log(s)),s+=t,n.style.left=s+"px"}window.onresize=e,e();var a=document.querySelectorAll(".next"),l=document.querySelectorAll(".prev");a.forEach(t),l.forEach(n)}),document.addEventListener("DOMContentLoaded",function(){function e(e,t,n){t=400,n=24;var o=n,s=t,i=s/o;e.preventDefault();var r=a.offsetHeight,d=c.offsetHeight;if(0==r){a.style.height=r+"px",a.classList.remove("non-visible");var u=setInterval(function(){if(i>0){var e=d/(s/o);r+=e,a.style.height=r+"px",i-=1}else clearInterval(u),l.innerHTML="Hide partners"},s/o)}else var u=setInterval(function(){if(i>0){var e=d/(s/o);r-=e,a.style.height=r+"px",i-=1}else clearInterval(u),a.classList.add("non-visible"),l.innerHTML="See other partners"},s/o)}function t(){var e=document.querySelectorAll(".masonry__item");if(e.length>6){var t=document.querySelector(".masonry__item");t.remove()}}function n(){var e=document.getElementsByClassName("mosaic"),t=document.createElement("div");u=t,t.className="text__container masonry__item",e[0].appendChild(t);var n=document.createElement("div");n.className="inner__text",n.innerHTML=d,t.appendChild(n),s()}function o(){var e=document.querySelector(".mosaic");new Masonry(e,{itemSelector:".masonry__item",columnWidth:5,isAnimated:!0,animationOptions:{queue:!1,duration:500}})}function s(){var e="https://www.googleapis.com/customsearch/v1?q="+d+"&cx=016732624816471061428:3gt2rcxo7lk&imgSize=medium&fileType=jpg&num=1&searchType=image&imgDominantColor=pink&key=AIzaSyBncOk0OKD0p7SEqpnCnj68lZAl0zqxxvo",t=new XMLHttpRequest;t.open("GET",e,!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState)if(200!=t.status)console.log("Изображение по данному запросу не получено "+t.status+": "+t.statusText);else{var e=JSON.parse(t.responseText),n=e.items[0].link,s=e.items[0].image.width,i=e.items[0].image.height,r=s/i;if(r>2)var a=440;else var a=310*r;u.style.backgroundImage="url("+n+")",u.style.width=a+"px",u.style.backgroundSize="auto 310px",o()}}}function i(){function e(e,t){var n="jsonp_callback_"+Math.round(1e5*Math.random());window[n]=function(e){delete window[n],document.body.removeChild(o),t(e)};var o=document.createElement("script");o.src=e+(e.indexOf("?")>=0?"&":"?")+"callback="+n,document.body.appendChild(o)}e("http://randomword.setgetgo.com/get.php",function(e){d=e.Word,t(),n(),o()})}function r(e){e.preventDefault(),d=document.getElementsByClassName("search__input")[0].value,0==d?i():(t(),n(),o())}var a=document.querySelector(".hidden-list"),l=document.querySelector(".partners__link"),c=document.querySelector(".etalon");l.addEventListener("click",e);var d,u,m=0,f=setTimeout(function e(){i(),m++,m<5?f=setTimeout(e,3e3):clearTimeout},2e3),p=document.getElementsByClassName("search__btn");p[0].addEventListener("click",r)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic2hpZnQiLCJzbGlkZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsInNsaWRlclNoaWZ0Iiwib2Zmc2V0V2lkdGgiLCJzbGlkZXJTaGlmdERvdWJsZSIsImNhbGN1bGF0ZU5leHQiLCJpdGVtIiwicGFyZW50IiwicGFyZW50Tm9kZSIsInRhcGUiLCJxdWVyeVNlbGVjdG9yIiwicGFyc2VJbnQiLCJnZXRDb21wdXRlZFN0eWxlIiwibGVmdCIsImhvdmVyIiwibm9Ib3ZlciIsInNsaWRlUmlnaHQiLCJ2aXNpYmxlUGFydCIsIndob2xlVGFwZSIsInNsaWRlTGVmdCIsInRoaXMiLCJzdHlsZSIsIm9wYWNpdHkiLCJjb25zb2xlIiwibG9nIiwid2luZG93Iiwib25yZXNpemUiLCJuZXh0QXJyIiwicHJldkFyciIsImZvckVhY2giLCJjYWxjdWxhdGVQcmV2Iiwic2hvd0J1dHRvbiIsInNob3dIaWRlQmxvY2siLCJlbCIsInByZXZlbnREZWZhdWx0IiwidCIsImYiLCJoZWlnaHQiLCJldGFsb25IZWlnaHQiLCJoaWRkZW5GcmllbmRzIiwiY2xhc3NMaXN0Iiwic3RlcHMiLCJvZmZzZXRIZWlnaHQiLCJzdGVwIiwicmVtb3ZlIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJpbm5lckhUTUwiLCJ0aW1lIiwiZnBzIiwiYWRkIiwicmVtb3ZlQkxvY2siLCJibG9ja3MiLCJtb3NhaWMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsImN1cnJlbnREaXYiLCJkaXZUZXh0IiwiYXBwZW5kQ2hpbGQiLCJpbWFnZSIsImNsYXNzTmFtZSIsImVsZW0iLCJtc25yeSIsIk1hc29ucnkiLCJpdGVtU2VsZWN0b3IiLCJxdWV1ZSIsImR1cmF0aW9uIiwiY29sdW1uV2lkdGgiLCJpc0FuaW1hdGVkIiwiYW5pbWF0aW9uT3B0aW9ucyIsInVybFF1ZXJ5IiwieG1sUmVxdWVzdCIsInRleHRWYWx1ZSIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNlbmQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJpdGVtcyIsImltYWdlaGVpZ2h0IiwicmF0aW8iLCJ3aWR0aCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJkYXRhIiwicmVzcG9uc2VUZXh0IiwiaW1hZ2VMaW5rIiwibGluayIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmRTaXplIiwibWFzb25yeSIsIlJhbmRvbVdvcmQiLCJqc29ucCIsInVybCIsImNhbGxiYWNrIiwiY2FsbGJhY2tOYW1lIiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiYWRkQmxvY2siLCJzY3JpcHQiLCJzcmMiLCJpbmRleE9mIiwiYm9keSIsIldvcmQiLCJhZGRFbGVtZW50IiwiZXZlbnQiLCJ2YWx1ZSIsImkiLCJ0aW1lcklkIiwic2V0VGltZW91dCIsInRpY2siLCJjbGVhclRpbWVvdXQiLCJkZWxFbGVtIiwiYnV0dG9uIl0sIm1hcHBpbmdzIjoiWUFBQUEsVUFBU0MsaUJBQWlCLG1CQUFvQixXQUUxQyxRQUFBQyxLQUdJLEdBQUlDLEdBQVVILFNBQVNJLGlCQUFpQiw0QkFENUNDLEVBQWtCLEVBQUFGLEVBQUEsR0FBQUcsWUFBQSxFQUNWSCxFQUFtQkMsRUFBQUEsQ0FDdkJELEdBQUlFLEdBQUFBLE1BQUFBLEtBQWtCRixFQUFXRyxLQUNqQ0gsRUFBSUksR0FBQUEsTUFBQUEsS0FBb0JGLEVBQXhCLEtBZ0JKLFFBQVNHLEdBQWVDLEdBQ3BCLEdBQUlDLEdBQVNELEVBQUtFLFdBRWRDLEdBRGNGLEVBQU9KLFlBQ2RJLEVBQU9HLGNBQWMsNEJBQ2hCRCxHQUFLTixZQUNWUSxTQUFTQyxpQkFBaUJILEdBQU1JLEtBSXZDUCxHQUFLUixpQkFBaUIsWUFBYWdCLEdBQ25DUixFQUFLUixpQkFBaUIsV0FBWWlCLEdBQ2xDVCxFQUFLUixpQkFBaUIsUUFBU2tCLEdBTW5DLFFBQUlULEdBQWNDLEdBQ2xCLEdBQUlT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QUFBQyxJQUFBUixHQUFBQSxFQUFBUyxRQUFBLE1BQUEsRUFBQSxJQUFBLEtBQUEsWUFBQVAsRUFDQW5HLFNBQUEyRyxLQUFBNUMsWUFBQXlDLEdBR0FSLEVBQUEseUNBQUEsU0FBQVIsR0FDQVgsRUFBQVcsRUFBQW9CLEtBQ0FyRCxJQUNBZ0QsSUFDQVQsTUEvTEEsUUFBQWUsR0FBQUMsR0E4TVFBLEVBQU16RSxpQkFJTndDLEVBQVk3RSxTQUFTMEQsdUJBQXVCLGlCQUFpQixHQUFHcUQsTUFFL0MsR0FBYmxDLEVBQ0FrQixLQUVBeEMsSUFDQWdELElBQ0FULEtBak5SLEdBQUFwRCxHQUFTUCxTQUFUdEIsY0FBa0MsZ0JBQzlCeUIsRUFBQXRDLFNBQUFhLGNBQUEsbUJBQ0EwQixFQUFBdkMsU0FBQWEsY0FBQSxVQUVBcUIsR0FBSWtCLGlCQUFKLFFBQUFqQixFQTJERjZFLElBQUFBLEdBQ0FuRCxFQUVDbUQsRUFGRCxFQUlDQyxFQUFBQyxXQUFBLFFBQUFDLEtBUFdwQixJQUVaaUIsSUFTRkEsRUFBQSxFQUNBQyxFQUFTMUQsV0FBZTRELEVBQUEsS0FFcEJDLGNBRUlDLEtBb0lBdkIsRUFBQUEsU0FBQUEsdUJBQUFBLGNBQ0h3QixHQUFBLEdBQUFySCxpQkFBQSxRQUFBNEciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gc2hpZnQgKCkge1xyXG4gICAgICAgIHZhciBzbGlkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcm91c2Vsc19faXRlbS0tc2xpZGVzJyk7XHJcbiAgICAgICAgdmFyIHNsaWRlclNoaWZ0ID0gMCAtIHNsaWRlcnNbMF0ub2Zmc2V0V2lkdGgvMztcclxuICAgICAgICB2YXIgc2xpZGVyU2hpZnREb3VibGUgPSBzbGlkZXJTaGlmdCAqIDI7XHJcbiAgICAgICAgc2xpZGVyc1sxXS5zdHlsZS5sZWZ0ID0gc2xpZGVyU2hpZnQrJ3B4JztcclxuICAgICAgICBzbGlkZXJzWzJdLnN0eWxlLmxlZnQgPSBzbGlkZXJTaGlmdERvdWJsZSsncHgnOyAgXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHdpbmRvdy5vbnJlc2l6ZSA9IHNoaWZ0O1xyXG4gICAgc2hpZnQoKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB2YXIgbmV4dEFyciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uZXh0Jyk7XHJcbiAgICB2YXIgcHJldkFyciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmV2Jyk7XHJcbiAgICBcclxuICAgIG5leHRBcnIuZm9yRWFjaChjYWxjdWxhdGVOZXh0KTtcclxuICAgIHByZXZBcnIuZm9yRWFjaChjYWxjdWxhdGVQcmV2KTtcclxuICAgICAgICBcclxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZU5leHQgKGl0ZW0pIHtcclxuICAgICAgICB2YXIgcGFyZW50ID0gaXRlbS5wYXJlbnROb2RlO1xyXG4gICAgICAgIHZhciB2aXNpYmxlUGFydCA9IHBhcmVudC5vZmZzZXRXaWR0aDtcclxuICAgICAgICB2YXIgdGFwZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWxzX19pdGVtLS1zbGlkZXMnKTtcclxuICAgICAgICB2YXIgd2hvbGVUYXBlID0gdGFwZS5vZmZzZXRXaWR0aDtcclxuICAgICAgICB2YXIgbGVmdCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUodGFwZSkubGVmdCk7XHJcbi8vICAgICAgICBpZiAod2hvbGVUYXBlK2xlZnQtdmlzaWJsZVBhcnQgPT0wKSB7XHJcbiAgICAgICAgICAgIFxyXG4vLyAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGhvdmVyKTtcclxuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgbm9Ib3Zlcik7XHJcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNsaWRlUmlnaHQpO1xyXG4vLyAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlUHJldiAoaXRlbSkge1xyXG4gICAgICAgIHZhciBwYXJlbnQgPSBpdGVtLnBhcmVudE5vZGU7XHJcbiAgICAgICAgdmFyIHZpc2libGVQYXJ0ID0gcGFyZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHZhciB0YXBlID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbHNfX2l0ZW0tLXNsaWRlcycpO1xyXG4gICAgICAgIHZhciB3aG9sZVRhcGUgPSB0YXBlLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHZhciBsZWZ0ID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZSh0YXBlKS5sZWZ0KTtcclxuLy8gICAgICAgIGlmIChsZWZ0ID09IDApIHtcclxuICAgICAgICAgICAgXHJcbi8vICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xyXG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBub0hvdmVyKTtcclxuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVMZWZ0KTtcclxuLy8gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gaG92ZXIgKCkge1xyXG4gICAgICAgIHRoaXMuc3R5bGUub3BhY2l0eSA9IDE7XHJcbiAgICAgICAgdGhpcy5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBub0hvdmVyICgpIHtcclxuICAgICAgICB0aGlzLnN0eWxlLm9wYWNpdHkgPSAwLjU7XHJcbiAgICAgICAgdGhpcy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzbGlkZVJpZ2h0ICgpIHtcclxuLy8gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBob3Zlcik7XHJcbi8vICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzbGlkZVJpZ2h0KTtcclxuLy8gICAgICAgIHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xyXG4vLyAgICAgICAgdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIG5vSG92ZXIpO1xyXG4vLyAgICAgICAgdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNsaWRlTGVmdCk7XHJcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcclxuICAgICAgICB2YXIgdmlzaWJsZVBhcnQgPSBwYXJlbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdmFyIHRhcGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLmNhcm91c2Vsc19faXRlbS0tc2xpZGVzJyk7XHJcbiAgICAgICAgdmFyIHdob2xlVGFwZSA9IHRhcGUub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdmFyIGxlZnQgPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHRhcGUpLmxlZnQpO1xyXG4gICAgICAgIGlmICh3aG9sZVRhcGUrbGVmdC12aXNpYmxlUGFydCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGxlZnQgPSB2aXNpYmxlUGFydDtcclxuLy8gICAgICAgICAgICB0aGlzLnN0eWxlLm9wYWNpdHkgPSAwLjU7XHJcbi8vICAgICAgICAgICAgdGhpcy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xyXG4vLyAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIG5vSG92ZXIpO1xyXG4vLyAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNsaWRlUmlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZWZ0ID0gbGVmdCAtIHZpc2libGVQYXJ0O1xyXG4gICAgICAgIHRhcGUuc3R5bGUubGVmdCA9IGxlZnQrJ3B4JztcclxuICAgIH07XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNsaWRlTGVmdCAoKSB7XHJcbi8vICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xyXG4vLyAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVMZWZ0KTtcclxuLy8gICAgICAgIHRoaXMucHJldmlvdXNFbGVtZW50U2libGluZy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGhvdmVyKTtcclxuLy8gICAgICAgIHRoaXMucHJldmlvdXNFbGVtZW50U2libGluZy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgbm9Ib3Zlcik7XHJcbi8vICAgICAgICB0aGlzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNsaWRlUmlnaHQpO1xyXG4gICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7XHJcbiAgICAgICAgdmFyIHZpc2libGVQYXJ0ID0gcGFyZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHZhciB0YXBlID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbHNfX2l0ZW0tLXNsaWRlcycpO1xyXG4gICAgICAgIHZhciB3aG9sZVRhcGUgPSB0YXBlLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHZhciBsZWZ0ID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZSh0YXBlKS5sZWZ0KTtcclxuICAgICAgICBpZiAobGVmdCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGxlZnQgPSAtIHdob2xlVGFwZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobGVmdCk7XHJcbi8vICAgICAgICAgICAgdGhpcy5zdHlsZS5vcGFjaXR5ID0gMC41O1xyXG4vLyAgICAgICAgICAgIHRoaXMuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGhvdmVyKTtcclxuLy8gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBub0hvdmVyKTtcclxuLy8gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzbGlkZUxlZnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZWZ0ID0gbGVmdCArIHZpc2libGVQYXJ0O1xyXG4gICAgICAgIHRhcGUuc3R5bGUubGVmdCA9IGxlZnQrJ3B4JztcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcblxyXG59KTtcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIFxyXG4gICAgdmFyIGhpZGRlbkZyaWVuZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGlkZGVuLWxpc3QnKTtcclxuICAgIHZhciBzaG93QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhcnRuZXJzX19saW5rJyk7XHJcbiAgICB2YXIgZXRhbG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmV0YWxvbicpO1xyXG4gICAgXHJcbiAgICBzaG93QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93SGlkZUJsb2NrKTtcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gc2hvd0hpZGVCbG9jayAoZWwsIHQsIGYpIHtcclxuICAgICAgICB0ID0gNDAwO1xyXG4gICAgICAgIGYgPSAyNDtcclxuICAgICAgICB2YXIgZnBzID0gZjtcclxuICAgICAgICB2YXIgdGltZSA9IHQ7XHJcbiAgICAgICAgdmFyIHN0ZXBzID0gdGltZSAvIGZwcztcclxuICAgICAgICBlbC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBoZWlnaHQgPSBoaWRkZW5GcmllbmRzLm9mZnNldEhlaWdodDtcclxuICAgICAgICB2YXIgZXRhbG9uSGVpZ2h0ID0gZXRhbG9uLm9mZnNldEhlaWdodDtcclxuICAgICAgICBpZiAoaGVpZ2h0ID09IDApIHtcclxuICAgICAgICAgICAgaGlkZGVuRnJpZW5kcy5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIGhpZGRlbkZyaWVuZHMuY2xhc3NMaXN0LnJlbW92ZSgnbm9uLXZpc2libGUnKTtcclxuICAgICAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0ZXBzPjApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RlcCA9IGV0YWxvbkhlaWdodCAvICh0aW1lL2Zwcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ICs9IHN0ZXA7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuRnJpZW5kcy5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RlcHMgLT0gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0J1dHRvbi5pbm5lckhUTUwgPSAnSGlkZSBwYXJ0bmVycyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHRpbWUvZnBzKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdGVwcz4wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ZXAgPSBldGFsb25IZWlnaHQgLyAodGltZS9mcHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCAtPSBzdGVwO1xyXG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbkZyaWVuZHMuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0ZXBzIC09IDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbkZyaWVuZHMuY2xhc3NMaXN0LmFkZCgnbm9uLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzaG93QnV0dG9uLmlubmVySFRNTCA9ICdTZWUgb3RoZXIgcGFydG5lcnMnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB0aW1lL2ZwcylcclxuICAgICAgICB9ICBcclxuICAgIH1cclxuICAgIFxyXG5cclxuLy8g0KDQtdCw0LvQuNC30LDRhtC40Y8g0YEg0L/QvtC80L7RidGM0Y4galF1ZXJ5ICAgIFxyXG4vLyAgICB2YXIgaGlkZGVuRnJpZW5kcyA9ICQoJy5oaWRkZW4tbGlzdCcpWzBdO1xyXG4vLyAgICB2YXIgc2hvd0J1dHRvbiA9ICQoJy5wYXJ0bmVyc19fbGluaycpWzBdO1xyXG4vLyAgICAkKHNob3dCdXR0b24pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuLy8gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuLy8gICAgICAgIGlmICgkKGhpZGRlbkZyaWVuZHMpLmhhc0NsYXNzKFwib3BlblwiKSkge1xyXG4vLyAgICAgICAgICAgICQoaGlkZGVuRnJpZW5kcykucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpO1xyXG4vLyAgICAgICAgICAgICQoaGlkZGVuRnJpZW5kcykuc2xpZGVVcCgzMDApO1xyXG4vLyAgICAgICAgICAgICQodGhpcykuaHRtbCgnU2VlIG90aGVyIHBhcnRuZXJzJyk7XHJcbi8vICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgICAgICQoaGlkZGVuRnJpZW5kcykuYWRkQ2xhc3MoXCJvcGVuXCIpO1xyXG4vLyAgICAgICAgICAgICQoaGlkZGVuRnJpZW5kcykuc2xpZGVEb3duKDMwMCk7XHJcbi8vICAgICAgICAgICAgJCh0aGlzKS5odG1sKCdIaWRlIHBhcnRuZXJzJyk7XHJcbi8vICAgICAgICB9XHJcbi8vICAgIH0pO1xyXG4gICAgXHJcbiAgICB2YXIgdGV4dFZhbHVlOyAvL9Ce0LHRitGP0LLQu9C10Lwg0LPQu9C+0LHQsNC70YzQvdC+0LUg0LfQvdCw0YfQtdC90LjQtSDQsiDRgNCw0LzQutCw0YUgZG9jdW1lbnQuUmVhZHlcclxuICAgIHZhciBjdXJyZW50RGl2O1xyXG4gICAgXHJcbiAgICB2YXIgaSA9IDA7XHJcbiAgICBcclxuICAgIHZhciB0aW1lcklkID0gc2V0VGltZW91dChmdW5jdGlvbiB0aWNrKCkge1xyXG4gICAgICBSYW5kb21Xb3JkKCk7XHJcbiAgICAgIGkrKztcclxuICAgICAgaWYgKGkgPCA1KSB7XHJcbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGljaywgMzAwMCk7ICAgIFxyXG4gICAgICB9ICBlbHNlIHtcclxuICAgICAgICAgIGNsZWFyVGltZW91dDtcclxuICAgICAgfVxyXG4gICAgfSwgMjAwMCk7XHJcblxyXG4gICAgXHJcbiAgICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0YPQtNCw0LvRj9C10YIg0L/RgNC10LTRi9C00YPRidC40Lkg0LHQu9C+0Log0YEg0LfQsNC/0YDQvtGB0L7QvFxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlQkxvY2sgKCkge1xyXG4gICAgICAgIHZhciBibG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFzb25yeV9faXRlbScpO1xyXG4gICAgICAgIGlmIChibG9ja3MubGVuZ3RoID4gNikge1xyXG4gICAgICAgICAgICB2YXIgZGVsRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXNvbnJ5X19pdGVtJyk7XHJcbiAgICAgICAgICAgIGRlbEVsZW0ucmVtb3ZlKCk7ICAgICBcclxuICAgICAgICB9IGVsc2Uge31cclxuICAgIH07XHJcbiAgIFxyXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC00L7QsdCw0LLQu9GP0LXRgiDQsdC70L7QuiDRgSDQvdC+0LLRi9C8INC30LDQv9GA0L7RgdC+0LxcclxuICAgIGZ1bmN0aW9uIGFkZEJsb2NrICgpIHtcclxuICAgICAgICB2YXIgbW9zYWljID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9zYWljJyk7XHJcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGN1cnJlbnREaXYgPSBkaXY7XHJcbiAgICAgICAgZGl2LmNsYXNzTmFtZSA9IFwidGV4dF9fY29udGFpbmVyIG1hc29ucnlfX2l0ZW1cIjtcclxuICAgICAgICBtb3NhaWNbMF0uYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICB2YXIgZGl2VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGRpdlRleHQuY2xhc3NOYW1lID0gXCJpbm5lcl9fdGV4dFwiO1xyXG4gICAgICAgIGRpdlRleHQuaW5uZXJIVE1MID0gdGV4dFZhbHVlO1xyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChkaXZUZXh0KTtcclxuICAgICAgICBpbWFnZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0LjQvdC40YbQuNCw0LvQuNC30LjRgNGD0LXRgiBNYXNvbnJ5XHJcbiAgICBmdW5jdGlvbiBtYXNvbnJ5ICgpIHtcclxuICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3NhaWMnKTtcclxuICAgICAgICB2YXIgbXNucnkgPSBuZXcgTWFzb25yeSggZWxlbSwge1xyXG4gICAgICAgICAgICAvLyBvcHRpb25zXHJcbiAgICAgICAgICAgIGl0ZW1TZWxlY3RvcjogJy5tYXNvbnJ5X19pdGVtJyxcclxuICAgICAgICAgICAgY29sdW1uV2lkdGg6IDUsXHJcbiAgICAgICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGFuaW1hdGlvbk9wdGlvbnM6IHsgXHJcbiAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSwgXHJcbiAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pOyAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gaW1hZ2UgKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciB1cmxRdWVyeSA9IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vY3VzdG9tc2VhcmNoL3YxP3E9XCIgKyB0ZXh0VmFsdWUgKyBcIiZjeD0wMTY3MzI2MjQ4MTY0NzEwNjE0Mjg6M2d0MnJjeG83bGsmaW1nU2l6ZT1tZWRpdW0mZmlsZVR5cGU9anBnJm51bT0xJnNlYXJjaFR5cGU9aW1hZ2UmaW1nRG9taW5hbnRDb2xvcj1waW5rJmtleT1BSXphU3lCbmNPazBPS0QwcDdTRXFwbkNuajY4bFpBbDB6cXh4dm9cIjtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgeG1sUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHhtbFJlcXVlc3Qub3BlbignR0VUJywgdXJsUXVlcnksIHRydWUpO1xyXG4gICAgICAgIHhtbFJlcXVlc3Quc2VuZCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHhtbFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoeG1sUmVxdWVzdC5yZWFkeVN0YXRlICE9IDQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICBpZiAoeG1sUmVxdWVzdC5zdGF0dXMgIT0gMjAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi0JjQt9C+0LHRgNCw0LbQtdC90LjQtSDQv9C+INC00LDQvdC90L7QvNGDINC30LDQv9GA0L7RgdGDINC90LUg0L/QvtC70YPRh9C10L3QviBcIiArIHhtbFJlcXVlc3Quc3RhdHVzICsgJzogJyArIHhtbFJlcXVlc3Quc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4bWxSZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgdmFyIGltYWdlTGluayA9IGRhdGEuaXRlbXNbMF0ubGluaztcclxuICAgICAgICAgICAgICB2YXIgaW1hZ2VXaWR0aCA9IGRhdGEuaXRlbXNbMF0uaW1hZ2Uud2lkdGg7XHJcbiAgICAgICAgICAgICAgdmFyIGltYWdlaGVpZ2h0ID0gZGF0YS5pdGVtc1swXS5pbWFnZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgdmFyIHJhdGlvID0gaW1hZ2VXaWR0aCAvIGltYWdlaGVpZ2h0O1xyXG4gICAgICAgICAgICAgIGlmIChyYXRpbyA+IDIpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gNDQwO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSByYXRpbyAqIDMxMDsgIFxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgY3VycmVudERpdi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBpbWFnZUxpbmsgKyAnKSc7XHJcbiAgICAgICAgICAgICAgY3VycmVudERpdi5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcclxuICAgICAgICAgICAgICBjdXJyZW50RGl2LnN0eWxlLmJhY2tncm91bmRTaXplID0gJ2F1dG8gMzEwcHgnO1xyXG4gICAgICAgICAgICAgIG1hc29ucnkoKTsgICAgXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIC8vINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQv9GA0LjQvNC10L3Rj9C10YLRgdGPINC00LvRjyDQv9C+0LjRgdC60LAg0YHQu9GD0YfQsNC50L3Ri9GFINC60LDRgNGC0LjQvdC+0LpcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gUmFuZG9tV29yZCgpIHtcclxuICAgICAgXHJcbiAgICAgICAgZnVuY3Rpb24ganNvbnAodXJsLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2tOYW1lID0gJ2pzb25wX2NhbGxiYWNrXycgKyBNYXRoLnJvdW5kKDEwMDAwMCAqIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgICAgICAgICB3aW5kb3dbY2FsbGJhY2tOYW1lXSA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbY2FsbGJhY2tOYW1lXTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgICAgICBzY3JpcHQuc3JjID0gdXJsICsgKHVybC5pbmRleE9mKCc/JykgPj0gMCA/ICcmJyA6ICc/JykgKyAnY2FsbGJhY2s9JyArIGNhbGxiYWNrTmFtZTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAganNvbnAoJ2h0dHA6Ly9yYW5kb213b3JkLnNldGdldGdvLmNvbS9nZXQucGhwJywgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgIHRleHRWYWx1ZSA9IGRhdGEuV29yZDtcclxuICAgICAgICAgICAgcmVtb3ZlQkxvY2soKTtcclxuICAgICAgICAgICAgYWRkQmxvY2soKTtcclxuICAgICAgICAgICAgbWFzb25yeSgpO1xyXG4gICAgICAgIH0pOyAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbi8vICAgIGZ1bmN0aW9uIFJhbmRvbVdvcmQoKSB7XHJcbi8vICAgICAgICBcclxuLy8gICAgICAgIHZhciByZXF1ZXN0U3RyID0gXCJodHRwOi8vcmFuZG9td29yZC5zZXRnZXRnby5jb20vZ2V0LnBocFwiO1xyXG4vLyAgICAgICAgXHJcbi8vICAgICAgICAkLmFqYXgoe1xyXG4vLyAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbi8vICAgICAgICAgICAgdXJsOiByZXF1ZXN0U3RyLFxyXG4vLyAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25wXCIsXHJcbi8vICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbi8vICAgICAgICAgICAgICAgIHRleHRWYWx1ZSA9IHJlc3BvbnNlLldvcmQ7XHJcbi8vICAgICAgICAgICAgICAgIHJlbW92ZUJMb2NrKCk7XHJcbi8vICAgICAgICAgICAgICAgIGFkZEJsb2NrKCk7XHJcbi8vICAgICAgICAgICAgICAgIG1hc29ucnkoKTtcclxuLy8gICAgICAgICAgICB9XHJcbi8vICAgICAgICB9KTtcclxuLy8gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2VhcmNoX19idG4nKTtcclxuICAgIGJ1dHRvblswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZEVsZW1lbnQpXHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGFkZEVsZW1lbnQgKGV2ZW50KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8g0J/RgNC10LTQvtGC0LLRgNCw0YnQsNC10Lwg0LLRi9C/0L7Qu9C90LXQvdC40LUg0YHQvtCx0YvRgtC40Y8gXCLQn9C+INGD0LzQvtC70YfQsNC90LjRjlwiXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy/Qn9C+0LvRg9GH0LDQtdC8INGA0LjRgdGD0L3QvtC6INGB0L7Qs9C70LDRgdC90L4g0LfQsNC/0YDQvtGB0YNcclxuICAgICAgICBcclxuICAgICAgICB0ZXh0VmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzZWFyY2hfX2lucHV0JylbMF0udmFsdWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRleHRWYWx1ZSA9PSAwKSB7XHJcbiAgICAgICAgICAgIFJhbmRvbVdvcmQoKTsgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVtb3ZlQkxvY2soKTtcclxuICAgICAgICAgICAgYWRkQmxvY2soKTsgICBcclxuICAgICAgICAgICAgbWFzb25yeSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICB9O1xyXG4gICAgXHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
