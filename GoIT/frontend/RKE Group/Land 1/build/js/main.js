"use strict";document.addEventListener("DOMContentLoaded",function(){function e(){var e=document.querySelectorAll(".carousels__item--slides"),t=0-e[0].offsetWidth/3,n=2*t;e[1].style.left=t+"px",e[2].style.left=n+"px"}function t(e){var t=e.parentNode,n=(t.offsetWidth,t.querySelector(".carousels__item--slides"));n.offsetWidth,parseInt(getComputedStyle(n).left);e.addEventListener("mouseover",o),e.addEventListener("mouseout",r),e.addEventListener("click",i)}function n(e){var t=e.parentNode,n=(t.offsetWidth,t.querySelector(".carousels__item--slides"));n.offsetWidth,parseInt(getComputedStyle(n).left);e.addEventListener("mouseover",o),e.addEventListener("mouseout",r),e.addEventListener("click",s)}function o(){this.style.opacity=1,this.style.cursor="pointer"}function r(){this.style.opacity=.5,this.style.cursor="default"}function i(){var e=this.parentNode,t=e.offsetWidth,n=e.querySelector(".carousels__item--slides"),o=n.offsetWidth,r=parseInt(getComputedStyle(n).left);o+r-t==0&&(r=t),r-=t,n.style.left=r+"px"}function s(){var e=this.parentNode,t=e.offsetWidth,n=e.querySelector(".carousels__item--slides"),o=n.offsetWidth,r=parseInt(getComputedStyle(n).left);0==r&&(r=-o),r+=t,n.style.left=r+"px"}window.onresize=e,e();for(var a=document.querySelectorAll(".next"),l=document.querySelectorAll(".prev"),c=0;c<a.length;++c)t(a[c]);for(var c=0;c<l.length;++c)n(l[c])}),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),document.addEventListener("DOMContentLoaded",function(){function e(e,r,i){r=400,i=24;var s=i,a=r,l=a/s;e.preventDefault();var c=t.offsetHeight,d=o.offsetHeight;if(0==c){t.style.height=c+"px",t.classList.remove("non-visible");var u=setInterval(function(){if(l>0){var e=d/(a/s);c+=e,t.style.height=c+"px",l-=1}else clearInterval(u),n.innerHTML="Hide partners"},a/s)}else var u=setInterval(function(){if(l>0){var e=d/(a/s);c-=e,t.style.height=c+"px",l-=1}else clearInterval(u),t.classList.add("non-visible"),n.innerHTML="See other partners"},a/s)}var t=document.querySelector(".hidden-list"),n=document.querySelector(".partners__link"),o=document.querySelector(".etalon");n.addEventListener("click",e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,o;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),o=0;o<i;){var s;o in r&&(s=r[o],e.call(n,s,o,r)),o++}}),document.addEventListener("DOMContentLoaded",function(){function e(){var e=document.querySelectorAll(".masonry__item");if(e.length>6){var t=document.querySelector(".masonry__item");t.remove()}}function t(){var e=document.querySelector(".mosaic"),t=document.createElement("div");a=t,t.className="text__container masonry__item",e.appendChild(t);var n=document.createElement("div");n.className="inner__text",n.innerHTML=s,t.appendChild(n),o()}function n(){var e=document.querySelector(".mosaic");new Masonry(e,{itemSelector:".masonry__item",columnWidth:5,isAnimated:!0,animationOptions:{queue:!1,duration:500}})}function o(){var e="https://www.googleapis.com/customsearch/v1?q="+s+"&cx=016732624816471061428:3gt2rcxo7lk&imgSize=medium&fileType=jpg&num=1&searchType=image&imgDominantColor=pink&key=AIzaSyBncOk0OKD0p7SEqpnCnj68lZAl0zqxxvo",t=new XMLHttpRequest;t.open("GET",e,!0),t.send(),t.onreadystatechange=function(){if(4==t.readyState)if(200!=t.status)console.log("Изображение по данному запросу не получено "+t.status+": "+t.statusText);else{var e=JSON.parse(t.responseText),o=e.items[0].link,r=e.items[0].image.width,i=e.items[0].image.height,s=r/i;if(s>2)var l=440;else var l=310*s;a.style.backgroundImage="url("+o+")",a.style.width=l+"px",a.style.backgroundSize="auto 310px",n()}}}function r(){function o(e,t){var n="jsonp_callback_"+Math.round(1e5*Math.random());window[n]=function(e){window[n]=null,document.body.removeChild(o),t(e)};var o=document.createElement("script");o.src=e+(e.indexOf("?")>=0?"&":"?")+"callback="+n,document.body.appendChild(o)}o("http://randomword.setgetgo.com/get.php",function(o){s=o.Word,e(),t(),n()})}function i(o){o.preventDefault(),s=document.querySelector(".search__input").value,0==s?r():(e(),t(),n())}var s,a,l=0,c=setTimeout(function e(){l<5?(r(),l++,c=setTimeout(e,2e3)):clearTimeout(c)},2e3),d=document.querySelector(".search__btn");d.addEventListener("click",i)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic2hpZnQiLCJzbGlkZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsInNsaWRlclNoaWZ0Iiwib2Zmc2V0V2lkdGgiLCJzbGlkZXJTaGlmdERvdWJsZSIsImNhbGN1bGF0ZU5leHQiLCJpdGVtIiwicGFyZW50IiwicGFyZW50Tm9kZSIsInRhcGUiLCJxdWVyeVNlbGVjdG9yIiwicGFyc2VJbnQiLCJnZXRDb21wdXRlZFN0eWxlIiwibGVmdCIsImhvdmVyIiwibm9Ib3ZlciIsInNsaWRlUmlnaHQiLCJ2aXNpYmxlUGFydCIsIndob2xlVGFwZSIsInNsaWRlTGVmdCIsInRoaXMiLCJzdHlsZSIsIm9wYWNpdHkiLCJFbGVtZW50IiwicHJvdG90eXBlIiwid2luZG93Iiwib25yZXNpemUiLCJuZXh0QXJyIiwicHJldkFyciIsImkiLCJsZW5ndGgiLCJjYWxjdWxhdGVQcmV2IiwicmVtb3ZlIiwicmVtb3ZlQ2hpbGQiLCJoZWlnaHQiLCJoaWRkZW5GcmllbmRzIiwib2Zmc2V0SGVpZ2h0IiwidCIsImV0YWxvbkhlaWdodCIsImYiLCJzdGVwcyIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJlbCIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NMaXN0IiwiY2xlYXJJbnRlcnZhbCIsInNob3dCdXR0b24iLCJzdGVwIiwidGltZSIsImZwcyIsImlubmVySFRNTCIsImFkZCIsImV0YWxvbiIsInNob3dIaWRlQmxvY2siLCJBcnJheSIsImZvckVhY2giLCJPYmplY3QiLCJjYWxsYmFjayIsInRoaXNBcmciLCJUIiwiayIsImxlbiIsIlR5cGVFcnJvciIsIk8iLCJhcmd1bWVudHMiLCJrVmFsdWUiLCJtb3NhaWMiLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwiY3VycmVudERpdiIsImNsYXNzTmFtZSIsImFwcGVuZENoaWxkIiwiaW1hZ2UiLCJlbGVtIiwibXNucnkiLCJkaXZUZXh0IiwiaXRlbVNlbGVjdG9yIiwidGV4dFZhbHVlIiwiY29sdW1uV2lkdGgiLCJpc0FuaW1hdGVkIiwibWFzb25yeSIsIk1hc29ucnkiLCJ1cmxRdWVyeSIsImFuaW1hdGlvbk9wdGlvbnMiLCJ4bWxSZXF1ZXN0IiwiY29uc29sZSIsImRhdGEiLCJKU09OIiwib3BlbiIsImltYWdlTGluayIsIml0ZW1zIiwic2VuZCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsImltYWdlV2lkdGgiLCJyYXRpbyIsInN0YXR1cyIsImxvZyIsIndpZHRoIiwic3RhdHVzVGV4dCIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmRTaXplIiwiaW1hZ2VoZWlnaHQiLCJSYW5kb21Xb3JkIiwidXJsIiwicmVtb3ZlQkxvY2siLCJhZGRCbG9jayIsImJvZHkiLCJzY3JpcHQiLCJzcmMiLCJpbmRleE9mIiwiY2FsbGJhY2tOYW1lIiwianNvbnAiLCJXb3JkIiwiYWRkRWxlbWVudCIsImV2ZW50IiwidmFsdWUiLCJ0aW1lcklkIiwic2V0VGltZW91dCIsInRpY2siLCJibG9ja3MiLCJkZWxFbGVtIiwiYnV0dG9uIl0sIm1hcHBpbmdzIjoiWUFBQUEsVUFBU0MsaUJBQWlCLG1CQUFvQixXQUUxQyxRQUFBQyxLQUdJLEdBQUlDLEdBQVVILFNBQVNJLGlCQUFpQiw0QkFENUNDLEVBQWtCLEVBQUFGLEVBQUEsR0FBQUcsWUFBQSxFQUNWSCxFQUFtQkMsRUFBQUEsQ0FDdkJELEdBQUlFLEdBQUFBLE1BQUFBLEtBQWtCRixFQUFXRyxLQUNqQ0gsRUFBSUksR0FBQUEsTUFBQUEsS0FBb0JGLEVBQXhCLEtBd0JKLFFBQVNHLEdBQWVDLEdBQ3BCLEdBQUlDLEdBQVNELEVBQUtFLFdBRWRDLEdBRGNGLEVBQU9KLFlBQ2RJLEVBQU9HLGNBQWMsNEJBQ2hCRCxHQUFLTixZQUNWUSxTQUFTQyxpQkFBaUJILEdBQU1JLEtBSXZDUCxHQUFLUixpQkFBaUIsWUFBYWdCLEdBQ25DUixFQUFLUixpQkFBaUIsV0FBWWlCLEdBQ2xDVCxFQUFLUixpQkFBaUIsUUFBU2tC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QixLQUVBRSxJQUNBQyxJQUNBekIsS0FqSkpwRCxHQUFBQSxHQUNBd0YsRUFHRHhGLEVBQUEsRUFQQ3dGLEVBQVVDLFdBQVcsUUFBU0MsS0FXbEMxRixFQUFBLEdBQ0EwRSxJQUNJMUUsSUFDQXdGLEVBQUlHLFdBQUpELEVBQXVCLE1BRW5CRSxhQUFRekYsSUFFZixLQXFJQTBGLEVBQUE3SCxTQUFBYSxjQUFBLGVBL0pMZ0gsR0FBQTVILGlCQUFBLFFBQUFvSCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIFxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzaGlmdCAoKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2Fyb3VzZWxzX19pdGVtLS1zbGlkZXMnKTtcclxuICAgICAgICB2YXIgc2xpZGVyU2hpZnQgPSAwIC0gc2xpZGVyc1swXS5vZmZzZXRXaWR0aC8zO1xyXG4gICAgICAgIHZhciBzbGlkZXJTaGlmdERvdWJsZSA9IHNsaWRlclNoaWZ0ICogMjtcclxuICAgICAgICBzbGlkZXJzWzFdLnN0eWxlLmxlZnQgPSBzbGlkZXJTaGlmdCsncHgnO1xyXG4gICAgICAgIHNsaWRlcnNbMl0uc3R5bGUubGVmdCA9IHNsaWRlclNoaWZ0RG91YmxlKydweCc7ICBcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgd2luZG93Lm9ucmVzaXplID0gc2hpZnQ7XHJcbiAgICBzaGlmdCgpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIHZhciBuZXh0QXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5leHQnKTtcclxuICAgIHZhciBwcmV2QXJyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByZXYnKTtcclxuICAgIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXh0QXJyLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgY2FsY3VsYXRlTmV4dChuZXh0QXJyW2ldKTtcclxuICAgIH07ICAgXHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJldkFyci5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGNhbGN1bGF0ZVByZXYocHJldkFycltpXSk7XHJcbiAgICB9OyAgIFxyXG4gICAgXHJcbi8vICAgIG5leHRBcnIuZm9yRWFjaChjYWxjdWxhdGVOZXh0KTsgZm9yRWFjaCDQvdC1INGA0LDQsdC+0LDQtdGCINGBINC+0LHRitC10LrRgtCw0LzQuCBOb2RlTGlzdCDQsiBJRThcclxuLy8gICAgcHJldkFyci5mb3JFYWNoKGNhbGN1bGF0ZVByZXYpOyBmb3JFYWNoINC90LUg0YDQsNCx0L7QsNC10YIg0YEg0L7QsdGK0LXQutGC0LDQvNC4IE5vZGVMaXN0INCyIElFOFxyXG4gICAgICAgIFxyXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlTmV4dCAoaXRlbSkge1xyXG4gICAgICAgIHZhciBwYXJlbnQgPSBpdGVtLnBhcmVudE5vZGU7XHJcbiAgICAgICAgdmFyIHZpc2libGVQYXJ0ID0gcGFyZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHZhciB0YXBlID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbHNfX2l0ZW0tLXNsaWRlcycpO1xyXG4gICAgICAgIHZhciB3aG9sZVRhcGUgPSB0YXBlLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHZhciBsZWZ0ID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZSh0YXBlKS5sZWZ0KTtcclxuLy8gICAgICAgIGlmICh3aG9sZVRhcGUrbGVmdC12aXNpYmxlUGFydCA9PTApIHtcclxuICAgICAgICAgICAgXHJcbi8vICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xyXG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBub0hvdmVyKTtcclxuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVSaWdodCk7XHJcbi8vICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVQcmV2IChpdGVtKSB7XHJcbiAgICAgICAgdmFyIHBhcmVudCA9IGl0ZW0ucGFyZW50Tm9kZTtcclxuICAgICAgICB2YXIgdmlzaWJsZVBhcnQgPSBwYXJlbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdmFyIHRhcGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLmNhcm91c2Vsc19faXRlbS0tc2xpZGVzJyk7XHJcbiAgICAgICAgdmFyIHdob2xlVGFwZSA9IHRhcGUub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdmFyIGxlZnQgPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHRhcGUpLmxlZnQpO1xyXG4vLyAgICAgICAgaWYgKGxlZnQgPT0gMCkge1xyXG4gICAgICAgICAgICBcclxuLy8gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBob3Zlcik7XHJcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIG5vSG92ZXIpO1xyXG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzbGlkZUxlZnQpO1xyXG4vLyAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBob3ZlciAoKSB7XHJcbiAgICAgICAgdGhpcy5zdHlsZS5vcGFjaXR5ID0gMTtcclxuICAgICAgICB0aGlzLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcclxuICAgIH07XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIG5vSG92ZXIgKCkge1xyXG4gICAgICAgIHRoaXMuc3R5bGUub3BhY2l0eSA9IDAuNTtcclxuICAgICAgICB0aGlzLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcclxuICAgIH07XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNsaWRlUmlnaHQgKCkge1xyXG4vLyAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGhvdmVyKTtcclxuLy8gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNsaWRlUmlnaHQpO1xyXG4vLyAgICAgICAgdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBob3Zlcik7XHJcbi8vICAgICAgICB0aGlzLm5leHRFbGVtZW50U2libGluZy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgbm9Ib3Zlcik7XHJcbi8vICAgICAgICB0aGlzLm5leHRFbGVtZW50U2libGluZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVMZWZ0KTtcclxuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xyXG4gICAgICAgIHZhciB2aXNpYmxlUGFydCA9IHBhcmVudC5vZmZzZXRXaWR0aDtcclxuICAgICAgICB2YXIgdGFwZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWxzX19pdGVtLS1zbGlkZXMnKTtcclxuICAgICAgICB2YXIgd2hvbGVUYXBlID0gdGFwZS5vZmZzZXRXaWR0aDtcclxuICAgICAgICB2YXIgbGVmdCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUodGFwZSkubGVmdCk7XHJcbiAgICAgICAgaWYgKHdob2xlVGFwZStsZWZ0LXZpc2libGVQYXJ0ID09IDApIHtcclxuICAgICAgICAgICAgbGVmdCA9IHZpc2libGVQYXJ0O1xyXG4vLyAgICAgICAgICAgIHRoaXMuc3R5bGUub3BhY2l0eSA9IDAuNTtcclxuLy8gICAgICAgICAgICB0aGlzLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcclxuICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBob3Zlcik7XHJcbi8vICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgbm9Ib3Zlcik7XHJcbi8vICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVSaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxlZnQgPSBsZWZ0IC0gdmlzaWJsZVBhcnQ7XHJcbiAgICAgICAgdGFwZS5zdHlsZS5sZWZ0ID0gbGVmdCsncHgnO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gc2xpZGVMZWZ0ICgpIHtcclxuLy8gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBob3Zlcik7XHJcbi8vICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzbGlkZUxlZnQpO1xyXG4vLyAgICAgICAgdGhpcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaG92ZXIpO1xyXG4vLyAgICAgICAgdGhpcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBub0hvdmVyKTtcclxuLy8gICAgICAgIHRoaXMucHJldmlvdXNFbGVtZW50U2libGluZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVSaWdodCk7XHJcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcclxuICAgICAgICB2YXIgdmlzaWJsZVBhcnQgPSBwYXJlbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdmFyIHRhcGUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLmNhcm91c2Vsc19faXRlbS0tc2xpZGVzJyk7XHJcbiAgICAgICAgdmFyIHdob2xlVGFwZSA9IHRhcGUub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdmFyIGxlZnQgPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKHRhcGUpLmxlZnQpO1xyXG4gICAgICAgIGlmIChsZWZ0ID09IDApIHtcclxuICAgICAgICAgICAgbGVmdCA9IC0gd2hvbGVUYXBlO1xyXG4vLyAgICAgICAgICAgIHRoaXMuc3R5bGUub3BhY2l0eSA9IDAuNTtcclxuLy8gICAgICAgICAgICB0aGlzLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcclxuICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBob3Zlcik7XHJcbi8vICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgbm9Ib3Zlcik7XHJcbi8vICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2xpZGVMZWZ0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGVmdCA9IGxlZnQgKyB2aXNpYmxlUGFydDtcclxuICAgICAgICB0YXBlLnN0eWxlLmxlZnQgPSBsZWZ0KydweCc7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG5cclxufSk7XHJcbmlmICghKCdyZW1vdmUnIGluIEVsZW1lbnQucHJvdG90eXBlKSkge1xyXG4gICAgRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgXHJcbiAgICB2YXIgaGlkZGVuRnJpZW5kcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oaWRkZW4tbGlzdCcpO1xyXG4gICAgdmFyIHNob3dCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFydG5lcnNfX2xpbmsnKTtcclxuICAgIHZhciBldGFsb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXRhbG9uJyk7XHJcbiAgICBcclxuICAgIHNob3dCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dIaWRlQmxvY2spO1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzaG93SGlkZUJsb2NrIChlbCwgdCwgZikge1xyXG4gICAgICAgIHQgPSA0MDA7XHJcbiAgICAgICAgZiA9IDI0O1xyXG4gICAgICAgIHZhciBmcHMgPSBmO1xyXG4gICAgICAgIHZhciB0aW1lID0gdDtcclxuICAgICAgICB2YXIgc3RlcHMgPSB0aW1lIC8gZnBzO1xyXG4gICAgICAgIGVsLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGhlaWdodCA9IGhpZGRlbkZyaWVuZHMub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgIHZhciBldGFsb25IZWlnaHQgPSBldGFsb24ub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgIGlmIChoZWlnaHQgPT0gMCkge1xyXG4gICAgICAgICAgICBoaWRkZW5GcmllbmRzLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgaGlkZGVuRnJpZW5kcy5jbGFzc0xpc3QucmVtb3ZlKCdub24tdmlzaWJsZScpO1xyXG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RlcHM+MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGVwID0gZXRhbG9uSGVpZ2h0IC8gKHRpbWUvZnBzKTtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgKz0gc3RlcDtcclxuICAgICAgICAgICAgICAgICAgICBoaWRkZW5GcmllbmRzLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBzdGVwcyAtPSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgICAgICAgICAgICAgICAgICBzaG93QnV0dG9uLmlubmVySFRNTCA9ICdIaWRlIHBhcnRuZXJzJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgdGltZS9mcHMpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0ZXBzPjApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RlcCA9IGV0YWxvbkhlaWdodCAvICh0aW1lL2Zwcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0IC09IHN0ZXA7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuRnJpZW5kcy5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RlcHMgLT0gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuRnJpZW5kcy5jbGFzc0xpc3QuYWRkKCdub24tdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dCdXR0b24uaW5uZXJIVE1MID0gJ1NlZSBvdGhlciBwYXJ0bmVycyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHRpbWUvZnBzKVxyXG4gICAgICAgIH0gIFxyXG4gICAgfVxyXG4gICAgXHJcblxyXG4vLyDQoNC10LDQu9C40LfQsNGG0LjRjyDRgSDQv9C+0LzQvtGJ0YzRjiBqUXVlcnkgICAgXHJcbi8vICAgIHZhciBoaWRkZW5GcmllbmRzID0gJCgnLmhpZGRlbi1saXN0JylbMF07XHJcbi8vICAgIHZhciBzaG93QnV0dG9uID0gJCgnLnBhcnRuZXJzX19saW5rJylbMF07XHJcbi8vICAgICQoc2hvd0J1dHRvbikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4vLyAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4vLyAgICAgICAgaWYgKCQoaGlkZGVuRnJpZW5kcykuaGFzQ2xhc3MoXCJvcGVuXCIpKSB7XHJcbi8vICAgICAgICAgICAgJChoaWRkZW5GcmllbmRzKS5yZW1vdmVDbGFzcyhcIm9wZW5cIik7XHJcbi8vICAgICAgICAgICAgJChoaWRkZW5GcmllbmRzKS5zbGlkZVVwKDMwMCk7XHJcbi8vICAgICAgICAgICAgJCh0aGlzKS5odG1sKCdTZWUgb3RoZXIgcGFydG5lcnMnKTtcclxuLy8gICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgICAgJChoaWRkZW5GcmllbmRzKS5hZGRDbGFzcyhcIm9wZW5cIik7XHJcbi8vICAgICAgICAgICAgJChoaWRkZW5GcmllbmRzKS5zbGlkZURvd24oMzAwKTtcclxuLy8gICAgICAgICAgICAkKHRoaXMpLmh0bWwoJ0hpZGUgcGFydG5lcnMnKTtcclxuLy8gICAgICAgIH1cclxuLy8gICAgfSk7XHJcbiAgICBcclxuICAgIFxyXG59KTtcclxuaWYgKCFBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkge1xyXG5cclxuICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc0FyZykge1xyXG5cclxuICAgIHZhciBULCBrO1xyXG5cclxuICAgIGlmICh0aGlzID09IG51bGwpIHtcclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignIHRoaXMgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDEuINCf0L7Qu9C+0LbQuNC8IE8g0YDQsNCy0L3Ri9C8INGA0LXQt9GD0LvRjNGC0LDRgtGDINCy0YvQt9C+0LLQsCBUb09iamVjdCBwYXNzaW5nIHRoZSB8dGhpc3wgdmFsdWUgYXMgdGhlIGFyZ3VtZW50LlxyXG4gICAgdmFyIE8gPSBPYmplY3QodGhpcyk7XHJcblxyXG4gICAgLy8gMi4g0J/QvtC70L7QttC40LwgbGVuVmFsdWUg0YDQsNCy0L3Ri9C8INGA0LXQt9GD0LvRjNGC0LDRgtGDINCy0YvQt9C+0LLQsCDQstC90YPRgtGA0LXQvdC90LXQs9C+INC80LXRgtC+0LTQsCBHZXQg0L7QsdGK0LXQutGC0LAgTyDRgSDQsNGA0LPRg9C80LXQvdGC0L7QvCBcImxlbmd0aFwiLlxyXG4gICAgLy8gMy4g0J/QvtC70L7QttC40LwgbGVuINGA0LDQstC90YvQvCBUb1VpbnQzMihsZW5WYWx1ZSkuXHJcbiAgICB2YXIgbGVuID0gTy5sZW5ndGggPj4+IDA7XHJcblxyXG4gICAgLy8gNC4g0JXRgdC70LggSXNDYWxsYWJsZShjYWxsYmFjaykg0YDQsNCy0LXQvSBmYWxzZSwg0LLRi9C60LjQvdC10Lwg0LjRgdC60LvRjtGH0LXQvdC40LUgVHlwZUVycm9yLlxyXG4gICAgLy8g0KHQvNC+0YLRgNC40YLQtTogaHR0cDovL2VzNS5naXRodWIuY29tLyN4OS4xMVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoY2FsbGJhY2sgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gNS4g0JXRgdC70LggdGhpc0FyZyDQv9GA0LjRgdGD0YLRgdGC0LLRg9C10YIsINC/0L7Qu9C+0LbQuNC8IFQg0YDQsNCy0L3Ri9C8IHRoaXNBcmc7INC40L3QsNGH0LUg0L/QvtC70L7QttC40LwgVCDRgNCw0LLQvdGL0LwgdW5kZWZpbmVkLlxyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIFQgPSB0aGlzQXJnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDYuINCf0L7Qu9C+0LbQuNC8IGsg0YDQsNCy0L3Ri9C8IDBcclxuICAgIGsgPSAwO1xyXG5cclxuICAgIC8vIDcuINCf0L7QutCwIGsgPCBsZW4sINCx0YPQtNC10Lwg0L/QvtCy0YLQvtGA0Y/RgtGMXHJcbiAgICB3aGlsZSAoayA8IGxlbikge1xyXG5cclxuICAgICAgdmFyIGtWYWx1ZTtcclxuXHJcbiAgICAgIC8vIGEuINCf0L7Qu9C+0LbQuNC8IFBrINGA0LDQstC90YvQvCBUb1N0cmluZyhrKS5cclxuICAgICAgLy8gICDQrdGC0L4g0L3QtdGP0LLQvdC+0LUg0L/RgNC10L7QsdGA0LDQt9C+0LLQsNC90LjQtSDQtNC70Y8g0LvQtdCy0L7RgdGC0L7RgNC+0L3QvdC10LPQviDQvtC/0LXRgNCw0L3QtNCwINCyINC+0L/QtdGA0LDRgtC+0YDQtSBpblxyXG4gICAgICAvLyBiLiDQn9C+0LvQvtC20LjQvCBrUHJlc2VudCDRgNCw0LLQvdGL0Lwg0YDQtdC30YPQu9GM0YLQsNGC0YMg0LLRi9C30L7QstCwINCy0L3Rg9GC0YDQtdC90L3QtdCz0L4g0LzQtdGC0L7QtNCwIEhhc1Byb3BlcnR5INC+0LHRitC10LrRgtCwIE8g0YEg0LDRgNCz0YPQvNC10L3RgtC+0LwgUGsuXHJcbiAgICAgIC8vICAg0K3RgtC+0YIg0YjQsNCzINC80L7QttC10YIg0LHRi9GC0Ywg0L7QsdGK0LXQtNC40L3RkdC9INGBINGI0LDQs9C+0LwgY1xyXG4gICAgICAvLyBjLiDQldGB0LvQuCBrUHJlc2VudCDRgNCw0LLQtdC9IHRydWUsINGC0L5cclxuICAgICAgaWYgKGsgaW4gTykge1xyXG5cclxuICAgICAgICAvLyBpLiDQn9C+0LvQvtC20LjQvCBrVmFsdWUg0YDQsNCy0L3Ri9C8INGA0LXQt9GD0LvRjNGC0LDRgtGDINCy0YvQt9C+0LLQsCDQstC90YPRgtGA0LXQvdC90LXQs9C+INC80LXRgtC+0LTQsCBHZXQg0L7QsdGK0LXQutGC0LAgTyDRgSDQsNGA0LPRg9C80LXQvdGC0L7QvCBQay5cclxuICAgICAgICBrVmFsdWUgPSBPW2tdO1xyXG5cclxuICAgICAgICAvLyBpaS4g0JLRi9C30L7QstC10Lwg0LLQvdGD0YLRgNC10L3QvdC40Lkg0LzQtdGC0L7QtCBDYWxsINGE0YPQvdC60YbQuNC4IGNhbGxiYWNrINGBINC+0LHRitC10LrRgtC+0LwgVCDQsiDQutCw0YfQtdGB0YLQstC1INC30L3QsNGH0LXQvdC40Y8gdGhpcyDQuFxyXG4gICAgICAgIC8vINGB0L/QuNGB0LrQvtC8INCw0YDQs9GD0LzQtdC90YLQvtCyLCDRgdC+0LTQtdGA0LbQsNGJ0LjQvCBrVmFsdWUsIGsg0LggTy5cclxuICAgICAgICBjYWxsYmFjay5jYWxsKFQsIGtWYWx1ZSwgaywgTyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gZC4g0KPQstC10LvQuNGH0LjQvCBrINC90LAgMS5cclxuICAgICAgaysrO1xyXG4gICAgfVxyXG4gICAgLy8gOC4g0JLQtdGA0L3RkdC8IHVuZGVmaW5lZC5cclxuICB9O1xyXG59O1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIFxyXG4gICAgdmFyIHRleHRWYWx1ZTsgLy/QntCx0YrRj9Cy0LvQtdC8INCz0LvQvtCx0LDQu9GM0L3QvtC1INC30L3QsNGH0LXQvdC40LUg0LIg0YDQsNC80LrQsNGFIGRvY3VtZW50LlJlYWR5XHJcbiAgICB2YXIgY3VycmVudERpdjtcclxuXHJcbi8vICAgINCd0LUg0YDQsNCx0L7RgtCw0LXRgiDQsiBJRTgsINC00LXQu9Cw0LXRgiDQt9Cw0L/RgNC+0YHRiyDQsdC10YHQutC+0L3QtdGH0L3QviAgICBcclxuICAgIHZhciBpID0gMDtcclxuICAgIFxyXG4gICAgdmFyIHRpbWVySWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIHRpY2soKSB7XHJcbiAgICAgIGlmIChpIDwgNSkge1xyXG4gICAgICAgIFJhbmRvbVdvcmQoKTtcclxuICAgICAgICBpKys7XHJcbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGljaywgMjAwMCk7ICAgIFxyXG4gICAgICB9ICBlbHNlIHtcclxuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcclxuICAgICAgfVxyXG4gICAgfSwgMjAwMCk7XHJcblxyXG4gICAgXHJcbiAgICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0YPQtNCw0LvRj9C10YIg0L/RgNC10LTRi9C00YPRidC40Lkg0LHQu9C+0Log0YEg0LfQsNC/0YDQvtGB0L7QvFxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlQkxvY2sgKCkge1xyXG4gICAgICAgIHZhciBibG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFzb25yeV9faXRlbScpO1xyXG4gICAgICAgIGlmIChibG9ja3MubGVuZ3RoID4gNikge1xyXG4gICAgICAgICAgICB2YXIgZGVsRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXNvbnJ5X19pdGVtJyk7XHJcbiAgICAgICAgICAgIGRlbEVsZW0ucmVtb3ZlKCk7ICAgICBcclxuICAgICAgICB9IGVsc2Uge31cclxuICAgIH07XHJcbiAgIFxyXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC00L7QsdCw0LLQu9GP0LXRgiDQsdC70L7QuiDRgSDQvdC+0LLRi9C8INC30LDQv9GA0L7RgdC+0LxcclxuICAgIGZ1bmN0aW9uIGFkZEJsb2NrICgpIHtcclxuICAgICAgICB2YXIgbW9zYWljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vc2FpYycpO1xyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjdXJyZW50RGl2ID0gZGl2O1xyXG4gICAgICAgIGRpdi5jbGFzc05hbWUgPSBcInRleHRfX2NvbnRhaW5lciBtYXNvbnJ5X19pdGVtXCI7XHJcbiAgICAgICAgbW9zYWljLmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgdmFyIGRpdlRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkaXZUZXh0LmNsYXNzTmFtZSA9IFwiaW5uZXJfX3RleHRcIjtcclxuICAgICAgICBkaXZUZXh0LmlubmVySFRNTCA9IHRleHRWYWx1ZTtcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZGl2VGV4dCk7XHJcbiAgICAgICAgaW1hZ2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC40L3QuNGG0LjQsNC70LjQt9C40YDRg9C10YIgTWFzb25yeVxyXG4gICAgZnVuY3Rpb24gbWFzb25yeSAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9zYWljJyk7XHJcbiAgICAgICAgdmFyIG1zbnJ5ID0gbmV3IE1hc29ucnkoIGVsZW0sIHtcclxuICAgICAgICAgICAgLy8gb3B0aW9uc1xyXG4gICAgICAgICAgICBpdGVtU2VsZWN0b3I6ICcubWFzb25yeV9faXRlbScsXHJcbiAgICAgICAgICAgIGNvbHVtbldpZHRoOiA1LFxyXG4gICAgICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBhbmltYXRpb25PcHRpb25zOiB7IFxyXG4gICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsIFxyXG4gICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTsgICBcclxuICAgIH07XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGltYWdlICgpIHtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgdXJsUXVlcnkgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2N1c3RvbXNlYXJjaC92MT9xPVwiICsgdGV4dFZhbHVlICsgXCImY3g9MDE2NzMyNjI0ODE2NDcxMDYxNDI4OjNndDJyY3hvN2xrJmltZ1NpemU9bWVkaXVtJmZpbGVUeXBlPWpwZyZudW09MSZzZWFyY2hUeXBlPWltYWdlJmltZ0RvbWluYW50Q29sb3I9cGluayZrZXk9QUl6YVN5Qm5jT2swT0tEMHA3U0VxcG5Dbmo2OGxaQWwwenF4eHZvXCI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHhtbFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB4bWxSZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybFF1ZXJ5LCB0cnVlKTtcclxuICAgICAgICB4bWxSZXF1ZXN0LnNlbmQoKTtcclxuICAgICAgICBcclxuICAgICAgICB4bWxSZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKHhtbFJlcXVlc3QucmVhZHlTdGF0ZSAhPSA0KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgaWYgKHhtbFJlcXVlc3Quc3RhdHVzICE9IDIwMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcItCY0LfQvtCx0YDQsNC20LXQvdC40LUg0L/QviDQtNCw0L3QvdC+0LzRgyDQt9Cw0L/RgNC+0YHRgyDQvdC1INC/0L7Qu9GD0YfQtdC90L4gXCIgKyB4bWxSZXF1ZXN0LnN0YXR1cyArICc6ICcgKyB4bWxSZXF1ZXN0LnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeG1sUmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgIHZhciBpbWFnZUxpbmsgPSBkYXRhLml0ZW1zWzBdLmxpbms7XHJcbiAgICAgICAgICAgICAgdmFyIGltYWdlV2lkdGggPSBkYXRhLml0ZW1zWzBdLmltYWdlLndpZHRoO1xyXG4gICAgICAgICAgICAgIHZhciBpbWFnZWhlaWdodCA9IGRhdGEuaXRlbXNbMF0uaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgIHZhciByYXRpbyA9IGltYWdlV2lkdGggLyBpbWFnZWhlaWdodDtcclxuICAgICAgICAgICAgICBpZiAocmF0aW8gPiAyKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IDQ0MDtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gcmF0aW8gKiAzMTA7ICBcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIGN1cnJlbnREaXYuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgaW1hZ2VMaW5rICsgJyknO1xyXG4gICAgICAgICAgICAgIGN1cnJlbnREaXYuc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XHJcbiAgICAgICAgICAgICAgY3VycmVudERpdi5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICdhdXRvIDMxMHB4JztcclxuICAgICAgICAgICAgICBtYXNvbnJ5KCk7ICAgIFxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0L/RgNC40LzQtdC90Y/QtdGC0YHRjyDQtNC70Y8g0L/QvtC40YHQutCwINGB0LvRg9GH0LDQudC90YvRhSDQutCw0YDRgtC40L3QvtC6XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIFJhbmRvbVdvcmQoKSB7XHJcbiAgICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGpzb25wKHVybCwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrTmFtZSA9ICdqc29ucF9jYWxsYmFja18nICsgTWF0aC5yb3VuZCgxMDAwMDAgKiBNYXRoLnJhbmRvbSgpKTtcclxuICAgICAgICAgICAgd2luZG93W2NhbGxiYWNrTmFtZV0gPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3dbY2FsbGJhY2tOYW1lXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICAgICAgc2NyaXB0LnNyYyA9IHVybCArICh1cmwuaW5kZXhPZignPycpID49IDAgPyAnJicgOiAnPycpICsgJ2NhbGxiYWNrPScgKyBjYWxsYmFja05hbWU7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGpzb25wKCdodHRwOi8vcmFuZG9td29yZC5zZXRnZXRnby5jb20vZ2V0LnBocCcsIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICB0ZXh0VmFsdWUgPSBkYXRhLldvcmQ7XHJcbiAgICAgICAgICAgIHJlbW92ZUJMb2NrKCk7XHJcbiAgICAgICAgICAgIGFkZEJsb2NrKCk7XHJcbiAgICAgICAgICAgIG1hc29ucnkoKTtcclxuICAgICAgICB9KTsgICBcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4vLyAgICBmdW5jdGlvbiBSYW5kb21Xb3JkKCkge1xyXG4vLyAgICAgICAgXHJcbi8vICAgICAgICB2YXIgcmVxdWVzdFN0ciA9IFwiaHR0cDovL3JhbmRvbXdvcmQuc2V0Z2V0Z28uY29tL2dldC5waHBcIjtcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgJC5hamF4KHtcclxuLy8gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4vLyAgICAgICAgICAgIHVybDogcmVxdWVzdFN0cixcclxuLy8gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29ucFwiLFxyXG4vLyAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4vLyAgICAgICAgICAgICAgICB0ZXh0VmFsdWUgPSByZXNwb25zZS5Xb3JkO1xyXG4vLyAgICAgICAgICAgICAgICByZW1vdmVCTG9jaygpO1xyXG4vLyAgICAgICAgICAgICAgICBhZGRCbG9jaygpO1xyXG4vLyAgICAgICAgICAgICAgICBtYXNvbnJ5KCk7XHJcbi8vICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgfSk7XHJcbi8vICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2hfX2J0bicpO1xyXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkRWxlbWVudClcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gYWRkRWxlbWVudCAoZXZlbnQpIHtcclxuICAgICAgICBcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyDQn9GA0LXQtNC+0YLQstGA0LDRidCw0LXQvCDQstGL0L/QvtC70L3QtdC90LjQtSDRgdC+0LHRi9GC0LjRjyBcItCf0L4g0YPQvNC+0LvRh9Cw0L3QuNGOXCJcclxuICAgICAgICBcclxuICAgICAgICAvL9Cf0L7Qu9GD0YfQsNC10Lwg0YDQuNGB0YPQvdC+0Log0YHQvtCz0LvQsNGB0L3QviDQt9Cw0L/RgNC+0YHRg1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRleHRWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2hfX2lucHV0JykudmFsdWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRleHRWYWx1ZSA9PSAwKSB7XHJcbiAgICAgICAgICAgIFJhbmRvbVdvcmQoKTsgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVtb3ZlQkxvY2soKTtcclxuICAgICAgICAgICAgYWRkQmxvY2soKTsgICBcclxuICAgICAgICAgICAgbWFzb25yeSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICB9O1xyXG4gICAgXHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
