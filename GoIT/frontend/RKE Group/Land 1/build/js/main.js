"use strict";document.addEventListener("DOMContentLoaded",function(){function e(){var e=document.documentElement.clientHeight,t=window.pageYOffset||document.documentElement.scrollTop;t>e||t>400?a(d):l(d)}function t(){var e=window.pageYOffset;console.log(e);var t=setInterval(function(){e>10?(window.scrollBy(0,-10),e-=10):(clearInterval(t),window.scrollTo(0,0))},4)}function n(){console.log("SET BUTTON");var e=d.previousElementSibling,t=e.offsetWidth,n=document.documentElement.clientWidth,a=(n-t)/2;if(a>90){var l=(a-80)/2;d.style.right=l+"px"}else d.style.right="5px";var e=d.previousElementSibling}function a(e,t,n){if(e.classList.contains("hidden")){t=168,n=24;var a=n,l=t,d=l/a,o=0,i=70;e.classList.remove("hidden");var s=setInterval(function(){if(e.style.borderWidth="2px",e.style.padding="3px",d>0){var t=i/(l/a);o+=t,e.style.height=o+"px",e.style.width=o+"px",d-=1}else clearInterval(s)},l/a)}}function l(e,t,n){if(!e.classList.contains("hidden")){t=168,n=24;var a=n,l=t,d=l/a,o=70,i=70,s=setInterval(function(){if(d>0){var t=i/(l/a);o-=t,e.style.height=o+"px",e.style.width=o+"px",d-=1}else e.style.borderWidth="0px",e.style.padding="0px",e.classList.add("hidden"),clearInterval(s)},l/a)}}var d=document.getElementsByClassName("updown")[0];d.addEventListener("click",t),n();var o=!1;document.addEventListener("scroll",e),window.addEventListener("resize",function(){o||(n(),o=!0,setTimeout(function(){o=!1},200))})}),document.addEventListener("DOMContentLoaded",function(){function e(){o.style.position="fixed",o.style.backgroundColor="rgba(0,0,0,1)",o.style.width="100%",o.style.left="0px",o.style.top="0px"}function t(){o.style.backgroundColor="rgba(0,0,0,.6)",o.style.position="relative"}function n(){var e=document.getElementsByClassName("phrase")[0],t=getComputedStyle(e),n=parseInt(t.paddingBottom)+o.offsetHeight+"px";e.style.paddingBottom=n}function a(){var e=document.getElementsByClassName("phrase")[0],t=getComputedStyle(e),n=parseInt(t.paddingBottom)-o.offsetHeight+"px";e.style.paddingBottom=n}function l(){var l=d.offsetHeight,s=o.offsetHeight,r=window.pageYOffset||document.documentElement.scrollTop;if(r>=l-s){if(console.log("tumbler",i),"on"!=i)return;e(),n(),i="off"}else{if("off"!=i)return;t(),a(),i="on"}}var d=document.getElementsByTagName("header")[0],o=document.getElementsByClassName("main-menu")[0],i="on";document.addEventListener("scroll",l)}),document.addEventListener("DOMContentLoaded",function(){function e(){var e=document.createElement("div");e.classList.add("dynamic-overlay"),e.style.zIndex="10",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(192,192,192,0.7)",e.style.top="0",e.style.textAlign="center",e.style.left="0",e.style.position="fixed",o.appendChild(e),n()}function t(){var e=document.getElementsByClassName("dynamic-overlay")[0];o.removeChild(e)}function n(){var e=document.getElementsByClassName("dynamic-overlay")[0],t=document.createElement("div");t.style.content="",t.style.display="inline-block",t.style.height="100%",t.style.verticalAlign="middle",e.appendChild(t);var n=document.createElement("div");n.style.zIndex="3",n.style.borderRadius="10px",n.style.border="3px solid black",n.style.maxWidth="320px",n.classList.add("modal-window"),n.style.verticalAlign="middle",n.style.background="white",n.style.display="inline-block",e.appendChild(n),a()}function a(){var e=document.getElementsByClassName("modal-window")[0],n=document.createElement("form");n.classList.add("order_form"),e.appendChild(n);var a=document.createElement("h3");n.appendChild(a),a.innerHTML="Заявка";var d=document.createElement("input");n.appendChild(d),d.setAttribute("name","name"),d.placeholder="Как к Вам обращаться?";var o=document.createElement("input");n.appendChild(o),o.placeholder="Ваш телефон",o.setAttribute("name","telephone");var i=document.createElement("input");n.appendChild(i),i.placeholder="Ваш e-mail",i.setAttribute("name","email");var s=document.createElement("select");n.appendChild(s),s.setAttribute("name","grade");var r=document.createElement("option");s.appendChild(r),r.innerHTML="Выберите марку",r.style.fontWeight="bold";var c=document.createElement("option");s.appendChild(c),c.value="Марка антрацита - АШ",c.innerHTML="АШ";var m=document.createElement("option");s.appendChild(m),m.value="Марка антрацита - АC",m.innerHTML="АС";var u=document.createElement("option");s.appendChild(u),u.value="Марка антрацита - АМ",u.innerHTML="АМ";var p=document.createElement("option");s.appendChild(p),p.value="Марка антрацита - АО",p.innerHTML="АО";var v=document.createElement("option");s.appendChild(v),v.value="Марка антрацита - АК",v.innerHTML="АК";var f=document.createElement("option");s.appendChild(f),f.value="Марка антрацита - АКО",f.innerHTML="АКО";var h=document.createElement("input");n.appendChild(h),h.placeholder="Укажите тоннаж",h.setAttribute("name","tonnage");var y=document.createElement("input");n.appendChild(y),y.type="submit",y.innerHTML="ОФОРМИТЬ",y.addEventListener("click",l);var g=document.createElement("div");n.appendChild(g),g.innerHTML="отменить",g.classList.add("cancel_button"),g.addEventListener("click",t)}function l(e){e.preventDefault();var t="name="+document.forms[0][0].value+"&telephone="+document.forms[0][1].value+"&email="+document.forms[0][2].value+"&grade="+document.forms[0][3].value+"&tonnage="+document.forms[0][4].value;console.log(t);var n=new XMLHttpRequest;n.open("POST","../send.php",!0),n.send(t),n.onreadystatechange=function(){4==n.readyState&&(200!=n.status?alert("Отправить данные не удалось"+n.status+": "+n.statusText):alert("Ваша заявка успешно отправлена. Мы свяжемся с Вами в самое ближайшее время."))}}var d=document.getElementsByClassName("grade")[0].childNodes[5];d.addEventListener("click",e),console.log(d);var o=document.body});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic2Nyb2xsZWRVcEJ1dHRvbiIsImRpc3BsYXlIZWlnaHQiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRIZWlnaHQiLCJzY3JvbGxUb3AiLCJzY3JvbGxlZCIsIndpbmRvdyIsInBhZ2VZT2Zmc2V0IiwidXBCdXR0b25IaWRlIiwidXBCdXR0b24iLCJzY3JvbGxVcCIsImN1cnJlbnRPZmZzZXQiLCJjb25zb2xlIiwiaW50ZXJ2YWxVcCIsInNldEludGVydmFsIiwic2Nyb2xsQnkiLCJjbGVhckludGVydmFsIiwic2V0QnV0dG9uIiwibG9nIiwid3JhcHBlcldpZHRoIiwid3JhcHBlciIsInBhZ2VXaWR0aCIsImNsaWVudFdpZHRoIiwic3BhY2VGb3JCdXR0b24iLCJyaWdodCIsInN0eWxlIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInVwQnV0dG9uU2hvdyIsImVsIiwidCIsImYiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImZwcyIsInRpbWUiLCJzdGVwcyIsImhlaWdodCIsImFuaW1hdGlvbkhlaWdodCIsIndpZHRoIiwicmVtb3ZlIiwiaW50ZXJ2YWwiLCJib3JkZXJXaWR0aCIsInBhZGRpbmciLCJzdGVwIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInRocm90dGxlZCIsImhlYWRlciIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibWFpbk1lbnUiLCJ0b3AiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ1bkNlbWVudE1lbnUiLCJhZGRIZWFkZXJQYWRkaW5nIiwicGhyYXNlIiwicGhyYXNlU3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwicGhyYXNlU3R5bGVQYWRkaW5nQm90dG9tIiwicGFyc2VJbnQiLCJwYWRkaW5nQm90dG9tIiwib2Zmc2V0SGVpZ2h0IiwiaGVhZGVySGVpZ2h0IiwidHVtYmxlciIsImNlbWVudE1lbnUiLCJyZW1vdmVIZWFkZXJQYWRkaW5nIiwid2F0Y2hNZW51IiwiZ3JhZGUiLCJjcmVhdGVPdmVybGF5Iiwib3ZlcmxheSIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0QWxpZ24iLCJsZWZ0IiwicG9zaXRpb24iLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVNb2RhbCIsImRlbGV0ZU92ZXJsYXkiLCJyZW1vdmVDaGlsZCIsImJlZm9yZSIsImNvbnRlbnQiLCJtb2RhbCIsInpJbmRleCIsImJvcmRlclJhZGl1cyIsImJvcmRlciIsInZlcnRpY2FsQWxpZ24iLCJiYWNrZ3JvdW5kIiwiZGlzcGxheSIsImNyZWF0ZUZvcm0iLCJhZGQiLCJmb3JtIiwicmVxdWVzdCIsImlubmVySFRNTCIsInByZXNlbnRZb3Vyc2VsZiIsInNldEF0dHJpYnV0ZSIsInBsYWNlaG9sZGVyIiwiY29udGFjdFRlbGVwaG9uZSIsImNvbnRhY3RFbWFpbCIsImdyYWRlQ29hbCIsImNvYWxHcmFkZSIsImZvbnRXZWlnaHQiLCJhc2giLCJ2YWx1ZSIsImFzIiwiYW0iLCJhbyIsImFrIiwiYWtvIiwidG9ubmFnZSIsInN1Ym1pdCIsImNhbmNlbGxhdGlvbiIsInNlbmRGb3JtIiwicHJldmVudERlZmF1bHQiLCJ4bWxSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwiZm9ybXMiLCJhbGVydCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsImZvcm1EYXRhIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJjaGlsZE5vZGVzIl0sIm1hcHBpbmdzIjoiWUFBQUEsVUFBU0MsaUJBQWlCLG1CQUFvQixXQWdCMUMsUUFBU0MsS0FFTCxHQUFJQyxHQUFnQkgsU0FBU0ksZ0JBQWdCQyxhQUF6Q0YsRUFBQUEsT0FBZ0JILGFBQVNJLFNBQWdCQyxnQkFBY0MsU0FDdkRDLEdBQVdDLEdBQU9DLEVBQWVULElBQ2pDTyxFQUFXSixHQUFmTyxFQUVPQyxHQVdYLFFBQVNDLEtBRUwsR0FBSUMsR0FBZ0JMLE9BQU9DLFdBQTNCSyxTQUFJRCxJQUFBQSxFQUlKLElBQUlFLEdBQWFD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QUEsVUFBYTdHLFdBRWhCNEcsRUFBQTVHLGlCQUFBLFFBQUE4RyxFQU5HLElBQUlELEdBQWU5RyxTQUFTc0UsY0FBYyxNQVE5Q29CLEdBQVNxQixZQUFURCxHQUNJaEYsRUFBR2tGLFVBQUgsV0FDUkYsRUFBQTdFLFVBQUF3RCxJQUFBLGlCQUNBcUIsRUFBQTdHLGlCQUFBLFFBQUE0RSxHQUlBLFFBQUFrQyxHQUFBakYsR0FDUUEsRUFBQWtGLGdCQVFBQyxJQUFBQSxHQUFXQyxRQUFBQSxTQUFxQkMsTUFBQSxHQUFBLEdBQVdiLE1BQUEsY0FBQXRHLFNBQUFtSCxNQUFBLEdBQUEsR0FBQWIsTUFBQSxVQUFBdEcsU0FBQW1ILE1BQUEsR0FBQSxHQUFBYixNQUFBLFVBQUF0RyxTQUFBbUgsTUFBQSxHQUFBLEdBQUFiLE1BQUEsWUFBQXRHLFNBQUFtSCxNQUFBLEdBQUEsR0FBQWIsS0FDekN4RixTQUFJbUcsSUFBQUEsRUFHRkcsSUFBQUEsR0FBTSxHQUFBQyxlQUNQSixHQUFNSyxLQUFBLE9BQUEsZUFBQSxHQUNIRixFQUFBQSxLQUFNRyxHQUdYTixFQVREQyxtQkFBQSxXQVdILEdBQUFELEVBQUFPLGFBRUwsS0FBQVAsRUFBQVEsT0FDQUwsTUFBQSw4QkFBQUgsRUFBQVEsT0FBQSxLQUFBUixFQUFBUyxZQUVBTixNQUFBLGlGQXJKSSxHQUFJakQsR0FBUW5FLFNBQVM4Qyx1QkFBdUIsU0FBUyxHQUFHNkUsV0FBVyxFQVEvRHhELEdBQUFsRSxpQkFBY0QsUUFBU3NFLEdBQ3ZCRCxRQUFBQSxJQUFRcEMsRUFFUm9DLElBQUFBLEdBQUFBLFNBQWM3QiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIFxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgXHJcbiAgICB2YXIgdXBCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd1cGRvd24nKVswXTtcclxuICAgIFxyXG4gICAgdXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzY3JvbGxVcCk7XHJcbiAgICBcclxuICAgIHNldEJ1dHRvbigpO1xyXG4gICAgXHJcbiAgICB2YXIgdGhyb3R0bGVkID0gZmFsc2U7IFxyXG4gICAgXHJcbi8vICAgINCS0LXRiNCw0LXQvCDQv9C+0Y/QstC70LXQvdC40LUg0LrQvdC+0L/QutC4IFwi0J3QkNCS0JXQoNClXCIg0L/RgNC4INC/0YDQvtC60YDRg9GC0LrQtSDRgdGC0YDQsNC90LjRhtGLXHJcblxyXG4gICAgXHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNjcm9sbGVkVXBCdXR0b24oKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGRpc3BsYXlIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OyAvLyDQoNCw0LfQvNC10YAg0L7QutC90LAg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgICAgdmFyIHNjcm9sbGVkID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICAgICAgaWYgKHNjcm9sbGVkID4gZGlzcGxheUhlaWdodCB8fCBzY3JvbGxlZCA+IDQwMCkge1xyXG4gICAgICAgICAgICB1cEJ1dHRvblNob3codXBCdXR0b24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVwQnV0dG9uSGlkZSh1cEJ1dHRvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgICAgICBcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgc2Nyb2xsZWRVcEJ1dHRvbik7XHJcbiAgICAgICAgXHJcbi8vICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dTY3JvbGwnKS5pbm5lckhUTUwgPSBzY3JvbGxlZCArICdweCc7XHJcbiAgICBcclxuLy8gICAg0KHQvtC30LTQsNC10Lwg0YTRg9C90LrRhtC40Y4g0LTQu9GPINGN0YTRhNC10LrRgiDQv9C70LDQstC90L7QuSDQv9GA0L7QutGA0YPRgtC60Lgg0L7QutC90LBcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gc2Nyb2xsVXAgKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBjdXJyZW50T2Zmc2V0ID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRPZmZzZXQpO1xyXG4vLyAgICAgICAgdXBCdXR0b25IaWRlKHVwQnV0dG9uKTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgaW50ZXJ2YWxVcCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRPZmZzZXQgPiAxMCkge1xyXG4vLyAgICAgICAgICAgICAgICB1cEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxCeSgwLC0xMClcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRPZmZzZXQgLT0gMTA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsVXApO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsMCk7XHJcbi8vICAgICAgICAgICAgICAgIHVwQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgNCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbi8vICAgICAgICB0ID0gMzM2O1xyXG4vLyAgICAgICAgZiA9IDI0O1xyXG4vLyAgICAgICAgdmFyIGZwcyA9IGYsIHRpbWUgPSB0LCBzdGVwcyA9IHRpbWUgLyBmcHMsIGhlaWdodCA9IDAsIHdpZHRoID0gMCwgYW5pbWF0aW9uSGVpZ2h0ID0gNzA7XHJcbi8vICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuLy8gICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICAgICAgICBpZiAoc3RlcHMgPiAwKSB7XHJcbi8vICAgICAgICAgICAgICAgIHZhciBzdGVwID0gYW5pbWF0aW9uSGVpZ2h0IC8gKHRpbWUgLyBmcHMpO1xyXG4vLyAgICAgICAgICAgICAgICBoZWlnaHQgKz0gc3RlcDtcclxuLy8gICAgICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xyXG4vLyAgICAgICAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IGhlaWdodCArIFwicHhcIjtcclxuLy8gICAgICAgICAgICAgICAgc3RlcHMgLT0gMTtcclxuLy8gICAgICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuLy8gICAgICAgICAgICB9XHJcbi8vICAgICAgICB9LCB0aW1lIC8gZnBzKTtcclxuICAgIH1cclxuICAgIFxyXG4vLyAgINCS0LXRiNCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQvdCwINC40LfQvNC10L3QtdC90LjQtSDRgNCw0LfQvNC10YDQvtCyINC+0LrQvdCwXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gb25seSBydW4gaWYgd2UncmUgbm90IHRocm90dGxlZFxyXG4gICAgICBpZiAoIXRocm90dGxlZCkge1xyXG4gICAgICAgIC8vIGFjdHVhbCBjYWxsYmFjayBhY3Rpb25cclxuICAgICAgICBzZXRCdXR0b24oKTtcclxuICAgICAgICAvLyB3ZSdyZSB0aHJvdHRsZWQhXHJcbiAgICAgICAgdGhyb3R0bGVkID0gdHJ1ZTtcclxuICAgICAgICAvLyBzZXQgYSB0aW1lb3V0IHRvIHVuLXRocm90dGxlXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHRocm90dGxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0sIDIwMCk7XHJcbiAgICAgIH0gIFxyXG4gICAgfSk7XHJcbiAgICBcclxuLy8gICAg0KTRg9C90LrRhtC40Y8g0LTQu9GPINCy0YvRgNCw0LLQvdC40LLQsNC90LjRjyDQutC90L7Qv9C60LggXCLQndCQ0JLQldCg0KVcIlxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzZXRCdXR0b24gKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTRVQgQlVUVE9OJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHdyYXBwZXIgPSB1cEJ1dHRvbi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOyAvLyDQndCw0YXQvtC00LjQvCB3cmFwcGVyLCDRh9GC0L7QsdGLINC+0L/RgNC10LTQtdC70LjRgtGMINC10LPQviDRiNC40YDQuNC90YNcclxuICAgICAgICB2YXIgd3JhcHBlcldpZHRoID0gd3JhcHBlci5vZmZzZXRXaWR0aDsgLy8g0J7Qv9GA0LXQtNC10LvRj9C10Lwg0YjQuNGA0LjQvdGDIHdyYXBwZXJcclxuICAgICAgICB2YXIgcGFnZVdpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBzcGFjZUZvckJ1dHRvbiA9IChwYWdlV2lkdGggLSB3cmFwcGVyV2lkdGgpIC8gMjsgLy8g0J7Qv9GA0LXQtNC10LvRj9C10Lwg0YjQuNGA0LjQvdGDINC/0YPRgdGC0L7Qs9C+INC/0YDQvtGB0YLRgNCw0L3RgdGC0LLQsCDQvNC10LbQtNGDIHdyYXBwZXIg0Lgg0LPRgNCw0L3QuNGG0LXQuSDRgdGC0YDQsNC90LjRhtGLXHJcblxyXG4gICAgICAgIGlmIChzcGFjZUZvckJ1dHRvbiA+IDkwKSB7IC8vINCV0YHQu9C4INC/0YDQvtGB0YLRgNCw0L3RgdGC0LLQsCDQv9C+INGI0LjRgNC40L3QtSDQsdC+0LvRjNGI0LUg0YfQtdC8INGI0LjRgNC40L3QsCDQutC90L7Qv9C60LgsINGA0LDQt9C80LXRidCw0LXQvCDQutC90L7Qv9C60YMg0L/QvtGB0LXRgNC10LTQuNC90LVcclxuICAgICAgICAgICAgdmFyIHJpZ2h0ID0gKHNwYWNlRm9yQnV0dG9uIC0gODApIC8gMjtcclxuICAgICAgICAgICAgdXBCdXR0b24uc3R5bGUucmlnaHQgPSByaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHsgLy8g0JXRgdC70Lgg0LzQtdC90YzRiNC1LCDQv9GA0LjQttC40LzQsNC10Lwg0Log0L/RgNCw0LLQvtC5INGB0YLQvtGA0L7QvdC1INGN0LrRgNCw0L3QsFxyXG4gICAgICAgICAgICAgICAgdXBCdXR0b24uc3R5bGUucmlnaHQgPSA1ICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciB3cmFwcGVyID0gdXBCdXR0b24ucHJldmlvdXNFbGVtZW50U2libGluZzsgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBcclxuLy8gICAg0KTRg9C90LrRhtC40Y8g0LTQu9GPINC/0L7QutCw0LfQsCDQutC90L7Qv9C60LggXCLQndCQ0JLQldCg0KVcIlxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiB1cEJ1dHRvblNob3coZWwsIHQsIGYpIHtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaGlkZGVuXCIpKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0ID0gMTY4O1xyXG4gICAgICAgICAgICBmID0gMjQ7XHJcbiAgICAgICAgICAgIHZhciBmcHMgPSBmLCB0aW1lID0gdCwgc3RlcHMgPSB0aW1lIC8gZnBzLCBoZWlnaHQgPSAwLCB3aWR0aCA9IDAsIGFuaW1hdGlvbkhlaWdodCA9IDcwO1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJvcmRlcldpZHRoID0gXCIycHhcIjtcclxuICAgICAgICAgICAgICAgIGVsLnN0eWxlLnBhZGRpbmcgPSBcIjNweFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0ZXBzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGVwID0gYW5pbWF0aW9uSGVpZ2h0IC8gKHRpbWUgLyBmcHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCArPSBzdGVwO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IGhlaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBzdGVwcyAtPSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHRpbWUgLyBmcHMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyAgICDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0YHQutGA0YvRgtC40Y8g0LrQvdC+0L/QutC4IFwi0J3QkNCS0JXQoNClXCJcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gdXBCdXR0b25IaWRlKGVsLCB0LCBmKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhcImhpZGRlblwiKSkge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdCA9IDE2ODtcclxuICAgICAgICAgICAgZiA9IDI0O1xyXG4gICAgICAgICAgICB2YXIgZnBzID0gZiwgdGltZSA9IHQsIHN0ZXBzID0gdGltZSAvIGZwcywgaGVpZ2h0ID0gNzAsIHdpZHRoID0gNzAsIGFuaW1hdGlvbkhlaWdodCA9IDcwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGludGVydmFsMiA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdGVwcyA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RlcCA9IGFuaW1hdGlvbkhlaWdodCAvICh0aW1lIC8gZnBzKTtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgLT0gc3RlcDtcclxuICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUud2lkdGggPSBoZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RlcHMgLT0gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuYm9yZGVyV2lkdGggPSBcIjBweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnBhZGRpbmcgPSBcIjBweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgdGltZSAvIGZwcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuLy8gICAgdXBCdXR0b25TaG93KHVwQnV0dG9uKTtcclxuICAgIFxyXG4vLyAgICB2YXIgdGltZXIgPSBzZXRUaW1lb3V0KHVwQnV0dG9uSGlkZSwgNDAwMCwgdXBCdXR0b24pO1xyXG4gICAgXHJcbn0pO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgXHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBcclxuICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZGVyJylbMF07XHJcbiAgICBcclxuICAgIHZhciBtYWluTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21haW4tbWVudScpWzBdO1xyXG4gICAgXHJcbiAgICB2YXIgdHVtYmxlciA9ICdvbic7XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGNlbWVudE1lbnUgKCkge1xyXG4gICAgICAgIG1haW5NZW51LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICBtYWluTWVudS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiYSgwLDAsMCwxKSc7XHJcbiAgICAgICAgbWFpbk1lbnUuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgbWFpbk1lbnUuc3R5bGUubGVmdCA9ICcwcHgnO1xyXG4gICAgICAgIG1haW5NZW51LnN0eWxlLnRvcCA9ICcwcHgnO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gdW5DZW1lbnRNZW51ICgpIHtcclxuICAgICAgICBtYWluTWVudS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiYSgwLDAsMCwuNiknO1xyXG4gICAgICAgIG1haW5NZW51LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gYWRkSGVhZGVyUGFkZGluZyAoKSB7XHJcbiAgICAgICAgdmFyIHBocmFzZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BocmFzZScpWzBdO1xyXG4gICAgICAgIHZhciBwaHJhc2VTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUocGhyYXNlKTtcclxuICAgICAgICB2YXIgcGhyYXNlU3R5bGVQYWRkaW5nQm90dG9tID0gcGFyc2VJbnQocGhyYXNlU3R5bGUucGFkZGluZ0JvdHRvbSkgKyBtYWluTWVudS5vZmZzZXRIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgIHBocmFzZS5zdHlsZS5wYWRkaW5nQm90dG9tID0gcGhyYXNlU3R5bGVQYWRkaW5nQm90dG9tOyAgICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHJlbW92ZUhlYWRlclBhZGRpbmcgKCkge1xyXG4gICAgICAgIHZhciBwaHJhc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwaHJhc2UnKVswXTtcclxuICAgICAgICB2YXIgcGhyYXNlU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHBocmFzZSk7XHJcbiAgICAgICAgdmFyIHBocmFzZVN0eWxlUGFkZGluZ0JvdHRvbSA9IHBhcnNlSW50KHBocmFzZVN0eWxlLnBhZGRpbmdCb3R0b20pIC0gbWFpbk1lbnUub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICBwaHJhc2Uuc3R5bGUucGFkZGluZ0JvdHRvbSA9IHBocmFzZVN0eWxlUGFkZGluZ0JvdHRvbTsgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiB3YXRjaE1lbnUgKCkge1xyXG4gICAgICAgIHZhciBoZWFkZXJIZWlnaHQgPSBoZWFkZXIub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgIHZhciBtYWluTWVudUhlaWdodCA9IG1haW5NZW51Lm9mZnNldEhlaWdodDtcclxuXHJcbiAgICAgICAgdmFyIHNjcm9sbGVkID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICAgICAgaWYgKHNjcm9sbGVkID49IChoZWFkZXJIZWlnaHQgLSBtYWluTWVudUhlaWdodCkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3R1bWJsZXInLCB0dW1ibGVyKTtcclxuICAgICAgICAgICAgaWYgKHR1bWJsZXIgPT0gJ29uJykge1xyXG4gICAgICAgICAgICAgICAgY2VtZW50TWVudSgpO1xyXG4gICAgICAgICAgICAgICAgYWRkSGVhZGVyUGFkZGluZygpO1xyXG4gICAgICAgICAgICAgICAgdHVtYmxlciA9ICdvZmYnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHR1bWJsZXIgPT0gJ29mZicpIHtcclxuICAgICAgICAgICAgICAgIHVuQ2VtZW50TWVudSgpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlSGVhZGVyUGFkZGluZygpO1xyXG4gICAgICAgICAgICAgICAgdHVtYmxlciA9ICdvbic7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgd2F0Y2hNZW51KTtcclxuICAgIFxyXG4vLyAgICB2YXIgdXBCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd1cGRvd24nKVswXTtcclxuLy8gICAgXHJcbi8vICAgIHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2Nyb2xsVXApO1xyXG4vLyAgICBcclxuLy8gICAgc2V0QnV0dG9uKCk7XHJcbi8vICAgIFxyXG4vLyAgICB2YXIgdGhyb3R0bGVkID0gZmFsc2U7IFxyXG4vLyAgICBcclxuLy8vLyAgICDQktC10YjQsNC10Lwg0L/QvtGP0LLQu9C10L3QuNC1INC60L3QvtC/0LrQuCBcItCd0JDQktCV0KDQpVwiINC/0YDQuCDQv9GA0L7QutGA0YPRgtC60LUg0YHRgtGA0LDQvdC40YbRi1xyXG4vL1xyXG4vLyAgICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgdmFyIGRpc3BsYXlIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OyAvLyDQoNCw0LfQvNC10YAg0L7QutC90LAg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbi8vICAgICAgICB2YXIgc2Nyb2xsZWQgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuLy8gICAgICAgIGlmIChzY3JvbGxlZCA+IGRpc3BsYXlIZWlnaHQgfHwgc2Nyb2xsZWQgPiA0MDApIHtcclxuLy8gICAgICAgICAgICB1cEJ1dHRvblNob3codXBCdXR0b24pO1xyXG4vLyAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICB1cEJ1dHRvbkhpZGUodXBCdXR0b24pO1xyXG4vLyAgICAgICAgfVxyXG4vLyAgICAgICAgXHJcbi8vICAgIFxyXG4vLy8vICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dTY3JvbGwnKS5pbm5lckhUTUwgPSBzY3JvbGxlZCArICdweCc7XHJcbi8vICAgIH1cclxuLy8gICAgXHJcbi8vLy8gICAg0KHQvtC30LTQsNC10Lwg0YTRg9C90LrRhtC40Y4g0LTQu9GPINGN0YTRhNC10LrRgiDQv9C70LDQstC90L7QuSDQv9GA0L7QutGA0YPRgtC60Lgg0L7QutC90LBcclxuLy8gICAgXHJcbi8vICAgIGZ1bmN0aW9uIHNjcm9sbFVwICgpIHtcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgdmFyIGN1cnJlbnRPZmZzZXQgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcbi8vICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50T2Zmc2V0KTtcclxuLy8vLyAgICAgICAgdXBCdXR0b25IaWRlKHVwQnV0dG9uKTtcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgdmFyIGludGVydmFsVXAgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgICAgaWYgKGN1cnJlbnRPZmZzZXQgPiAxMCkge1xyXG4vLy8vICAgICAgICAgICAgICAgIHVwQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4vLyAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoMCwtMTApXHJcbi8vICAgICAgICAgICAgICAgIGN1cnJlbnRPZmZzZXQgLT0gMTA7XHJcbi8vICAgICAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbFVwKTtcclxuLy8gICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsMCk7XHJcbi8vLy8gICAgICAgICAgICAgICAgdXBCdXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbi8vICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgfSwgNCk7XHJcbi8vICAgICAgICBcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgXHJcbi8vLy8gICAgICAgIHQgPSAzMzY7XHJcbi8vLy8gICAgICAgIGYgPSAyNDtcclxuLy8vLyAgICAgICAgdmFyIGZwcyA9IGYsIHRpbWUgPSB0LCBzdGVwcyA9IHRpbWUgLyBmcHMsIGhlaWdodCA9IDAsIHdpZHRoID0gMCwgYW5pbWF0aW9uSGVpZ2h0ID0gNzA7XHJcbi8vLy8gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4vLy8vICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbi8vLy8gICAgICAgICAgICBpZiAoc3RlcHMgPiAwKSB7XHJcbi8vLy8gICAgICAgICAgICAgICAgdmFyIHN0ZXAgPSBhbmltYXRpb25IZWlnaHQgLyAodGltZSAvIGZwcyk7XHJcbi8vLy8gICAgICAgICAgICAgICAgaGVpZ2h0ICs9IHN0ZXA7XHJcbi8vLy8gICAgICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xyXG4vLy8vICAgICAgICAgICAgICAgIGVsLnN0eWxlLndpZHRoID0gaGVpZ2h0ICsgXCJweFwiO1xyXG4vLy8vICAgICAgICAgICAgICAgIHN0ZXBzIC09IDE7XHJcbi8vLy8gICAgICAgICAgICB9IGVsc2Uge1xyXG4vLy8vICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4vLy8vICAgICAgICAgICAgfVxyXG4vLy8vICAgICAgICB9LCB0aW1lIC8gZnBzKTtcclxuLy8gICAgfVxyXG4vLyAgICBcclxuLy8vLyAgINCS0LXRiNCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQvdCwINC40LfQvNC10L3QtdC90LjQtSDRgNCw0LfQvNC10YDQvtCyINC+0LrQvdCwXHJcbi8vICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcclxuLy8gICAgICAgIC8vIG9ubHkgcnVuIGlmIHdlJ3JlIG5vdCB0aHJvdHRsZWRcclxuLy8gICAgICBpZiAoIXRocm90dGxlZCkge1xyXG4vLyAgICAgICAgLy8gYWN0dWFsIGNhbGxiYWNrIGFjdGlvblxyXG4vLyAgICAgICAgc2V0QnV0dG9uKCk7XHJcbi8vICAgICAgICAvLyB3ZSdyZSB0aHJvdHRsZWQhXHJcbi8vICAgICAgICB0aHJvdHRsZWQgPSB0cnVlO1xyXG4vLyAgICAgICAgLy8gc2V0IGEgdGltZW91dCB0byB1bi10aHJvdHRsZVxyXG4vLyAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuLy8gICAgICAgICAgdGhyb3R0bGVkID0gZmFsc2U7XHJcbi8vICAgICAgICB9LCAyMDApO1xyXG4vLyAgICAgIH0gIFxyXG4vLyAgICB9KTtcclxuLy8gICAgXHJcbi8vLy8gICAg0KTRg9C90LrRhtC40Y8g0LTQu9GPINCy0YvRgNCw0LLQvdC40LLQsNC90LjRjyDQutC90L7Qv9C60LggXCLQndCQ0JLQldCg0KVcIlxyXG4vLyAgICBcclxuLy8gICAgZnVuY3Rpb24gc2V0QnV0dG9uICgpIHtcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgY29uc29sZS5sb2coJ1NFVCBCVVRUT04nKTtcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgdmFyIHdyYXBwZXIgPSB1cEJ1dHRvbi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOyAvLyDQndCw0YXQvtC00LjQvCB3cmFwcGVyLCDRh9GC0L7QsdGLINC+0L/RgNC10LTQtdC70LjRgtGMINC10LPQviDRiNC40YDQuNC90YNcclxuLy8gICAgICAgIHZhciB3cmFwcGVyV2lkdGggPSB3cmFwcGVyLm9mZnNldFdpZHRoOyAvLyDQntC/0YDQtdC00LXQu9GP0LXQvCDRiNC40YDQuNC90YMgd3JhcHBlclxyXG4vLyAgICAgICAgdmFyIHBhZ2VXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgdmFyIHNwYWNlRm9yQnV0dG9uID0gKHBhZ2VXaWR0aCAtIHdyYXBwZXJXaWR0aCkgLyAyOyAvLyDQntC/0YDQtdC00LXQu9GP0LXQvCDRiNC40YDQuNC90YMg0L/Rg9GB0YLQvtCz0L4g0L/RgNC+0YHRgtGA0LDQvdGB0YLQstCwINC80LXQttC00YMgd3JhcHBlciDQuCDQs9GA0LDQvdC40YbQtdC5INGB0YLRgNCw0L3QuNGG0YtcclxuLy9cclxuLy8gICAgICAgIGlmIChzcGFjZUZvckJ1dHRvbiA+IDkwKSB7IC8vINCV0YHQu9C4INC/0YDQvtGB0YLRgNCw0L3RgdGC0LLQsCDQv9C+INGI0LjRgNC40L3QtSDQsdC+0LvRjNGI0LUg0YfQtdC8INGI0LjRgNC40L3QsCDQutC90L7Qv9C60LgsINGA0LDQt9C80LXRidCw0LXQvCDQutC90L7Qv9C60YMg0L/QvtGB0LXRgNC10LTQuNC90LVcclxuLy8gICAgICAgICAgICB2YXIgcmlnaHQgPSAoc3BhY2VGb3JCdXR0b24gLSA4MCkgLyAyO1xyXG4vLyAgICAgICAgICAgIHVwQnV0dG9uLnN0eWxlLnJpZ2h0ID0gcmlnaHQgKyBcInB4XCI7XHJcbi8vICAgICAgICAgICAgfSBlbHNlIHsgLy8g0JXRgdC70Lgg0LzQtdC90YzRiNC1LCDQv9GA0LjQttC40LzQsNC10Lwg0Log0L/RgNCw0LLQvtC5INGB0YLQvtGA0L7QvdC1INGN0LrRgNCw0L3QsFxyXG4vLyAgICAgICAgICAgICAgICB1cEJ1dHRvbi5zdHlsZS5yaWdodCA9IDUgKyBcInB4XCI7XHJcbi8vICAgICAgICAgICAgfTtcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgdmFyIHdyYXBwZXIgPSB1cEJ1dHRvbi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOyBcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgXHJcbi8vICAgIH1cclxuLy8gICAgXHJcbi8vLy8gICAg0KTRg9C90LrRhtC40Y8g0LTQu9GPINC/0L7QutCw0LfQsCDQutC90L7Qv9C60LggXCLQndCQ0JLQldCg0KVcIlxyXG4vLyAgICBcclxuLy8gICAgZnVuY3Rpb24gdXBCdXR0b25TaG93KGVsLCB0LCBmKSB7XHJcbi8vICAgICAgICBcclxuLy8gICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoXCJoaWRkZW5cIikpIHtcclxuLy8gICAgICAgICAgICBcclxuLy8gICAgICAgICAgICB0ID0gMTY4O1xyXG4vLyAgICAgICAgICAgIGYgPSAyNDtcclxuLy8gICAgICAgICAgICB2YXIgZnBzID0gZiwgdGltZSA9IHQsIHN0ZXBzID0gdGltZSAvIGZwcywgaGVpZ2h0ID0gMCwgd2lkdGggPSAwLCBhbmltYXRpb25IZWlnaHQgPSA3MDtcclxuLy8gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuLy9cclxuLy8gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJvcmRlcldpZHRoID0gXCIycHhcIjtcclxuLy8gICAgICAgICAgICAgICAgZWwuc3R5bGUucGFkZGluZyA9IFwiM3B4XCI7XHJcbi8vICAgICAgICAgICAgICAgIGlmIChzdGVwcyA+IDApIHtcclxuLy8gICAgICAgICAgICAgICAgICAgIHZhciBzdGVwID0gYW5pbWF0aW9uSGVpZ2h0IC8gKHRpbWUgLyBmcHMpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ICs9IHN0ZXA7XHJcbi8vICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XHJcbi8vICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IGhlaWdodCArIFwicHhcIjtcclxuLy8gICAgICAgICAgICAgICAgICAgIHN0ZXBzIC09IDE7XHJcbi8vICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbi8vXHJcbi8vICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuLy8gICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgIH0sIHRpbWUgLyBmcHMpO1xyXG4vLyAgICAgICAgICAgIFxyXG4vLyAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICByZXR1cm5cclxuLy8gICAgICAgIH1cclxuLy8gICAgICAgIFxyXG4vLyAgICB9O1xyXG4vLyAgICBcclxuLy8gICAgLy8gICAg0KTRg9C90LrRhtC40Y8g0LTQu9GPINGB0LrRgNGL0YLQuNGPINC60L3QvtC/0LrQuCBcItCd0JDQktCV0KDQpVwiXHJcbi8vICAgIFxyXG4vLyAgICBmdW5jdGlvbiB1cEJ1dHRvbkhpZGUoZWwsIHQsIGYpIHtcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhcImhpZGRlblwiKSkge1xyXG4vLyAgICAgICAgICAgIHJldHVyblxyXG4vLyAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICBcclxuLy8gICAgICAgICAgICB0ID0gMTY4O1xyXG4vLyAgICAgICAgICAgIGYgPSAyNDtcclxuLy8gICAgICAgICAgICB2YXIgZnBzID0gZiwgdGltZSA9IHQsIHN0ZXBzID0gdGltZSAvIGZwcywgaGVpZ2h0ID0gNzAsIHdpZHRoID0gNzAsIGFuaW1hdGlvbkhlaWdodCA9IDcwO1xyXG4vL1xyXG4vLyAgICAgICAgICAgIHZhciBpbnRlcnZhbDIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgICAgICAgIGlmIChzdGVwcyA+IDApIHtcclxuLy8gICAgICAgICAgICAgICAgICAgIHZhciBzdGVwID0gYW5pbWF0aW9uSGVpZ2h0IC8gKHRpbWUgLyBmcHMpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgaGVpZ2h0IC09IHN0ZXA7XHJcbi8vICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XHJcbi8vICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IGhlaWdodCArIFwicHhcIjtcclxuLy8gICAgICAgICAgICAgICAgICAgIHN0ZXBzIC09IDE7XHJcbi8vICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5ib3JkZXJXaWR0aCA9IFwiMHB4XCI7XHJcbi8vICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5wYWRkaW5nID0gXCIwcHhcIjtcclxuLy8gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbDIpO1xyXG4vLyAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgfSwgdGltZSAvIGZwcyk7XHJcbi8vICAgICAgICAgICAgXHJcbi8vICAgICAgICB9XHJcbi8vICAgICAgICBcclxuLy8gICAgfVxyXG4vLyAgICBcclxuLy8gICAgXHJcbi8vICAgIFxyXG4vLyAgICBcclxuLy8gICAgXHJcbi8vICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4vLyAgICB1cEJ1dHRvblNob3codXBCdXR0b24pO1xyXG4gICAgXHJcbi8vICAgIHZhciB0aW1lciA9IHNldFRpbWVvdXQodXBCdXR0b25IaWRlLCA0MDAwLCB1cEJ1dHRvbik7XHJcbiAgICBcclxufSk7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIFxyXG4gICAgdmFyIGdyYWRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhZGUnKVswXS5jaGlsZE5vZGVzWzVdO1xyXG4gICAgXHJcbiAgICBncmFkZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNyZWF0ZU92ZXJsYXkpO1xyXG4gICAgY29uc29sZS5sb2coZ3JhZGUpO1xyXG4gICAgXHJcbiAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGNyZWF0ZU92ZXJsYXkgKCkge1xyXG4gICAgICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdkeW5hbWljLW92ZXJsYXknKTtcclxuICAgICAgICBvdmVybGF5LnN0eWxlLnpJbmRleCA9IFwiMTBcIjtcclxuICAgICAgICBvdmVybGF5LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgb3ZlcmxheS5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICBvdmVybGF5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiYSgxOTIsMTkyLDE5MiwwLjcpXCI7XHJcbiAgICAgICAgb3ZlcmxheS5zdHlsZS50b3AgPSBcIjBcIjtcclxuICAgICAgICBvdmVybGF5LnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgb3ZlcmxheS5zdHlsZS5sZWZ0ID0gXCIwXCI7XHJcbiAgICAgICAgb3ZlcmxheS5zdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcclxuICAgICAgICBib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xyXG4gICAgICAgIGNyZWF0ZU1vZGFsKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGRlbGV0ZU92ZXJsYXkgKCkge1xyXG4gICAgICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZHluYW1pYy1vdmVybGF5JylbMF07XHJcbiAgICAgICAgYm9keS5yZW1vdmVDaGlsZChvdmVybGF5KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gY3JlYXRlTW9kYWwgKCkge1xyXG4gICAgICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZHluYW1pYy1vdmVybGF5JylbMF07XHJcbiAgICAgICAgdmFyIGJlZm9yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyAvLyDQodC+0LfQtNCw0LXQvCDRjdC70LXQvNC10L3RgiDQtNC70Y8g0LLRi9GA0LDQstC90LjQstCw0L3QuNGPINC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwINC/0L4g0LLRi9GB0L7RgtC1INC4INGI0LjRgNC40L3QtSDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YDQsNC30LzQtdGA0LAgYm9keVxyXG4gICAgICAgIGJlZm9yZS5zdHlsZS5jb250ZW50ID0gXCJcIjtcclxuICAgICAgICBiZWZvcmUuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XHJcbiAgICAgICAgYmVmb3JlLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIGJlZm9yZS5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcclxuICAgICAgICBvdmVybGF5LmFwcGVuZENoaWxkKGJlZm9yZSk7IC8vINCU0L7QsdCw0LLQu9GP0LXQvCBiZWZvcmVcclxuICAgICAgICB2YXIgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgLy8g0KHQvtC30LTQsNC10Lwg0LzQvtC00LDQu9GM0L3QvtC1INC+0LrQvdC+XHJcbiAgICAgICAgbW9kYWwuc3R5bGUuekluZGV4ID0gXCIzXCI7XHJcbiAgICAgICAgbW9kYWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCIxMHB4XCI7XHJcbiAgICAgICAgbW9kYWwuc3R5bGUuYm9yZGVyID0gXCIzcHggc29saWQgYmxhY2tcIjtcclxuLy8gICAgICAgIG1vZGFsLnN0eWxlLmhlaWdodCA9IFwiMjAwcHhcIjtcclxuICAgICAgICBtb2RhbC5zdHlsZS5tYXhXaWR0aCA9IFwiMzIwcHhcIjtcclxuICAgICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbC13aW5kb3cnKTtcclxuICAgICAgICBtb2RhbC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcclxuICAgICAgICBtb2RhbC5zdHlsZS5iYWNrZ3JvdW5kID0gXCJ3aGl0ZVwiO1xyXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xyXG4gICAgICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQobW9kYWwpOyAvLyDQlNC+0LHQsNCy0LvRj9C10LwgYmVmb3JlXHJcbiAgICAgICAgY3JlYXRlRm9ybSgpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gY3JlYXRlRm9ybSAoKSB7XHJcbiAgICAgICAgdmFyIG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kYWwtd2luZG93JylbMF07XHJcbiAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XHJcbiAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCdvcmRlcl9mb3JtJyk7XHJcbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQoZm9ybSk7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQocmVxdWVzdCk7XHJcbiAgICAgICAgcmVxdWVzdC5pbm5lckhUTUwgPSAn0JfQsNGP0LLQutCwJztcclxuICAgICAgICB2YXIgcHJlc2VudFlvdXJzZWxmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKHByZXNlbnRZb3Vyc2VsZik7XHJcbiAgICAgICAgcHJlc2VudFlvdXJzZWxmLnNldEF0dHJpYnV0ZSgnbmFtZScsICduYW1lJyk7XHJcbiAgICAgICAgcHJlc2VudFlvdXJzZWxmLnBsYWNlaG9sZGVyID0gJ9Ca0LDQuiDQuiDQktCw0Lwg0L7QsdGA0LDRidCw0YLRjNGB0Y8/JztcclxuICAgICAgICB2YXIgY29udGFjdFRlbGVwaG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjb250YWN0VGVsZXBob25lKTtcclxuICAgICAgICBjb250YWN0VGVsZXBob25lLnBsYWNlaG9sZGVyID0gJ9CS0LDRiCDRgtC10LvQtdGE0L7QvSc7XHJcbiAgICAgICAgY29udGFjdFRlbGVwaG9uZS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAndGVsZXBob25lJyk7XHJcbiAgICAgICAgdmFyIGNvbnRhY3RFbWFpbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChjb250YWN0RW1haWwpO1xyXG4gICAgICAgIGNvbnRhY3RFbWFpbC5wbGFjZWhvbGRlciA9ICfQktCw0YggZS1tYWlsJztcclxuICAgICAgICBjb250YWN0RW1haWwuc2V0QXR0cmlidXRlKCduYW1lJywgJ2VtYWlsJyk7XHJcbiAgICAgICAgdmFyIGdyYWRlQ29hbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xyXG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZ3JhZGVDb2FsKTtcclxuICAgICAgICBncmFkZUNvYWwuc2V0QXR0cmlidXRlKCduYW1lJywgJ2dyYWRlJyk7XHJcbiAgICAgICAgdmFyIGNvYWxHcmFkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgIGdyYWRlQ29hbC5hcHBlbmRDaGlsZChjb2FsR3JhZGUpO1xyXG4gICAgICAgIGNvYWxHcmFkZS5pbm5lckhUTUwgPSAn0JLRi9Cx0LXRgNC40YLQtSDQvNCw0YDQutGDJztcclxuICAgICAgICBjb2FsR3JhZGUuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgICAgICB2YXIgYXNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgZ3JhZGVDb2FsLmFwcGVuZENoaWxkKGFzaCk7XHJcbiAgICAgICAgYXNoLnZhbHVlID0gJ9Cc0LDRgNC60LAg0LDQvdGC0YDQsNGG0LjRgtCwIC0g0JDQqCc7XHJcbiAgICAgICAgYXNoLmlubmVySFRNTCA9ICfQkNCoJztcclxuICAgICAgICB2YXIgYXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICBncmFkZUNvYWwuYXBwZW5kQ2hpbGQoYXMpO1xyXG4gICAgICAgIGFzLnZhbHVlID0gJ9Cc0LDRgNC60LAg0LDQvdGC0YDQsNGG0LjRgtCwIC0g0JBDJztcclxuICAgICAgICBhcy5pbm5lckhUTUwgPSAn0JDQoSc7XHJcbiAgICAgICAgdmFyIGFtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICAgICAgZ3JhZGVDb2FsLmFwcGVuZENoaWxkKGFtKTtcclxuICAgICAgICBhbS52YWx1ZSA9ICfQnNCw0YDQutCwINCw0L3RgtGA0LDRhtC40YLQsCAtINCQ0JwnO1xyXG4gICAgICAgIGFtLmlubmVySFRNTCA9ICfQkNCcJztcclxuICAgICAgICB2YXIgYW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICBncmFkZUNvYWwuYXBwZW5kQ2hpbGQoYW8pO1xyXG4gICAgICAgIGFvLnZhbHVlID0gJ9Cc0LDRgNC60LAg0LDQvdGC0YDQsNGG0LjRgtCwIC0g0JDQnic7XHJcbiAgICAgICAgYW8uaW5uZXJIVE1MID0gJ9CQ0J4nO1xyXG4gICAgICAgIHZhciBhayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgIGdyYWRlQ29hbC5hcHBlbmRDaGlsZChhayk7XHJcbiAgICAgICAgYWsudmFsdWUgPSAn0JzQsNGA0LrQsCDQsNC90YLRgNCw0YbQuNGC0LAgLSDQkNCaJztcclxuICAgICAgICBhay5pbm5lckhUTUwgPSAn0JDQmic7XHJcbiAgICAgICAgdmFyIGFrbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgIGdyYWRlQ29hbC5hcHBlbmRDaGlsZChha28pO1xyXG4gICAgICAgIGFrby52YWx1ZSA9ICfQnNCw0YDQutCwINCw0L3RgtGA0LDRhtC40YLQsCAtINCQ0JrQnic7XHJcbiAgICAgICAgYWtvLmlubmVySFRNTCA9ICfQkNCa0J4nO1xyXG4gICAgICAgIHZhciB0b25uYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKHRvbm5hZ2UpO1xyXG4gICAgICAgIHRvbm5hZ2UucGxhY2Vob2xkZXIgPSAn0KPQutCw0LbQuNGC0LUg0YLQvtC90L3QsNC2JztcclxuICAgICAgICB0b25uYWdlLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0b25uYWdlJyk7XHJcbiAgICAgICAgdmFyIHN1Ym1pdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChzdWJtaXQpO1xyXG4gICAgICAgIHN1Ym1pdC50eXBlID0gJ3N1Ym1pdCc7XHJcbiAgICAgICAgc3VibWl0LmlubmVySFRNTCA9ICfQntCk0J7QoNCc0JjQotCsJztcclxuICAgICAgICBzdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZW5kRm9ybSk7XHJcbiAgICAgICAgdmFyIGNhbmNlbGxhdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoY2FuY2VsbGF0aW9uKTtcclxuICAgICAgICBjYW5jZWxsYXRpb24uaW5uZXJIVE1MID0gJ9C+0YLQvNC10L3QuNGC0YwnO1xyXG4gICAgICAgIGNhbmNlbGxhdGlvbi5jbGFzc0xpc3QuYWRkKCdjYW5jZWxfYnV0dG9uJyk7XHJcbiAgICAgICAgY2FuY2VsbGF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlT3ZlcmxheSk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNlbmRGb3JtIChlbCkge1xyXG4gICAgICAgIGVsLnByZXZlbnREZWZhdWx0KCk7XHJcbi8vICAgICAgICB2YXIgbmFtZSA9IGRvY3VtZW50LmZvcm1zWzBdWzBdLnZhbHVlO1xyXG4vLyAgICAgICAgdmFyIHRlbGVwaG9uZSA9IGRvY3VtZW50LmZvcm1zWzBdWzFdLnZhbHVlO1xyXG4vLyAgICAgICAgdmFyIGVtYWlsID0gZG9jdW1lbnQuZm9ybXNbMF1bMl0udmFsdWU7XHJcbi8vICAgICAgICB2YXIgZ3JhZGUgPSBkb2N1bWVudC5mb3Jtc1swXVszXS52YWx1ZTtcclxuLy8gICAgICAgIHZhciB2YWx1ZSA9IGRvY3VtZW50LmZvcm1zWzBdWzRdLnZhbHVlO1xyXG4vLyAgICAgICAgY29uc29sZS5sb2coJ9CU0LDQvdC90YvQtSDRhNC+0YDQvNGLJywgbmFtZSwgdGVsZXBob25lLCBlbWFpbCwgZ3JhZGUsIHZhbHVlKTtcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSAnbmFtZT0nICsgZG9jdW1lbnQuZm9ybXNbMF1bMF0udmFsdWUgKyAnJnRlbGVwaG9uZT0nICsgZG9jdW1lbnQuZm9ybXNbMF1bMV0udmFsdWUgKyAnJmVtYWlsPScgKyBkb2N1bWVudC5mb3Jtc1swXVsyXS52YWx1ZSArICcmZ3JhZGU9JyArIGRvY3VtZW50LmZvcm1zWzBdWzNdLnZhbHVlICsgJyZ0b25uYWdlPScgKyAgZG9jdW1lbnQuZm9ybXNbMF1bNF0udmFsdWU7XHJcbiAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciB4bWxSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeG1sUmVxdWVzdC5vcGVuKCdQT1NUJywgJy4uL3NlbmQucGhwJywgdHJ1ZSk7XHJcbiAgICAgICAgeG1sUmVxdWVzdC5zZW5kKGZvcm1EYXRhKTtcclxuICAgICAgICBcclxuICAgICAgICB4bWxSZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKHhtbFJlcXVlc3QucmVhZHlTdGF0ZSAhPSA0KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgaWYgKHhtbFJlcXVlc3Quc3RhdHVzICE9IDIwMCkge1xyXG4gICAgICAgICAgICBhbGVydChcItCe0YLQv9GA0LDQstC40YLRjCDQtNCw0L3QvdGL0LUg0L3QtSDRg9C00LDQu9C+0YHRjFwiICsgeG1sUmVxdWVzdC5zdGF0dXMgKyAnOiAnICsgeG1sUmVxdWVzdC5zdGF0dXNUZXh0KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgYWxlcnQoXCLQktCw0YjQsCDQt9Cw0Y/QstC60LAg0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC90LAuINCc0Ysg0YHQstGP0LbQtdC80YHRjyDRgSDQktCw0LzQuCDQsiDRgdCw0LzQvtC1INCx0LvQuNC20LDQudGI0LXQtSDQstGA0LXQvNGPLlwiKTsgICAgXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBcclxuLy8gICAgZnVuY3Rpb24g0LLRg9GCICgpIHtcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgdmFyIHVybFF1ZXJ5ID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9jdXN0b21zZWFyY2gvdjE/cT1cIiArIHRleHRWYWx1ZSArIFwiJmN4PTAxNjczMjYyNDgxNjQ3MTA2MTQyODozZ3QycmN4bzdsayZpbWdTaXplPW1lZGl1bSZmaWxlVHlwZT1qcGcmbnVtPTEmc2VhcmNoVHlwZT1pbWFnZSZpbWdEb21pbmFudENvbG9yPXBpbmsma2V5PUFJemFTeUJuY09rME9LRDBwN1NFcXBuQ25qNjhsWkFsMHpxeHh2b1wiO1xyXG4vLyAgICAgICAgXHJcbi8vICAgICAgICB2YXIgeG1sUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4vLyAgICAgICAgeG1sUmVxdWVzdC5vcGVuKCdHRVQnLCB1cmxRdWVyeSwgdHJ1ZSk7XHJcbi8vICAgICAgICB4bWxSZXF1ZXN0LnNlbmQoKTtcclxuLy8gICAgICAgIFxyXG4vLyAgICAgICAgeG1sUmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuLy8gICAgICAgICAgaWYgKHhtbFJlcXVlc3QucmVhZHlTdGF0ZSAhPSA0KSByZXR1cm47XHJcbi8vXHJcbi8vICAgICAgICAgIGlmICh4bWxSZXF1ZXN0LnN0YXR1cyAhPSAyMDApIHtcclxuLy8gICAgICAgICAgICBjb25zb2xlLmxvZyhcItCY0LfQvtCx0YDQsNC20LXQvdC40LUg0L/QviDQtNCw0L3QvdC+0LzRgyDQt9Cw0L/RgNC+0YHRgyDQvdC1INC/0L7Qu9GD0YfQtdC90L4gXCIgKyB4bWxSZXF1ZXN0LnN0YXR1cyArICc6ICcgKyB4bWxSZXF1ZXN0LnN0YXR1c1RleHQpO1xyXG4vLyAgICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhtbFJlcXVlc3QucmVzcG9uc2VUZXh0KTtcclxuLy8gICAgICAgICAgICAgIHZhciBpbWFnZUxpbmsgPSBkYXRhLml0ZW1zWzBdLmxpbms7XHJcbi8vICAgICAgICAgICAgICB2YXIgaW1hZ2VXaWR0aCA9IGRhdGEuaXRlbXNbMF0uaW1hZ2Uud2lkdGg7XHJcbi8vICAgICAgICAgICAgICB2YXIgaW1hZ2VoZWlnaHQgPSBkYXRhLml0ZW1zWzBdLmltYWdlLmhlaWdodDtcclxuLy8gICAgICAgICAgICAgIHZhciByYXRpbyA9IGltYWdlV2lkdGggLyBpbWFnZWhlaWdodDtcclxuLy8gICAgICAgICAgICAgIGlmIChyYXRpbyA+IDIpIHtcclxuLy8gICAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSA0NDA7XHJcbi8vICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSByYXRpbyAqIDMxMDsgIFxyXG4vLyAgICAgICAgICAgICAgfTtcclxuLy8gICAgICAgICAgICAgIGN1cnJlbnREaXYuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgaW1hZ2VMaW5rICsgJyknO1xyXG4vLyAgICAgICAgICAgICAgY3VycmVudERpdi5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcclxuLy8gICAgICAgICAgICAgIGN1cnJlbnREaXYuc3R5bGUuYmFja2dyb3VuZFNpemUgPSAnYXV0byAzMTBweCc7XHJcbi8vICAgICAgICAgICAgICBtYXNvbnJ5KCk7ICAgIFxyXG4vLyAgICAgICAgICB9XHJcbi8vXHJcbi8vICAgICAgICB9O1xyXG4vL1xyXG4vLyAgICB9O1xyXG4gICAgXHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
